(()=>{"use strict";var e={9188:(e,t,n)=>{var o=n(7408),r=n(9307),i=n(6283),a=n(9039),l=n(6986),s=n(8648),d=n(8833),c=n(3929),u=n(6773),f=n(5648),g=n(932),m=n(3668),y=n(1690),h=n(4767),p=n(8264),x=n(1171),b=n(5412),j=n(827);const C="@daily_tracker_entries",w="@daily_tracker_action_items",S="@daily_tracker_expenses",T="@daily_tracker_settings";class B{static async getEntries(){try{const e=await j.default.getItem(C);if(null!=e){const t=JSON.parse(e).map(e=>Object.assign({},e,{timestamp:new Date(e.timestamp),type:e.type,isMarkdown:e.isMarkdown||!1}));return t.sort((e,t)=>{if(Math.abs(e.timestamp.getTime()-t.timestamp.getTime())<2e3){if("system"===e.type&&"system"!==t.type)return 1;if("system"!==e.type&&"system"===t.type)return-1}return e.timestamp.getTime()-t.timestamp.getTime()})}return[]}catch(e){return console.error("Error getting entries:",e),[]}}static async saveEntries(e){try{const t=JSON.stringify(e);await j.default.setItem(C,t)}catch(t){console.error("Error saving entries:",t)}}static async addEntry(e){try{const t=await this.getEntries();t.push(e),await this.saveEntries(t)}catch(t){console.error("Error adding entry:",t)}}static async getActionItems(){try{const e=await j.default.getItem(w);if(null!=e){return JSON.parse(e).map(e=>Object.assign({},e,{createdAt:new Date(e.createdAt),dueDate:e.dueDate?new Date(e.dueDate):void 0}))}return[]}catch(e){return console.error("Error getting action items:",e),[]}}static async saveActionItems(e){try{const t=JSON.stringify(e);await j.default.setItem(w,t)}catch(t){console.error("Error saving action items:",t)}}static async addActionItem(e){try{const t=await this.getActionItems();t.push(e),await this.saveActionItems(t)}catch(t){console.error("Error adding action item:",t)}}static async updateActionItem(e,t){try{const n=await this.getActionItems(),o=n.findIndex(t=>t.id===e);-1!==o&&(n[o]=Object.assign({},n[o],t)),await this.saveActionItems(n)}catch(n){console.error("Error updating action item:",n)}}static async deleteActionItem(e){try{const t=(await this.getActionItems()).filter(t=>t.id!==e);await this.saveActionItems(t)}catch(t){console.error("Error deleting action item:",t)}}static async getExpenses(){try{const e=await j.default.getItem(S);if(null!=e){const t=JSON.parse(e);return t.map(e=>Object.assign({},e,{createdAt:new Date(e.createdAt)}))}return[]}catch(e){return console.error("Error getting expenses:",e),[]}}static async saveExpenses(e){try{const t=JSON.stringify(e);await j.default.setItem(S,t)}catch(t){console.error("Error saving expenses:",t)}}static async addExpense(e){try{const t=await this.getExpenses();t.push(e),await this.saveExpenses(t)}catch(t){console.error("Error adding expense:",t)}}static async updateExpense(e,t){try{const n=await this.getExpenses(),o=n.findIndex(t=>t.id===e);-1!==o&&(n[o]=Object.assign({},n[o],t),await this.saveExpenses(n))}catch(n){console.error("Error updating expense:",n)}}static async deleteExpense(e){try{const t=(await this.getExpenses()).filter(t=>t.id!==e);await this.saveExpenses(t)}catch(t){console.error("Error deleting expense:",t)}}static async getSettings(){try{const e=await j.default.getItem(T);return null!=e?JSON.parse(e):null}catch(e){return console.error("Error getting settings:",e),null}}static async saveSettings(e){try{const t=JSON.stringify(e);await j.default.setItem(T,t)}catch(t){console.error("Error saving settings:",t)}}}const k=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)});class A{static detectActionItem(e){return/^\s*\.\s*\S/.test(e)}static detectExpense(e){const t=e.toLowerCase();if(this.EXPENSE_KEYWORDS.some(e=>t.includes(e)))return!0;if(this.hasNumericValue(e)&&this.hasExpenseContext(e)){if(/^\s*\d+(\.\d{1,2})?\s*$/.test(e))return!1;return!/^\s*(?:Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])\s*\d+(?:\.\d{1,2})?\s*$/.test(e)}return!1}static hasNumericValue(e){return/(?:Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])\s*\d+(?:\.\d{1,2})?|\b\d+(?:\.\d{1,2})?\b/.test(e)}static hasExpenseContext(e){const t=e.toLowerCase();if(["spent","bought","purchased","paid","cost","price","bill","receipt","shopping","store","market","restaurant","cafe","food","lunch","dinner","gas","fuel","electricity","rent","groceries","medicine","doctor","haircut","salon","barber","transportation","taxi","uber","lyft","coffee","tea","snack","movie","ticket","parking","toll"].some(e=>t.includes(e)))return!0;if(/\d+(?:\.\d{1,2})?\s+for\s+\w+/i.test(e))return!0;return!!/(?:Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])\s*\d+(?:\.\d{1,2})?\s+for\s+\w+/i.test(e)}static getSystemCurrency(){try{const t=Intl.NumberFormat().resolvedOptions().locale,n=Intl.DateTimeFormat().resolvedOptions().timeZone,o={"en-IN":"INR",en_IN:"INR","hi-IN":"INR",hi_IN:"INR","en-CA":"CAD",en_CA:"CAD","en-AU":"AUD",en_AU:"AUD","de-DE":"EUR",de_DE:"EUR","fr-FR":"EUR",fr_FR:"EUR","es-ES":"EUR",es_ES:"EUR","it-IT":"EUR",it_IT:"EUR","ja-JP":"JPY",ja_JP:"JPY","ko-KR":"KRW",ko_KR:"KRW","zh-CN":"CNY",zh_CN:"CNY","pt-BR":"BRL",pt_BR:"BRL","ru-RU":"RUB",ru_RU:"RUB"};if(o[t])return o[t];if(t.endsWith("-IN")||t.endsWith("_IN"))return"INR";if(n&&(n.includes("Asia/Calcutta")||n.includes("Asia/Kolkata")))return"INR";if(t.includes("en"))try{const e=new Intl.NumberFormat(t,{style:"currency",currency:"INR"});if(e.format(100).includes("\u20b9"))return"INR"}catch(e){}if(t.endsWith("-US")||t.endsWith("_US"))return"USD";if(t.endsWith("-GB")||t.endsWith("_GB"))return"GBP";if(t.endsWith("-DE")||t.endsWith("_DE")||t.endsWith("-FR")||t.endsWith("_FR")||t.endsWith("-ES")||t.endsWith("_ES")||t.endsWith("-IT")||t.endsWith("_IT"))return"EUR";return Intl.NumberFormat(t).resolvedOptions().currency||"USD"}catch(e){return"USD"}}static extractActionItem(e,t){if(this.detectActionItem(e)){let n=e.trim();return n.startsWith(".")&&(n=n.substring(1).trim()),{id:k(),entryId:t,title:n,completed:!1,createdAt:new Date}}return null}static extractExpenseInfo(e,t){const n=this.extractAmount(e);if(!n)return null;const o=this.extractCategoryFromText(e);return{id:k(),entryId:t,amount:n.value,currency:n.currency,description:o.description,category:o.category,createdAt:new Date}}static extractCategoryFromText(e){const t=e.toLowerCase().trim(),n=e.trim(),o=e.match(/(?:spent|paid|bought|purchased|cost|charged)\s+(?:Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])?\s*\d+(?:\.\d{1,2})?\s+for\s+(.+)/i);if(o){const e=o[1].trim();return{category:this.mapToStandardCategory(e),description:n}}const r=e.match(/(?:Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])?\s*\d+(?:\.\d{1,2})?\s+for\s+(.+)/i);if(r){const e=r[1].trim();return{category:this.mapToStandardCategory(e),description:n}}const i=e.match(/(?:spent|paid|bought|purchased)\s+(?:Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])?\s*\d+(?:\.\d{1,2})?\s+on\s+(.+)/i);if(i){const e=i[1].trim();return{category:this.mapToStandardCategory(e),description:n}}const a=["haircut","salon","barber","taxi","uber","lyft","parking","toll","coffee","tea","lunch","dinner","breakfast","snack","food","groceries","shopping","movie","ticket","gas","fuel","electricity","rent","medicine","doctor","train","bus","flight","metro","subway","cab","auto"];for(const l of a)if(t.includes(l)){if("ticket"===l){const e=t.match(/\b(train|bus|flight|metro|subway)\s+ticket\b/);if(e)return{category:this.mapToStandardCategory(e[0]),description:n};const o=t.match(/\b(movie|cinema|concert|show)\s+ticket\b/);return o?{category:this.mapToStandardCategory(o[0]),description:n}:{category:this.mapToStandardCategory("ticket"),description:n}}return{category:this.mapToStandardCategory(l),description:n}}return{description:n}}static mapToStandardCategory(e){const t=e.toLowerCase().trim();return["train ticket","bus ticket","flight ticket","metro ticket","subway ticket"].some(e=>t.includes(e))||["taxi","uber","lyft","parking","toll","gas","fuel","transportation","train","bus","flight","metro","subway","cab","auto"].some(e=>t.includes(e))?"Transportation":["coffee","tea","lunch","dinner","breakfast","snack","food","groceries","restaurant","cafe"].some(e=>t.includes(e))?"Food":["haircut","salon","barber","medicine","doctor","hospital","pharmacy"].some(e=>t.includes(e))?"Health & Personal Care":["movie ticket","concert ticket","show ticket","movie","cinema","theater","entertainment"].some(e=>t.includes(e))||t.includes("ticket")&&!["train","bus","flight","metro","subway"].some(e=>t.includes(e))?"Entertainment":["electricity","rent","bill","utilities","water","internet"].some(e=>t.includes(e))?"Utilities":["shopping","clothes","clothing","shoes","accessories"].some(e=>t.includes(e))?"Shopping":e.charAt(0).toUpperCase()+e.slice(1)}static extractAmount(e){const t=e.match(/(?:Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])\s*(\d+(?:\.\d{1,2})?)|(\d+(?:\.\d{1,2})?)/g);if(!t||0===t.length)return null;let n=null,o=0;const r=t.map(e=>{const t=e.replace(/^(Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])\s*/i,""),r=parseFloat(t);return!isNaN(r)&&r>0?(r>=o&&(o=r,e.includes("$")?n="USD":e.includes("\u20ac")?n="EUR":e.includes("\xa3")?n="GBP":(e.includes("\u20b9")||/Rs\.?|rs\.?|RS\.?/i.test(e))&&(n="INR")),r):NaN}).filter(e=>!isNaN(e)&&e>0);if(0===r.length)return null;return{value:Math.max(...r),currency:n||this.getSystemCurrency()}}static formatCurrency(e,t){const n=t||this.getSystemCurrency();try{let t="en-US";switch(n){case"USD":t="en-US";break;case"EUR":case"GBP":t="en-GB";break;case"INR":t="en-IN";break;case"CAD":t="en-CA";break;case"AUD":t="en-AU"}const o=new Intl.NumberFormat(t,{style:"currency",currency:n,minimumFractionDigits:2,maximumFractionDigits:2}).format(e);return"USD"===n&&o.startsWith("US$")?o.replace("US$","$"):"CAD"===n&&o.startsWith("CA$")?o.replace("CA$","C$"):o}catch(o){return`${{USD:"$",EUR:"\u20ac",GBP:"\xa3",INR:"\u20b9",CAD:"C$",AUD:"A$",JPY:"\xa5",CNY:"\xa5"}[n]||n}${e.toFixed(2)}`}}static isExpenseRelated(e){const t=e.toLowerCase();return this.EXPENSE_KEYWORDS.some(e=>t.includes(e))}}A.CURRENCY_PATTERNS=[/\b\d+(\.\d{1,2})?\b/g,/[\u20b9$\u20ac\xa3]\s*\d+(\.\d{1,2})?|\d+(\.\d{1,2})?\s*[\u20b9$\u20ac\xa3]/g,/(?:Rs\.?|rs\.?|RS\.?)\s*\d+(\.\d{1,2})?/g,/\d+(\.\d{1,2})?\s*(rupees?|dollars?|euros?|pounds?)/g],A.EXPENSE_KEYWORDS=["spent","bought","purchased","paid","cost","expense","payment","buy","pay","shopping","store","bill","receipt","charged","withdrew","withdrawal","transaction","fee","subscription"],A.ACTION_KEYWORDS=["todo","to-do","task","need to","should","must","have to","action","plan","schedule","remind","remember","don't forget","important","deadline","due","appointment","meeting","call","email","follow up","buy","get","pick up","pack","finish","complete","start","contact","reach out","check","review","submit","apply","book","reserve"];var v=n(5009),I=n(444),z=n(2656),E=n(6725);const R=()=>{{const e=E.default.get("window").width,t="undefined"!==typeof navigator?navigator.userAgent:"",n=e>768,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t);return n&&!o}};var D=n(4411);const W=({entry:e,onLongPress:t,onEdit:n,onDelete:o,markdownStyles:a,expense:l,actionItem:s})=>{const[d,u]=(0,r.useState)(!1),[g]=(0,r.useState)(new v.default.Value(0)),m=R(),y=I.default.create({onStartShouldSetPanResponder:()=>!m&&"system"!==e.type,onMoveShouldSetPanResponder:(t,n)=>!m&&"system"!==e.type&&Math.abs(n.dx)>5,onPanResponderMove:(e,t)=>{t.dx<0&&g.setValue(t.dx)},onPanResponderRelease:(e,t)=>{t.dx<-80?v.default.spring(g,{toValue:-80,useNativeDriver:!0}).start():v.default.spring(g,{toValue:0,useNativeDriver:!0}).start()}}),h=()=>{switch(e.type){case"expense":return(0,D.jsx)(i.default,{style:{fontSize:16,color:"#2e7d32"},children:"\ud83d\udcb0"});case"action":return(0,D.jsx)(i.default,{style:{fontSize:16,color:"#1565c0"},children:"\u2705"});default:return null}};return(0,D.jsx)(c.default,{style:"system"===e.type?M.systemMessageContainer:M.userMessageContainer,children:(0,D.jsx)(c.default,{style:M.bubbleWrapper,children:(0,D.jsxs)(v.default.View,Object.assign({},y.panHandlers,{style:[{flexDirection:"row",transform:[{translateX:g}]}]},m&&"system"!==e.type?{onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)}:{},{children:[(0,D.jsx)(f.default,{activeOpacity:1,onLongPress:"system"!==e.type?()=>{n&&n(e)}:void 0,delayLongPress:500,disabled:m&&"system"!==e.type,style:(()=>{const t=[M.messageBubble],n="system"===e.type?M.systemMessage:M.userMessage;switch(e.type){case"expense":return[...t,M.expenseBubble,n];case"action":return[...t,M.actionBubble,n];case"system":return[...t,M.systemBubble,n];default:return[...t,M.defaultBubble,n]}})(),children:(0,D.jsx)(()=>(0,D.jsxs)(c.default,{style:{flex:1},children:[(0,D.jsxs)(c.default,{style:M.messageHeader,children:[h(),(0,D.jsx)(i.default,{style:M.timestamp,children:(0,b.default)(e.timestamp,"HH:mm")}),"system"!==e.type&&m&&d&&(0,D.jsxs)(c.default,{style:M.actionButtons,children:[n&&(0,D.jsx)(f.default,{style:M.actionButton,onPress:()=>n(e),hitSlop:{top:10,bottom:10,left:10,right:10},children:(0,D.jsx)(i.default,{style:M.actionButtonText,children:"\u270f\ufe0f Edit"})}),o&&(0,D.jsx)(f.default,{style:[M.actionButton,M.deleteButton],onPress:t=>{t.stopPropagation(),window.confirm("Are you sure you want to delete this entry?")&&o(e)},hitSlop:{top:10,bottom:10,left:10,right:10},children:(0,D.jsx)(i.default,{style:M.actionButtonText,children:"\ud83d\uddd1\ufe0f Delete"})})]})]}),"system"!==e.type&&!m&&(0,D.jsx)(i.default,{style:M.gestureHint,children:"Long press to edit \u2022 Swipe left to delete"}),e.isMarkdown?(0,D.jsx)(z.default,{style:a,children:e.text}):(0,D.jsx)(i.default,{style:[M.messageText,"system"===e.type?M.systemMessageText:"log"===e.type?M.userMessageText:M.nonUserMessageText],selectable:!0,children:e.text})]}),{})}),!m&&"system"!==e.type&&(0,D.jsx)(f.default,{style:M.deleteIndicator,onPress:()=>{o&&o(e),v.default.spring(g,{toValue:0,useNativeDriver:!0}).start()},children:(0,D.jsx)(i.default,{style:{fontSize:24,color:"#f44336"},children:"\ud83d\uddd1\ufe0f"})})]}))})})},M=m.default.create({userMessageContainer:{marginVertical:4,alignSelf:"flex-start",maxWidth:"90%",flexShrink:0},systemMessageContainer:{marginVertical:4,alignSelf:"flex-end",maxWidth:"90%",flexShrink:0},bubbleWrapper:{position:"relative",overflow:"hidden"},deleteIndicator:{position:"absolute",right:-80,top:0,bottom:0,width:80,backgroundColor:"transparent",justifyContent:"center",alignItems:"center",borderRadius:12},messageContainer:{marginVertical:1,alignSelf:"flex-start",maxWidth:"95%"},messageBubble:Object.assign({paddingHorizontal:12,paddingVertical:8,minWidth:200,maxWidth:"100%",alignSelf:"flex-start",borderRadius:12},{boxShadow:"0px 1px 1px rgba(0, 0, 0, 0.18)"}),defaultBubble:{backgroundColor:"#f0f0f0"},expenseBubble:{backgroundColor:"#e8f5e8",borderColor:"#4caf50",borderWidth:1},actionBubble:{backgroundColor:"#e3f2fd",borderColor:"#2196f3",borderWidth:1},systemBubble:{backgroundColor:"#e3f2fd",borderColor:"#2196f3",borderWidth:1,borderRadius:12},systemMessage:{backgroundColor:"#e3f2fd",marginLeft:"15%",borderTopLeftRadius:20,borderTopRightRadius:5,borderBottomLeftRadius:20,borderBottomRightRadius:5},userMessage:{backgroundColor:"#f0f0f0",marginRight:"15%",borderTopLeftRadius:5,borderTopRightRadius:20,borderBottomLeftRadius:5,borderBottomRightRadius:20},messageHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:4,flexWrap:"wrap",minWidth:200},actionButtons:{flexDirection:"row",gap:4,alignItems:"center"},actionButton:{flexDirection:"row",alignItems:"center",padding:4,paddingHorizontal:6,borderRadius:4,backgroundColor:"rgba(0, 0, 0, 0.05)"},deleteButton:{backgroundColor:"rgba(244, 67, 54, 0.1)"},actionButtonText:{fontSize:12},gestureHint:{fontSize:9,color:"#999",fontStyle:"italic",marginBottom:4},timestamp:{fontSize:10,color:"#666",marginLeft:4},messageText:Object.assign({fontSize:15,lineHeight:20},{userSelect:"text",WebkitUserSelect:"text",display:"inline-block",minWidth:"fit-content"}),userMessageText:{color:"#333"},systemMessageText:{color:"#1565c0",fontSize:14,textAlign:"left",fontWeight:"500"},nonUserMessageText:{color:"#333"},categoryLabel:{fontSize:11,color:"#666",fontStyle:"italic",marginTop:2,flexShrink:1,flexWrap:"wrap"}}),P=({item:e,expense:t,actionItem:n,onEdit:o,onDelete:a,markdownStyles:l,layoutStyles:s})=>{const d=R(),[u]=(0,r.useState)(new v.default.Value(0)),[g,m]=(0,r.useState)(!1),y=d?{panHandlers:{}}:I.default.create({onStartShouldSetPanResponder:()=>"system"!==e.type,onMoveShouldSetPanResponder:(t,n)=>"system"!==e.type&&Math.abs(n.dx)>5,onPanResponderMove:(e,t)=>{t.dx<0&&u.setValue(t.dx)},onPanResponderRelease:(e,t)=>{t.dx<-80?v.default.spring(u,{toValue:-80,useNativeDriver:!0}).start():v.default.spring(u,{toValue:0,useNativeDriver:!0}).start()}});return(0,D.jsx)(f.default,Object.assign({activeOpacity:1,onPress:()=>{d||m(!g)},onLongPress:()=>{d||"system"===e.type||o(e)},delayLongPress:500,disabled:d},d?{onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1)}:{},{children:(0,D.jsx)(c.default,{style:{position:"relative",overflow:"hidden"},children:(0,D.jsxs)(v.default.View,Object.assign({},d?{}:y.panHandlers,{style:[{flexDirection:"row"},!d&&{transform:[{translateX:u}]}],children:[(0,D.jsxs)(c.default,{style:s.minimalContainer,children:[(0,D.jsxs)(c.default,{style:s.minimalContent,children:[e.isMarkdown?(0,D.jsx)(z.default,{style:l,children:e.text}):(0,D.jsx)(i.default,{style:s.minimalText,numberOfLines:1,ellipsizeMode:"tail",children:e.text}),t&&(0,D.jsx)(i.default,{style:{fontSize:14},children:"\ud83d\udcb0"}),n&&(0,D.jsx)(i.default,{style:{fontSize:14},children:"\u2705"})]}),(0,D.jsxs)(c.default,{style:s.minimalMeta,children:[g&&(0,D.jsx)(i.default,{style:s.minimalTime,children:(0,b.default)(e.timestamp,"h:mm a")}),"system"!==e.type&&d&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(f.default,{style:{padding:2,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:4,marginLeft:4},onPress:()=>o(e),children:(0,D.jsx)(i.default,{style:{fontSize:10},children:"\u270f\ufe0f"})}),(0,D.jsx)(f.default,{style:{padding:2,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:4,marginLeft:2},onPress:()=>{window.confirm("Are you sure you want to delete this entry?")&&a(e)},children:(0,D.jsx)(i.default,{style:{fontSize:10},children:"\ud83d\uddd1\ufe0f"})})]})]})]}),!d&&"system"!==e.type&&(0,D.jsx)(f.default,{style:H.deleteIndicator,onPress:()=>{a(e),v.default.spring(u,{toValue:0,useNativeDriver:!0}).start()},children:(0,D.jsx)(i.default,{style:{fontSize:24,color:"#f44336"},children:"\ud83d\uddd1\ufe0f"})})]}))})}))},H=m.default.create({deleteIndicator:{position:"absolute",right:-80,top:0,bottom:0,width:80,backgroundColor:"transparent",justifyContent:"center",alignItems:"center"}});var L=n(4037),O=n(2772);const V={isMarkdownEnabled:!0,enterToSend:!0,systemCurrency:"AUTO",layoutStyle:"chat",theme:"system"},F=[{code:"AUTO",name:"Auto-detect",symbol:"\ud83c\udf0d"},{code:"USD",name:"US Dollar",symbol:"$"},{code:"EUR",name:"Euro",symbol:"\u20ac"},{code:"GBP",name:"British Pound",symbol:"\xa3"},{code:"INR",name:"Indian Rupee",symbol:"\u20b9"},{code:"CAD",name:"Canadian Dollar",symbol:"C$"},{code:"AUD",name:"Australian Dollar",symbol:"A$"},{code:"JPY",name:"Japanese Yen",symbol:"\xa5"}],N=[{id:"light",name:"Light Mode",icon:"\u2600\ufe0f"},{id:"dark",name:"Dark Mode",icon:"\ud83c\udf19"},{id:"system",name:"System Default",icon:"\u2699\ufe0f"}],U=({onClose:e})=>{const[t,n]=(0,r.useState)(V),[o,a]=(0,r.useState)(!1),[l,s]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{g()},[]);const g=async()=>{try{const e=await B.getSettings();e&&n(Object.assign({},V,e))}catch(e){console.error("Error loading settings:",e)}},m=(e,o)=>{console.log(`Updating setting ${String(e)} to ${o}`);(async e=>{try{console.log("Saving settings:",e),await B.saveSettings(e),n(e),console.log("Settings saved successfully")}catch(t){console.error("Error saving settings:",t),y.default.alert("Error","Failed to save settings")}})(Object.assign({},t,{[e]:o}))},h=[{id:"chat",name:"Chat Style",icon:"\ud83d\udcac"},{id:"cards",name:"Card Layout",icon:"\ud83c\udccf"},{id:"timeline",name:"Timeline Style",icon:"\u23f0"},{id:"minimal",name:"Minimal Design",icon:"\u2728"}];return(0,D.jsxs)(x.SafeAreaView,{style:$.container,children:[(0,D.jsxs)(c.default,{style:$.header,children:[(0,D.jsx)(i.default,{style:$.headerTitle,children:"Settings"}),(0,D.jsx)(f.default,{onPress:e,style:$.closeButton,children:(0,D.jsx)(i.default,{style:$.closeButtonText,children:"\u2715"})})]}),(0,D.jsxs)(O.default,{style:$.content,children:[(0,D.jsxs)(c.default,{style:$.section,children:[(0,D.jsx)(i.default,{style:$.sectionTitle,children:"Text Input"}),(0,D.jsxs)(c.default,{style:$.settingItem,children:[(0,D.jsxs)(c.default,{style:$.settingInfo,children:[(0,D.jsx)(i.default,{style:$.settingLabel,children:"Enable Markdown"}),(0,D.jsx)(i.default,{style:$.settingDescription,children:"Format text with **bold**, *italic*, and other markdown syntax"})]}),(0,D.jsx)(L.default,{value:t.isMarkdownEnabled,onValueChange:e=>m("isMarkdownEnabled",e)})]}),(0,D.jsxs)(c.default,{style:$.settingItem,children:[(0,D.jsxs)(c.default,{style:$.settingInfo,children:[(0,D.jsx)(i.default,{style:$.settingLabel,children:"Enter to Send"}),(0,D.jsx)(i.default,{style:$.settingDescription,children:"Press Enter to send message (off = Enter adds new line)"})]}),(0,D.jsx)(L.default,{value:t.enterToSend,onValueChange:e=>m("enterToSend",e)})]})]}),(0,D.jsxs)(c.default,{style:$.section,children:[(0,D.jsx)(i.default,{style:$.sectionTitle,children:"Currency"}),(0,D.jsxs)(f.default,{style:$.settingItem,onPress:()=>{console.log("Currency picker tapped"),console.log("Setting showCurrencyModal to true"),a(!0)},children:[(0,D.jsxs)(c.default,{style:$.settingInfo,children:[(0,D.jsx)(i.default,{style:$.settingLabel,children:"Default Currency"}),(0,D.jsx)(i.default,{style:$.settingDescription,children:"Currency for expenses (when not explicitly specified)"}),(0,D.jsx)(i.default,{style:$.settingValue,children:(()=>{const e=F.find(e=>e.code===t.systemCurrency);return e?`${e.symbol} ${e.name}`:"Auto-detect"})()})]}),(0,D.jsx)(i.default,{style:$.arrow,children:"\u203a"})]})]}),(0,D.jsxs)(c.default,{style:$.section,children:[(0,D.jsx)(i.default,{style:$.sectionTitle,children:"Appearance"}),(0,D.jsxs)(f.default,{style:$.settingItem,onPress:()=>{console.log("Theme picker tapped"),u(!0)},children:[(0,D.jsxs)(c.default,{style:$.settingInfo,children:[(0,D.jsx)(i.default,{style:$.settingLabel,children:"Theme"}),(0,D.jsx)(i.default,{style:$.settingDescription,children:"Choose your color theme preference"}),(0,D.jsx)(i.default,{style:$.settingValue,children:(()=>{const e=t.theme||"system",n=N.find(t=>t.id===e);return n?`${n.icon} ${n.name}`:"\u2699\ufe0f System Default"})()})]}),(0,D.jsx)(i.default,{style:$.arrow,children:"\u203a"})]}),(0,D.jsxs)(f.default,{style:$.settingItem,onPress:()=>{console.log("Layout picker tapped"),console.log("Setting showLayoutModal to true"),s(!0)},children:[(0,D.jsxs)(c.default,{style:$.settingInfo,children:[(0,D.jsx)(i.default,{style:$.settingLabel,children:"Journal Layout"}),(0,D.jsx)(i.default,{style:$.settingDescription,children:"Choose how your journal entries are displayed"}),(0,D.jsx)(i.default,{style:$.settingValue,children:(()=>{const e=h.find(e=>e.id===t.layoutStyle);return e?`${e.icon} ${e.name}`:"\ud83d\udcac Chat Style"})()})]}),(0,D.jsx)(i.default,{style:$.arrow,children:"\u203a"})]})]}),(0,D.jsxs)(c.default,{style:$.section,children:[(0,D.jsx)(i.default,{style:$.sectionTitle,children:"Data Management"}),(0,D.jsxs)(f.default,{style:[$.settingItem,$.dangerSettingItem],onPress:async()=>{console.log("handleClearJournal called");if(window.confirm("This will delete all journal entries but keep your expenses and tasks. Continue?"))try{console.log("Clearing journal entries...");const e=await B.getEntries();console.log(`Found ${e.length} entries to clear`),await B.saveEntries([]),console.log("Journal entries cleared successfully"),window.alert("Journal entries cleared. Your expenses and tasks are safe. Please refresh the journal tab.")}catch(e){console.error("Error clearing journal:",e),window.alert("Failed to clear journal entries")}},children:[(0,D.jsxs)(c.default,{style:$.settingInfo,children:[(0,D.jsx)(i.default,{style:[$.settingLabel,$.dangerText],children:"Clear Journal Entries"}),(0,D.jsx)(i.default,{style:$.settingDescription,children:"Delete all journal entries while keeping expenses and tasks"})]}),(0,D.jsx)(i.default,{style:[$.arrow,$.dangerText],children:"\u203a"})]})]}),(0,D.jsxs)(c.default,{style:$.section,children:[(0,D.jsx)(i.default,{style:$.sectionTitle,children:"About"}),(0,D.jsxs)(c.default,{style:$.settingItem,children:[(0,D.jsx)(i.default,{style:$.settingLabel,children:"Daily Tracker"}),(0,D.jsx)(i.default,{style:$.settingDescription,children:"Smart journal with automatic expense and task detection"})]})]})]}),(0,D.jsx)(p.default,{visible:o,animationType:"slide",transparent:!0,onRequestClose:()=>a(!1),children:(0,D.jsx)(c.default,{style:_.overlay,children:(0,D.jsxs)(c.default,{style:_.container,children:[(0,D.jsx)(i.default,{style:_.title,children:"Select Currency"}),(0,D.jsx)(i.default,{style:_.subtitle,children:"Choose your preferred currency:"}),(0,D.jsx)(O.default,{style:_.optionsList,showsVerticalScrollIndicator:!0,children:F.map(e=>(0,D.jsxs)(f.default,{style:[_.option,t.systemCurrency===e.code&&_.selectedOption],onPress:()=>{m("systemCurrency",e.code),a(!1)},children:[(0,D.jsxs)(i.default,{style:[_.optionText,t.systemCurrency===e.code&&_.selectedOptionText],children:[e.symbol," ",e.name]}),t.systemCurrency===e.code&&(0,D.jsx)(i.default,{style:_.checkmark,children:"\u2713"})]},e.code))}),(0,D.jsx)(f.default,{style:_.cancelButton,onPress:()=>a(!1),children:(0,D.jsx)(i.default,{style:_.cancelButtonText,children:"Cancel"})})]})})}),(0,D.jsx)(p.default,{visible:l,animationType:"slide",transparent:!0,onRequestClose:()=>s(!1),children:(0,D.jsx)(c.default,{style:_.overlay,children:(0,D.jsxs)(c.default,{style:_.container,children:[(0,D.jsx)(i.default,{style:_.title,children:"Select Layout Style"}),(0,D.jsx)(i.default,{style:_.subtitle,children:"Choose how your journal entries are displayed:"}),(0,D.jsx)(O.default,{style:_.optionsList,showsVerticalScrollIndicator:!0,children:h.map(e=>(0,D.jsxs)(f.default,{style:[_.option,t.layoutStyle===e.id&&_.selectedOption],onPress:()=>{m("layoutStyle",e.id),s(!1)},children:[(0,D.jsxs)(i.default,{style:[_.optionText,t.layoutStyle===e.id&&_.selectedOptionText],children:[e.icon," ",e.name]}),t.layoutStyle===e.id&&(0,D.jsx)(i.default,{style:_.checkmark,children:"\u2713"})]},e.id))}),(0,D.jsx)(f.default,{style:_.cancelButton,onPress:()=>s(!1),children:(0,D.jsx)(i.default,{style:_.cancelButtonText,children:"Cancel"})})]})})}),(0,D.jsx)(p.default,{visible:d,animationType:"slide",transparent:!0,onRequestClose:()=>u(!1),children:(0,D.jsx)(c.default,{style:_.overlay,children:(0,D.jsxs)(c.default,{style:_.container,children:[(0,D.jsx)(i.default,{style:_.title,children:"Select Theme"}),(0,D.jsx)(i.default,{style:_.subtitle,children:"Choose your preferred color theme:"}),(0,D.jsx)(O.default,{style:_.optionsList,showsVerticalScrollIndicator:!0,children:N.map(e=>{const n=t.theme||"system";return(0,D.jsxs)(f.default,{style:[_.option,n===e.id&&_.selectedOption],onPress:()=>{m("theme",e.id),u(!1)},children:[(0,D.jsxs)(i.default,{style:[_.optionText,n===e.id&&_.selectedOptionText],children:[e.icon," ",e.name]}),n===e.id&&(0,D.jsx)(i.default,{style:_.checkmark,children:"\u2713"})]},e.id)})}),(0,D.jsx)(f.default,{style:_.cancelButton,onPress:()=>u(!1),children:(0,D.jsx)(i.default,{style:_.cancelButtonText,children:"Cancel"})})]})})})]})},$=m.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},headerTitle:{fontSize:20,fontWeight:"bold",color:"#333"},closeButton:{padding:8,borderRadius:20,backgroundColor:"#f0f0f0"},closeButtonText:{fontSize:16,color:"#666",fontWeight:"bold"},content:{flex:1},section:{backgroundColor:"#fff",marginVertical:8,paddingVertical:8},sectionTitle:{fontSize:16,fontWeight:"bold",color:"#333",paddingHorizontal:16,paddingVertical:8,backgroundColor:"#f8f8f8"},settingItem:{flexDirection:"row",alignItems:"center",paddingHorizontal:16,paddingVertical:12,borderBottomWidth:1,borderBottomColor:"#f0f0f0"},settingInfo:{flex:1,marginRight:12},settingLabel:{fontSize:16,color:"#333",marginBottom:4},settingDescription:{fontSize:14,color:"#666",lineHeight:18},settingValue:{fontSize:14,color:"#007AFF",marginTop:4,fontWeight:"500"},arrow:{fontSize:20,color:"#ccc"},dangerSettingItem:{backgroundColor:"#fff0f0"},dangerText:{color:"#d32f2f"}}),_=m.default.create({overlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",paddingHorizontal:20},container:{backgroundColor:"#fff",borderRadius:12,width:"100%",maxWidth:400,minHeight:300,maxHeight:"80%",paddingVertical:20},title:{fontSize:20,fontWeight:"bold",color:"#333",textAlign:"center",marginBottom:8},subtitle:{fontSize:16,color:"#666",textAlign:"center",marginBottom:20,paddingHorizontal:20},optionsList:{flexGrow:1,minHeight:200},option:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:20,paddingVertical:16,borderBottomWidth:1,borderBottomColor:"#f0f0f0",minHeight:50},selectedOption:{backgroundColor:"#e3f2fd"},optionText:{fontSize:16,color:"#333",flex:1},selectedOptionText:{color:"#1976d2",fontWeight:"500"},checkmark:{fontSize:18,color:"#1976d2",fontWeight:"bold"},cancelButton:{marginTop:20,marginHorizontal:20,paddingVertical:12,backgroundColor:"#f5f5f5",borderRadius:8,alignItems:"center"},cancelButtonText:{fontSize:16,color:"#333",fontWeight:"500"}}),J=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),q=()=>{const[e,t]=(0,r.useState)([]),[n,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(!0),[s,d]=(0,r.useState)(0),m=(0,r.useRef)(null),j=(0,r.useRef)(null),C=((0,r.useRef)(!1),(0,r.useRef)(!0),(0,r.useRef)(!1)),[w,S]=(0,r.useState)(!0),[T,k]=(0,r.useState)(!1),[v,I]=(0,r.useState)("chat"),[z,E]=(0,r.useState)(""),[R,M]=(0,r.useState)(!1),[H,L]=(0,r.useState)([]),[O,V]=(0,r.useState)([]),[F,N]=(0,r.useState)([]),[$,_]=(0,r.useState)(!1),[q,X]=(0,r.useState)(!1),[Q,Z]=(0,r.useState)(null),[ee,te]=(0,r.useState)(""),[ne,oe]=(0,r.useState)(""),[re,ie]=(0,r.useState)(""),ae=["spent Rs150 for coffee","bought groceries for $45.50","paid \u20b92500 for electricity bill","lunch cost $12.99","purchased fuel Rs3200","500 for haircut","\u20b9300 for taxi","50 for parking","spent 200 on movie ticket","paid $25 for gym membership","dinner cost Rs850","need to call mom tomorrow","todo: finish the quarterly report","must submit tax documents by Friday","reminder: doctor appointment at 3pm","should book flight tickets",". pick up dry cleaning",". schedule dentist appointment",". buy birthday gift for Sarah",". pay credit card bill","todo: prepare presentation slides","had a great meeting today","weather is lovely","feeling productive this morning","learned something new about React Native","grateful for a good day","enjoyed my morning coffee","finished reading a great book","went for a long walk","cooked a delicious meal","watched an interesting documentary","had a video call with friends","organized my workspace","tried a new recipe today","listened to a great podcast","feeling motivated and energized","completed my daily workout","spent quality time with family","practiced meditation for 20 minutes","wrote in my journal","started learning a new skill","cleaned and organized my room","discovered a new favorite song","made progress on personal project","helped a friend with their work","reflected on my goals","enjoyed the sunset","read an inspiring article","practiced gratitude","had a relaxing evening","played games with friends","explored a new neighborhood","tried a new coffee shop","attended an online webinar","updated my resume","planned next week's schedule","sorted through old photos","donated unused items","fixed a bug in my code","reviewed my budget","called an old friend","planted some herbs","rearranged furniture","learned a new keyboard shortcut","backed up my data","cleaned out my inbox","updated my software","read documentation","wrote unit tests","refactored some code","debugged an issue","improved performance","added new features","reviewed pull requests","attended standup meeting","brainstormed ideas","sketched UI designs","created wireframes","wrote technical specs","researched best practices","optimized database queries","configured CI/CD pipeline","set up monitoring","analyzed metrics","documented API endpoints","reviewed architecture","planned sprint tasks","estimated story points","pair programmed with teammate","conducted code review","deployed to staging","tested new feature","fixed production bug","updated dependencies","wrote blog post","shared knowledge with team","mentored junior developer","attended tech talk","experimented with new library","built proof of concept","improved accessibility","enhanced security","reduced technical debt","improved error handling","added logging","created dashboard","automated workflow","simplified complex logic","improved user experience","gathered user feedback","analyzed usage patterns","identified bottlenecks","proposed solution","implemented caching","optimized bundle size","improved load time","enhanced mobile experience","added dark mode","created design system","standardized components","improved code coverage","fixed flaky tests","upgraded framework version","migrated to new API","cleaned up legacy code","consolidated services","improved modularity","reduced coupling","enhanced maintainability","documented codebase","created runbook"],le=(0,r.useCallback)(async()=>{const e=(await B.getEntries()).sort((e,t)=>{if(Math.abs(e.timestamp.getTime()-t.timestamp.getTime())<2e3){if("system"===e.type&&"system"!==t.type)return 1;if("system"!==e.type&&"system"===t.type)return-1}return e.timestamp.getTime()-t.timestamp.getTime()});t(e),L(e),C.current=!1},[]),se=(0,r.useCallback)(e=>{if(0===e.length)return[];const t=[...e].sort((e,t)=>e.timestamp.getTime()-t.timestamp.getTime()),n=[];let o="";return t.forEach(e=>{const t=(0,b.default)(e.timestamp,"yyyy-MM-dd");t!==o&&(n.push({type:"dateSeparator",date:t,id:`date-${t}`}),o=t),n.push(e)}),n},[]);(0,r.useEffect)(()=>{if(!z.trim())return void L(e);const t=z.toLowerCase().trim(),n=e.filter(e=>{if(e.text.toLowerCase().includes(t))return!0;const n=(0,b.default)(e.timestamp,"yyyy-MM-dd"),o=(0,b.default)(e.timestamp,"MMMM dd, yyyy"),r=(0,b.default)(e.timestamp,"MMM dd");return!!(n.includes(t)||o.toLowerCase().includes(t)||r.toLowerCase().includes(t))||!!e.type.toLowerCase().includes(t)});L(n)},[z,e]);const de=(0,r.useCallback)(async()=>{try{const e=await B.getSettings();e&&(l(e.isMarkdownEnabled),S(e.enterToSend),I(e.layoutStyle||"chat"))}catch(e){console.error("Error loading settings:",e)}},[]),ce=(0,r.useCallback)(async()=>{try{const[e,t]=await Promise.all([B.getExpenses(),B.getActionItems()]);V(e),N(t)}catch(e){console.error("Error loading expenses and action items:",e)}},[]);(0,r.useEffect)(()=>{le(),de(),ce()},[le,de,ce]);const ue=e=>{alert(e)},fe=async()=>{const e=n.trim();if(e)try{let t=e;const n=A.detectActionItem(e);(n||q)&&(t=e.replace(/^\s*\.\s*/,"\u2705 "));const r={id:J(),text:t,timestamp:new Date,type:"log",isMarkdown:a};await B.addEntry(r);const i=A.detectExpense(e);if(i||$){const t=A.extractExpenseInfo(e,r.id);t?(t.autoDetected=i&&!$,await B.addExpense(t),await be(r.id,"expense")):$&&y.default.alert("No Amount Found","Please include a numeric amount in your entry (e.g., 150, Rs200, $50)")}if(n||q){let t;q&&!n?t={id:J(),entryId:r.id,title:e,completed:!1,createdAt:new Date,autoDetected:!1}:(t=A.extractActionItem(e,r.id),t&&(t.autoDetected=n&&!q)),t&&(await B.addActionItem(t),await be(r.id,"action"))}if(await le(),await ce(),"chat"===v){let e="",t=!1,n=!1;const o=await B.getExpenses().then(e=>e.find(e=>e.entryId===r.id));if(o){t=!0;e=`\ud83d\udcb0 ${o.autoDetected?"Auto-categorized":"Manually categorized"} as Expense: ${A.formatCurrency(o.amount,o.currency)}`,o.category&&(e+=` (${o.category})`)}if(!t){const t=await B.getActionItems().then(e=>e.find(e=>e.entryId===r.id));if(t){n=!0;e=`\u2705 ${t.autoDetected?"Auto-categorized":"Manually categorized"} as Task: ${t.title}`}}if(t||n||(e="\u2713 Got it!"),e){const t={id:J(),text:e,timestamp:new Date(Date.now()+100),type:"system",isMarkdown:!1};await B.addEntry(t),await le()}}o(""),_(!1),X(!1),setTimeout(()=>{m.current?.scrollToOffset({offset:0,animated:!0})},100),setTimeout(()=>{j.current&&j.current.focus()},150)}catch(t){console.error("Error processing message:",t),ue("Failed to process message")}},ge=e=>{const t=[{text:"Edit Entry",onPress:()=>xe(e)}];"expense"!==e.type&&t.push({text:"Mark as Expense",onPress:()=>me(e)}),"action"!==e.type&&t.push({text:"Mark as Action Item",onPress:()=>ye(e)}),"log"!==e.type&&t.push({text:"Remove Category",onPress:()=>he(e)}),t.push({text:"Delete Entry",onPress:()=>pe(e),style:"destructive"},{text:"Cancel",style:"cancel"}),y.default.alert("Entry Options","What would you like to do with this entry?",t)},me=async e=>{if("expense"===e.type)return;const t=A.extractExpenseInfo(e.text,e.id);t?(t.autoDetected=!1,await B.addExpense(t),await be(e.id,"expense"),await ce()):y.default.alert("Cannot Extract Expense","Could not find amount information in this entry. Please ensure it contains a monetary value.")},ye=async e=>{if("action"===e.type)return;let t=A.extractActionItem(e.text,e.id);t?t.autoDetected=!1:t={id:J(),entryId:e.id,title:e.text.replace(/^\u2705\s*/,""),completed:!1,createdAt:new Date,autoDetected:!1},await B.addActionItem(t),await be(e.id,"action"),await ce()},he=async e=>{try{if("expense"===e.type){const t=O.find(t=>t.entryId===e.id);t&&await B.deleteExpense(t.id)}else if("action"===e.type){const t=F.find(t=>t.entryId===e.id);t&&await B.deleteActionItem(t.id)}await be(e.id,"log"),await ce(),ue("Category removed")}catch(t){console.error("Error removing category:",t),ue("Failed to remove category")}},pe=async e=>{confirm("Are you sure you want to delete this entry?")&&await(async()=>{try{if("expense"===e.type){const t=O.find(t=>t.entryId===e.id);t&&await B.deleteExpense(t.id)}else if("action"===e.type){const t=F.find(t=>t.entryId===e.id);t&&await B.deleteActionItem(t.id)}const t=(await B.getEntries()).filter(t=>t.id!==e.id);await B.saveEntries(t),await le(),await ce()}catch(t){console.error("Error deleting entry:",t)}})()},xe=e=>{if(Z(e),te(e.text.replace(/^\u2705\s*/,"")),"expense"===e.type){const t=O.find(t=>t.entryId===e.id);t&&(oe(t.amount.toString()),ie(t.category||""))}},be=async(e,t)=>{try{const n=(await B.getEntries()).map(n=>n.id===e?Object.assign({},n,{type:t}):n);await B.saveEntries(n),await le()}catch(n){console.error("Error updating entry type:",n),ue("Failed to update entry type")}};return(0,D.jsxs)(x.SafeAreaView,{style:Y.container,children:[(0,D.jsxs)(c.default,{style:[Y.header,{zIndex:1e4}],children:[(0,D.jsx)(i.default,{style:Y.headerTitle,children:"Daily Journal"}),(0,D.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center",zIndex:10001},children:[(0,D.jsx)(f.default,{style:[Y.settingsButton,{marginRight:8,zIndex:10004}],onPress:()=>{s>=ae.length&&d(0),o(ae[s]),d(s+1)},children:(0,D.jsx)(i.default,{style:Y.settingsButtonText,children:"\ud83e\uddea"})}),(0,D.jsx)(f.default,{style:[Y.settingsButton,{marginRight:8,zIndex:10002}],onPress:()=>{M(!R)},children:(0,D.jsx)(i.default,{style:Y.settingsButtonText,children:"\ud83d\udd0d"})}),(0,D.jsx)(f.default,{style:[Y.settingsButton,{zIndex:10003}],onPress:()=>{k(!0)},children:(0,D.jsx)(i.default,{style:Y.settingsButtonText,children:"\u2699\ufe0f"})})]})]}),R&&(0,D.jsxs)(c.default,{style:Y.searchContainer,children:[(0,D.jsx)(u.default,{style:Y.searchInput,placeholder:"Search entries by text, date, or type...",value:z,onChangeText:E,autoCapitalize:"none",clearButtonMode:"while-editing"}),z.length>0&&(0,D.jsx)(f.default,{style:Y.clearButton,onPress:()=>E(""),children:(0,D.jsx)(i.default,{style:Y.clearButtonText,children:"\u2715"})})]}),(0,D.jsx)(g.default,{ref:m,data:se(R?H:e).reverse(),renderItem:({item:e})=>{if("type"in e&&"dateSeparator"===e.type)return(e=>{const t=new Date(e),n=new Date,o=new Date(n.getTime()-864e5);let r;return r=(0,b.default)(t,"yyyy-MM-dd")===(0,b.default)(n,"yyyy-MM-dd")?"Today":(0,b.default)(t,"yyyy-MM-dd")===(0,b.default)(o,"yyyy-MM-dd")?"Yesterday":(0,b.default)(t,"EEEE, MMMM d, yyyy"),(0,D.jsxs)(c.default,{style:Y.dateSeparator,children:[(0,D.jsx)(c.default,{style:Y.dateSeparatorLine}),(0,D.jsx)(i.default,{style:Y.dateSeparatorText,children:r}),(0,D.jsx)(c.default,{style:Y.dateSeparatorLine})]})})(e.date);const t=e,n="expense"===t.type?O.find(e=>e.entryId===t.id):void 0,o="action"===t.type?F.find(e=>e.entryId===t.id):void 0;switch(v){case"cards":return((e,t,n)=>(0,D.jsx)(c.default,{style:G.cardContainer,children:(0,D.jsx)(W,{entry:e,onLongPress:ge,onEdit:xe,onDelete:pe,markdownStyles:K,expense:t,actionItem:n})}))(t,n,o);case"list":return((e,t,n)=>(0,D.jsx)(c.default,{style:G.listContainer,children:(0,D.jsx)(W,{entry:e,onLongPress:ge,onEdit:xe,onDelete:pe,markdownStyles:K,expense:t,actionItem:n})}))(t,n,o);case"timeline":return((e,t,n)=>(0,D.jsxs)(c.default,{style:G.timelineContainer,children:[(0,D.jsxs)(c.default,{style:G.timelineLeft,children:[(0,D.jsx)(c.default,{style:G.timelineDot}),(0,D.jsx)(c.default,{style:G.timelineLine})]}),(0,D.jsx)(c.default,{style:G.timelineContent,children:(0,D.jsx)(W,{entry:e,onLongPress:ge,onEdit:xe,onDelete:pe,markdownStyles:K,expense:t,actionItem:n})})]}))(t,n,o);case"magazine":return((e,t,n)=>(0,D.jsx)(c.default,{style:G.magazineContainer,children:(0,D.jsx)(W,{entry:e,onLongPress:ge,onEdit:xe,onDelete:pe,markdownStyles:K,expense:t,actionItem:n})}))(t,n,o);case"minimal":return"system"===t.type?null:((e,t,n)=>(0,D.jsx)(P,{item:e,expense:t,actionItem:n,onEdit:xe,onDelete:pe,markdownStyles:K,layoutStyles:G}))(t,n,o);default:return((e,t,n)=>(0,D.jsx)(W,{entry:e,onLongPress:ge,onEdit:xe,onDelete:pe,markdownStyles:K,expense:t,actionItem:n}))(t,n,o)}},keyExtractor:e=>("type"in e&&e.type,e.id),style:[Y.messagesList,(e=>{switch(e){case"cards":return{paddingHorizontal:8};case"list":case"minimal":return{paddingHorizontal:0,backgroundColor:"#fff"};case"timeline":return{paddingHorizontal:0,backgroundColor:"#f8f9fa"};case"magazine":return{paddingHorizontal:0,backgroundColor:"#f5f5f5"};default:return{paddingHorizontal:16}}})(v)],showsVerticalScrollIndicator:!1,inverted:!0,maintainVisibleContentPosition:{minIndexForVisible:0},ListEmptyComponent:()=>{R?H.length:e.length;const t=R&&z.trim()?`No entries found matching "${z}"`:"No messages yet. Type a message below to get started!";return(0,D.jsx)(c.default,{style:{padding:20,alignItems:"center"},children:(0,D.jsx)(i.default,{style:{color:"#666",fontSize:16},children:t})})}}),(0,D.jsxs)(h.default,{behavior:"height",style:[Y.inputContainer,{zIndex:1e4}],children:[(0,D.jsxs)(c.default,{style:Y.quickActionsRow,children:[(0,D.jsx)(f.default,{style:[Y.quickActionButton,$&&Y.quickActionButtonActive],onPress:()=>{_(!$),$||X(!1)},children:(0,D.jsx)(i.default,{style:[Y.quickActionText,$&&Y.quickActionTextActive],children:"\ud83d\udcb0"})}),(0,D.jsx)(f.default,{style:[Y.quickActionButton,q&&Y.quickActionButtonActive],onPress:()=>{X(!q),q||_(!1)},children:(0,D.jsx)(i.default,{style:[Y.quickActionText,q&&Y.quickActionTextActive],children:"\u2705"})})]}),(0,D.jsxs)(c.default,{style:Y.inputRow,children:[(0,D.jsx)(u.default,{ref:j,style:Y.textInput,value:n,onChangeText:o,placeholder:$?"Type expense (e.g., 150 for coffee)...":q?"Type task description...":a?"Type a message (Markdown supported)...":"Type a message...",multiline:!0,maxLength:1e3,onSubmitEditing:w?fe:void 0,blurOnSubmit:w,returnKeyType:w?"send":"default"}),(0,D.jsx)(f.default,{style:[Y.sendButton,!n.trim()&&Y.sendButtonDisabled],onPress:fe,disabled:!n.trim(),children:(0,D.jsx)(i.default,{style:{color:"#fff",fontSize:16},children:"\u2192"})})]})]}),T&&(0,D.jsx)(p.default,{visible:T,animationType:"slide",presentationStyle:"formSheet",children:(0,D.jsx)(U,{onClose:()=>{k(!1),de()}})}),Q&&(0,D.jsx)(p.default,{visible:!!Q,animationType:"slide",transparent:!0,onRequestClose:()=>Z(null),children:(0,D.jsx)(c.default,{style:Y.editModalOverlay,children:(0,D.jsxs)(c.default,{style:Y.editModalContent,children:[(0,D.jsx)(i.default,{style:Y.editModalTitle,children:"Edit Entry"}),(0,D.jsx)(i.default,{style:Y.editLabel,children:"Text:"}),(0,D.jsx)(c.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:8},children:(0,D.jsx)(f.default,{style:[Y.markdownToggle,Q.isMarkdown&&Y.markdownToggleActive],onPress:()=>Z(Object.assign({},Q,{isMarkdown:!Q.isMarkdown})),children:(0,D.jsx)(i.default,{style:Y.markdownToggleText,children:Q.isMarkdown?"\u2705 Markdown":"\u274c Plain Text"})})}),(0,D.jsx)(u.default,{style:Y.editTextInput,value:ee,onChangeText:te,placeholder:"Entry text",multiline:!0,maxLength:1e3}),(0,D.jsx)(i.default,{style:Y.editLabel,children:"Category:"}),(0,D.jsxs)(c.default,{style:Y.categoryButtons,children:[(0,D.jsx)(f.default,{style:[Y.categoryButton,"log"===Q.type&&Y.categoryButtonActive],onPress:async()=>{"log"!==Q.type&&(await he(Q),Z(Object.assign({},Q,{type:"log"})))},children:(0,D.jsx)(i.default,{style:Y.categoryButtonText,children:"\ud83d\udcdd Log"})}),(0,D.jsx)(f.default,{style:[Y.categoryButton,"expense"===Q.type&&Y.categoryButtonActive],onPress:async()=>{if("expense"!==Q.type){"action"===Q.type&&await he(Q);const e=A.extractExpenseInfo(ee,Q.id);e?(oe(e.amount.toString()),ie(e.category||"")):(oe(""),ie("")),Z(Object.assign({},Q,{type:"expense"}))}},children:(0,D.jsx)(i.default,{style:Y.categoryButtonText,children:"\ud83d\udcb0 Expense"})}),(0,D.jsx)(f.default,{style:[Y.categoryButton,"action"===Q.type&&Y.categoryButtonActive],onPress:async()=>{"action"!==Q.type&&("expense"===Q.type&&(await he(Q),oe(""),ie("")),Z(Object.assign({},Q,{type:"action"})))},children:(0,D.jsx)(i.default,{style:Y.categoryButtonText,children:"\u2705 Task"})})]}),"expense"===Q.type&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(i.default,{style:Y.editLabel,children:"Amount:"}),(0,D.jsx)(u.default,{style:Y.editInput,value:ne,onChangeText:oe,placeholder:"Enter amount",keyboardType:"decimal-pad"}),(0,D.jsx)(i.default,{style:Y.editLabel,children:"Category (optional):"}),(0,D.jsx)(u.default,{style:Y.editInput,value:re,onChangeText:ie,placeholder:"Food, Transportation, etc."})]}),(0,D.jsxs)(c.default,{style:Y.editModalButtons,children:[(0,D.jsx)(f.default,{style:[Y.editModalButton,Y.editModalButtonCancel],onPress:()=>{Z(null),te(""),oe(""),ie("")},children:(0,D.jsx)(i.default,{style:Y.editModalButtonText,children:"Cancel"})}),(0,D.jsx)(f.default,{style:[Y.editModalButton,Y.editModalButtonSave],onPress:async()=>{if(Q&&ee.trim()){if("expense"===Q.type){if(!ne||!ne.trim())return void y.default.alert("Amount Required","Please enter an amount for the expense");const e=parseFloat(ne);if(isNaN(e)||e<=0)return void y.default.alert("Invalid Amount","Please enter a valid amount greater than 0")}try{const e=(await B.getEntries()).map(e=>e.id===Q.id?Object.assign({},e,{text:ee.trim(),type:Q.type,isMarkdown:Q.isMarkdown}):e);if(await B.saveEntries(e),"expense"===Q.type){const e=O.find(e=>e.entryId===Q.id);if(e&&ne){const t=parseFloat(ne);!isNaN(t)&&t>0&&await B.updateExpense(e.id,{amount:t,category:re||e.category,description:ee.trim()})}}if("action"===Q.type){let e=F.find(e=>e.entryId===Q.id);if(e)await B.updateActionItem(e.id,{title:ee.trim()});else{const e={id:J(),entryId:Q.id,title:ee.trim(),completed:!1,createdAt:new Date,autoDetected:!1};await B.addActionItem(e)}}await le(),await ce(),Z(null),te(""),oe(""),ie("")}catch(e){console.error("Error updating entry:",e)}}},children:(0,D.jsx)(i.default,{style:[Y.editModalButtonText,{color:"#fff"}],children:"Save"})})]})]})})})]})},Y=m.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:12,paddingVertical:8,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},headerTitle:{fontSize:20,fontWeight:"bold",color:"#333"},searchContainer:{flexDirection:"row",alignItems:"center",paddingHorizontal:16,paddingVertical:8,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},searchInput:{flex:1,height:36,paddingHorizontal:12,backgroundColor:"#f8f8f8",borderRadius:18,fontSize:16,color:"#333"},clearButton:{marginLeft:8,width:24,height:24,borderRadius:12,backgroundColor:"#ccc",alignItems:"center",justifyContent:"center"},clearButtonText:{fontSize:12,color:"#666",fontWeight:"bold"},settingsButton:{paddingHorizontal:8,paddingVertical:6,borderRadius:16,backgroundColor:"#f0f0f0",marginLeft:8},settingsButtonText:{fontSize:16},messagesList:{flex:1,paddingHorizontal:8,paddingVertical:4},inputContainer:{paddingHorizontal:8,paddingVertical:4,paddingBottom:4,backgroundColor:"#fff",borderTopWidth:1,borderTopColor:"#e0e0e0"},quickActionsRow:{flexDirection:"row",marginBottom:4,gap:4},quickActionButton:{paddingHorizontal:10,paddingVertical:4,borderRadius:16,backgroundColor:"#f0f0f0",borderWidth:2,borderColor:"#e0e0e0"},quickActionButtonActive:{backgroundColor:"#007AFF",borderColor:"#0056b3"},quickActionText:{fontSize:18},quickActionTextActive:{transform:[{scale:1.1}]},inputRow:{flexDirection:"row",alignItems:"flex-end"},textInput:{flex:1,borderWidth:1,borderColor:"#e0e0e0",borderRadius:20,paddingHorizontal:16,paddingVertical:12,marginRight:12,maxHeight:100,fontSize:16,backgroundColor:"#f8f8f8"},sendButton:{backgroundColor:"#007AFF",width:44,height:44,borderRadius:22,justifyContent:"center",alignItems:"center"},sendButtonDisabled:{backgroundColor:"#ccc"},editModalOverlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",padding:20},editModalContent:{backgroundColor:"#fff",borderRadius:12,padding:20,width:"100%",maxWidth:500},editModalTitle:{fontSize:20,fontWeight:"bold",marginBottom:16,color:"#333"},editLabel:{fontSize:14,fontWeight:"600",color:"#666",marginTop:12,marginBottom:6},editInput:{borderWidth:1,borderColor:"#ddd",borderRadius:8,padding:12,fontSize:16,backgroundColor:"#f9f9f9"},editTextInput:{borderWidth:1,borderColor:"#ddd",borderRadius:8,padding:12,fontSize:16,backgroundColor:"#f9f9f9",minHeight:80,maxHeight:200,textAlignVertical:"top"},editModalButtons:{flexDirection:"row",justifyContent:"flex-end",marginTop:20,gap:12},editModalButton:{paddingHorizontal:20,paddingVertical:10,borderRadius:8,minWidth:80,alignItems:"center"},editModalButtonCancel:{backgroundColor:"#f0f0f0"},editModalButtonSave:{backgroundColor:"#007AFF"},editModalButtonText:{fontSize:16,fontWeight:"600",color:"#333"},categoryButtons:{flexDirection:"row",gap:8,marginBottom:12},categoryButton:{flex:1,paddingVertical:8,paddingHorizontal:12,borderRadius:8,backgroundColor:"#f0f0f0",borderWidth:2,borderColor:"#e0e0e0",alignItems:"center"},categoryButtonActive:{backgroundColor:"#007AFF",borderColor:"#0056b3"},categoryButtonText:{fontSize:14,fontWeight:"600",color:"#333"},markdownToggle:{paddingVertical:6,paddingHorizontal:12,borderRadius:6,backgroundColor:"#f0f0f0",borderWidth:1,borderColor:"#e0e0e0"},markdownToggleActive:{backgroundColor:"#e8f5e8",borderColor:"#4caf50"},markdownToggleText:{fontSize:12,fontWeight:"600",color:"#333"},dateSeparator:{flexDirection:"row",alignItems:"center",marginVertical:16,paddingHorizontal:8},dateSeparatorLine:{flex:1,height:1,backgroundColor:"#e0e0e0"},dateSeparatorText:{marginHorizontal:12,fontSize:14,fontWeight:"600",color:"#666",backgroundColor:"#f5f5f5",paddingHorizontal:8,paddingVertical:4,borderRadius:12}}),G=m.default.create({cardContainer:{backgroundColor:"#fff",borderRadius:12,marginVertical:6,marginHorizontal:8,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3,overflow:"hidden"},cardHeader:{flexDirection:"row",justifyContent:"space-between",paddingHorizontal:16,paddingVertical:8,backgroundColor:"#f8f9fa",borderBottomWidth:1,borderBottomColor:"#e9ecef"},cardDate:{fontSize:14,fontWeight:"600",color:"#495057"},cardTime:{fontSize:12,color:"#6c757d"},cardContent:{padding:16},cardText:{fontSize:16,lineHeight:22,color:"#212529",marginBottom:8},expenseTag:{backgroundColor:"#d4edda",borderRadius:12,paddingHorizontal:8,paddingVertical:4,alignSelf:"flex-start",marginTop:8},expenseText:{fontSize:12,color:"#155724",fontWeight:"500"},actionTag:{backgroundColor:"#cce5ff",borderRadius:12,paddingHorizontal:8,paddingVertical:4,alignSelf:"flex-start",marginTop:8},actionText:{fontSize:12,color:"#004085",fontWeight:"500"},listContainer:{flexDirection:"row",paddingVertical:12,paddingHorizontal:16,borderBottomWidth:1,borderBottomColor:"#e9ecef"},listLeft:{alignItems:"center",marginRight:16,width:60},listTime:{fontSize:12,color:"#6c757d",fontWeight:"500",marginBottom:4},listIndicator:{width:8,height:8,borderRadius:4,backgroundColor:"#007bff"},listContent:{flex:1},listText:{fontSize:16,lineHeight:22,color:"#212529",marginBottom:6},listMeta:{flexDirection:"row",gap:12},listExpense:{fontSize:12,color:"#28a745",fontWeight:"500"},listAction:{fontSize:12,color:"#007bff",fontWeight:"500"},timelineContainer:{flexDirection:"row",paddingVertical:16,paddingHorizontal:16},timelineLeft:{alignItems:"center",marginRight:16,width:20},timelineDot:{width:12,height:12,borderRadius:6,backgroundColor:"#007bff",zIndex:1},timelineLine:{width:2,flex:1,backgroundColor:"#dee2e6",marginTop:4},timelineContent:{flex:1,backgroundColor:"#fff",borderRadius:8,padding:16,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.05,shadowRadius:2,elevation:1},timelineDate:{fontSize:12,color:"#6c757d",fontWeight:"500",marginBottom:8},timelineText:{fontSize:16,lineHeight:22,color:"#212529"},timelineTags:{flexDirection:"row",marginTop:12,gap:8},timelineExpense:{fontSize:12,color:"#28a745",backgroundColor:"#d4edda",paddingHorizontal:8,paddingVertical:2,borderRadius:8},timelineAction:{fontSize:12,color:"#007bff",backgroundColor:"#cce5ff",paddingHorizontal:8,paddingVertical:2,borderRadius:8},magazineContainer:{backgroundColor:"#fff",marginVertical:8,marginHorizontal:16,borderRadius:8,overflow:"hidden",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},magazineHeader:{backgroundColor:"#343a40",paddingHorizontal:20,paddingVertical:12},magazineDate:{fontSize:14,color:"#fff",fontWeight:"600",textTransform:"uppercase",letterSpacing:.5},magazineBody:{paddingHorizontal:20,paddingVertical:16},magazineText:{fontSize:17,lineHeight:26,color:"#212529",fontFamily:"serif"},magazineFooter:{flexDirection:"row",paddingHorizontal:20,paddingBottom:16,gap:16},magazineExpenseBlock:{flex:1},magazineExpenseLabel:{fontSize:10,color:"#6c757d",fontWeight:"600",textTransform:"uppercase",marginBottom:2},magazineExpenseAmount:{fontSize:16,color:"#28a745",fontWeight:"600"},magazineActionBlock:{flex:1},magazineActionLabel:{fontSize:10,color:"#6c757d",fontWeight:"600",textTransform:"uppercase",marginBottom:2},magazineActionText:{fontSize:16,color:"#007bff",fontWeight:"600"},minimalContainer:{flexDirection:"row",paddingVertical:0,paddingHorizontal:20,alignItems:"center",justifyContent:"space-between"},minimalContent:{flex:1,marginRight:16,flexDirection:"row",alignItems:"center"},minimalText:{fontSize:16,color:"#212529",flex:1},minimalMeta:{flexDirection:"row",alignItems:"center",gap:6,flexShrink:0},minimalTime:{fontSize:12,color:"#9ca3af"},minimalExpense:{fontSize:12,color:"#28a745"},minimalAction:{fontSize:12,color:"#007bff"}}),K=m.default.create({body:{fontSize:16,color:"#333",lineHeight:20},heading1:{fontSize:20,fontWeight:"bold",marginBottom:8},heading2:{fontSize:18,fontWeight:"bold",marginBottom:6},strong:{fontWeight:"bold"},em:{fontStyle:"italic"},code_inline:{backgroundColor:"#f0f0f0",paddingHorizontal:4,paddingVertical:2,borderRadius:3,fontFamily:"monospace"}});var X=n(9320),Q=n(1862);const Z=({item:e,onToggleComplete:t,onEdit:n,onDelete:o})=>(0,D.jsxs)(c.default,{style:[ne.itemCard,e.completed&&ne.completedCard],children:[(0,D.jsxs)(f.default,{style:ne.itemHeader,onPress:()=>t(e.id),activeOpacity:.7,children:[(0,D.jsx)(X.default,{name:e.completed?"checkbox":"checkbox-outline",size:24,color:e.completed?"#4caf50":"#666"}),(0,D.jsx)(c.default,{style:{flex:1,marginLeft:8},children:(0,D.jsx)(z.default,{style:{body:{fontSize:16,color:e.completed?"#999":"#333",textDecorationLine:e.completed?"line-through":"none"}},children:e.title})})]}),e.description&&e.description!==e.title&&(0,D.jsx)(i.default,{style:[ne.itemDescription,e.completed&&ne.completedText],children:e.description}),(0,D.jsxs)(c.default,{style:ne.itemFooter,children:[(0,D.jsxs)(i.default,{style:ne.itemDate,children:["Created: ",(0,b.default)(e.createdAt,"MMM d, yyyy HH:mm")]}),(0,D.jsxs)(c.default,{style:ne.itemActions,children:[(0,D.jsx)(f.default,{style:ne.actionButton,onPress:()=>n(e),activeOpacity:.7,hitSlop:{top:15,bottom:15,left:15,right:15},children:(0,D.jsx)(X.default,{name:"pencil",size:18,color:"#666"})}),(0,D.jsx)(f.default,{style:[ne.actionButton,ne.deleteButton],onPress:()=>o(e.id),activeOpacity:.7,hitSlop:{top:15,bottom:15,left:15,right:15},children:(0,D.jsx)(X.default,{name:"trash",size:18,color:"#fff"})})]})]})]}),ee=({visible:e,item:t,onSave:n,onCancel:o})=>{const[a,l]=(0,r.useState)(""),[s,d]=(0,r.useState)("");(0,r.useEffect)(()=>{t&&(l(t.title),d(t.description||""))},[t]);return(0,D.jsx)(p.default,{visible:e,animationType:"slide",transparent:!0,children:(0,D.jsx)(c.default,{style:ne.modalContainer,children:(0,D.jsxs)(c.default,{style:ne.modalContent,children:[(0,D.jsx)(i.default,{style:ne.modalTitle,children:"Edit Action Item"}),(0,D.jsx)(u.default,{style:ne.modalInput,value:a,onChangeText:l,placeholder:"Title",multiline:!0}),(0,D.jsx)(u.default,{style:[ne.modalInput,ne.modalInputLarge],value:s,onChangeText:d,placeholder:"Description (optional)",multiline:!0}),(0,D.jsxs)(c.default,{style:ne.modalButtons,children:[(0,D.jsx)(f.default,{style:ne.modalButton,onPress:o,children:(0,D.jsx)(i.default,{style:ne.modalButtonText,children:"Cancel"})}),(0,D.jsx)(f.default,{style:[ne.modalButton,ne.modalButtonPrimary],onPress:()=>{if(!t||!a.trim())return;const e=Object.assign({},t,{title:a.trim(),description:s.trim()});n(e)},children:(0,D.jsx)(i.default,{style:[ne.modalButtonText,ne.modalButtonTextPrimary],children:"Save"})})]})]})})})},te=()=>{const[e,t]=(0,r.useState)([]),[n,o]=(0,r.useState)("all"),[a,l]=(0,r.useState)(null),[s,d]=(0,r.useState)(!1),u=(0,r.useCallback)(async()=>{const e=await B.getActionItems();t(e.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()))},[]);(0,r.useEffect)(()=>{u()},[u]),(0,Q.useFocusEffect)((0,r.useCallback)(()=>{u()},[u]));const m=e.filter(e=>{switch(n){case"pending":return!e.completed;case"completed":return e.completed;default:return!0}}),y=async n=>{const o=e.find(e=>e.id===n);if(!o)return;const r=Object.assign({},o,{completed:!o.completed});await B.updateActionItem(n,{completed:!o.completed}),t(e=>e.map(e=>e.id===n?r:e))},h=e=>{l(e),d(!0)},p=async e=>{if("undefined"===typeof window||window.confirm("Are you sure you want to delete this action item?"))try{await B.deleteActionItem(e),t(t=>t.filter(t=>t.id!==e))}catch(n){console.error("Error deleting action item:",n)}},b=e=>[ne.filterButton,n===e&&ne.filterButtonActive],j=e=>[ne.filterButtonText,n===e&&ne.filterButtonTextActive],C=e.filter(e=>!e.completed).length,w=e.filter(e=>e.completed).length;return(0,D.jsxs)(x.SafeAreaView,{style:ne.container,children:[(0,D.jsxs)(c.default,{style:ne.header,children:[(0,D.jsx)(i.default,{style:ne.headerTitle,children:"Action Items"}),(0,D.jsx)(c.default,{style:ne.stats,children:(0,D.jsxs)(i.default,{style:ne.statsText,children:[C," pending \u2022 ",w," completed"]})})]}),(0,D.jsxs)(c.default,{style:ne.filterContainer,children:[(0,D.jsx)(f.default,{style:b("all"),onPress:()=>o("all"),children:(0,D.jsx)(i.default,{style:j("all"),children:"All"})}),(0,D.jsx)(f.default,{style:b("pending"),onPress:()=>o("pending"),children:(0,D.jsx)(i.default,{style:j("pending"),children:"Pending"})}),(0,D.jsx)(f.default,{style:b("completed"),onPress:()=>o("completed"),children:(0,D.jsx)(i.default,{style:j("completed"),children:"Completed"})})]}),0===m.length?(0,D.jsxs)(c.default,{style:ne.emptyContainer,children:[(0,D.jsx)(X.default,{name:"checkbox-outline",size:64,color:"#ccc"}),(0,D.jsx)(i.default,{style:ne.emptyText,children:"all"===n?"No action items yet":"pending"===n?"No pending action items":"No completed action items"}),(0,D.jsx)(i.default,{style:ne.emptySubtext,children:"Add entries in your journal to create action items"})]}):(0,D.jsx)(g.default,{data:m,renderItem:({item:e})=>(0,D.jsx)(Z,{item:e,onToggleComplete:y,onEdit:h,onDelete:p}),keyExtractor:e=>e.id,style:ne.list,showsVerticalScrollIndicator:!1}),(0,D.jsx)(ee,{visible:s,item:a,onSave:async e=>{await B.updateActionItem(e.id,{title:e.title,description:e.description}),t(t=>t.map(t=>t.id===e.id?e:t)),d(!1),l(null)},onCancel:()=>{d(!1),l(null)}})]})},ne=m.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},header:{paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},headerTitle:{fontSize:20,fontWeight:"bold",color:"#333",marginBottom:4},stats:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},statsText:{fontSize:14,color:"#666"},filterContainer:{flexDirection:"row",paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},filterButton:{paddingHorizontal:16,paddingVertical:8,marginRight:8,borderRadius:20,backgroundColor:"#f0f0f0"},filterButtonActive:{backgroundColor:"#007AFF"},filterButtonText:{fontSize:14,color:"#666",fontWeight:"500"},filterButtonTextActive:{color:"#fff"},list:{flex:1,paddingHorizontal:16},itemCard:{backgroundColor:"#fff",marginVertical:6,padding:16,borderRadius:12,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},completedCard:{backgroundColor:"#f8f8f8",opacity:.8},itemHeader:{flexDirection:"row",alignItems:"flex-start",marginBottom:8},itemTitle:{flex:1,fontSize:16,fontWeight:"600",color:"#333",marginLeft:12,lineHeight:20},completedText:{textDecorationLine:"line-through",color:"#666"},itemDescription:{fontSize:14,color:"#666",lineHeight:18,marginBottom:12,marginLeft:36},itemFooter:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:8},itemDate:{fontSize:12,color:"#999"},itemActions:{flexDirection:"row"},actionButton:{padding:10,marginLeft:8,minWidth:36,minHeight:36,alignItems:"center",justifyContent:"center",borderRadius:6,backgroundColor:"rgba(0,0,0,0.05)",borderWidth:1,borderColor:"rgba(0,0,0,0.1)"},deleteButton:{backgroundColor:"#f44336",borderColor:"#d32f2f"},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",paddingHorizontal:40},emptyText:{fontSize:18,fontWeight:"600",color:"#666",marginTop:16,textAlign:"center"},emptySubtext:{fontSize:14,color:"#999",marginTop:8,textAlign:"center",lineHeight:20},modalContainer:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"#fff",borderRadius:12,padding:20,width:"90%",maxWidth:400},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:16,textAlign:"center"},modalInput:{borderWidth:1,borderColor:"#e0e0e0",borderRadius:8,padding:12,marginBottom:12,fontSize:16,minHeight:44},modalInputLarge:{minHeight:80,textAlignVertical:"top"},modalButtons:{flexDirection:"row",justifyContent:"space-between",marginTop:16},modalButton:{flex:1,paddingVertical:12,borderRadius:8,marginHorizontal:4,backgroundColor:"#f0f0f0"},modalButtonPrimary:{backgroundColor:"#007AFF"},modalButtonText:{textAlign:"center",fontSize:16,fontWeight:"600",color:"#333"},modalButtonTextPrimary:{color:"#fff"}});var oe=n(7832),re=n(3815),ie=n(8327);const ae=({expense:e,onEdit:t,onDelete:n})=>(0,D.jsxs)(c.default,{style:de.expenseCard,children:[(0,D.jsxs)(c.default,{style:de.expenseHeader,children:[(0,D.jsxs)(c.default,{style:de.expenseAmount,children:[(0,D.jsx)(i.default,{style:de.amountText,children:A.formatCurrency(e.amount,e.currency)}),e.category&&(0,D.jsx)(i.default,{style:de.categoryText,children:e.category})]}),(0,D.jsxs)(c.default,{style:de.expenseActions,children:[(0,D.jsx)(f.default,{style:de.actionButton,onPress:()=>t(e),activeOpacity:.7,hitSlop:{top:15,bottom:15,left:15,right:15},children:(0,D.jsx)(X.default,{name:"pencil",size:18,color:"#666"})}),(0,D.jsx)(f.default,{style:[de.actionButton,de.deleteButton],onPress:()=>n(e.id),activeOpacity:.7,hitSlop:{top:15,bottom:15,left:15,right:15},children:(0,D.jsx)(X.default,{name:"trash",size:18,color:"#fff"})})]})]}),(0,D.jsx)(i.default,{style:de.expenseDescription,numberOfLines:2,children:e.description}),(0,D.jsx)(i.default,{style:de.expenseDate,children:(0,b.default)(e.createdAt,"MMM d, yyyy HH:mm")})]}),le=({visible:e,expense:t,onSave:n,onCancel:o})=>{const[a,l]=(0,r.useState)(""),[s,d]=(0,r.useState)("USD"),[g,m]=(0,r.useState)(""),[h,x]=(0,r.useState)("");(0,r.useEffect)(()=>{t&&(l(t.amount.toString()),d(t.currency),m(t.description),x(t.category||""))},[t]);return(0,D.jsx)(p.default,{visible:e,animationType:"slide",transparent:!0,children:(0,D.jsx)(c.default,{style:de.modalContainer,children:(0,D.jsxs)(c.default,{style:de.modalContent,children:[(0,D.jsx)(i.default,{style:de.modalTitle,children:"Edit Expense"}),(0,D.jsx)(u.default,{style:de.modalInput,value:a,onChangeText:l,placeholder:"Amount",keyboardType:"numeric"}),(0,D.jsxs)(c.default,{style:de.currencyContainer,children:[(0,D.jsx)(i.default,{style:de.inputLabel,children:"Currency:"}),(0,D.jsx)(c.default,{style:de.currencyOptions,children:["USD","INR","EUR","GBP"].map(e=>(0,D.jsx)(f.default,{style:[de.currencyButton,s===e&&de.currencyButtonActive],onPress:()=>d(e),children:(0,D.jsx)(i.default,{style:[de.currencyButtonText,s===e&&de.currencyButtonTextActive],children:e})},e))})]}),(0,D.jsx)(u.default,{style:[de.modalInput,de.modalInputLarge],value:g,onChangeText:m,placeholder:"Description",multiline:!0}),(0,D.jsxs)(c.default,{style:de.categoryContainer,children:[(0,D.jsx)(i.default,{style:de.inputLabel,children:"Category (optional):"}),(0,D.jsx)(c.default,{style:de.categoryOptions,children:["Food","Transportation","Shopping","Entertainment","Bills","Healthcare","Education","Travel","Other"].map(e=>(0,D.jsx)(f.default,{style:[de.categoryButton,h===e&&de.categoryButtonActive],onPress:()=>x(h===e?"":e),children:(0,D.jsx)(i.default,{style:[de.categoryButtonText,h===e&&de.categoryButtonTextActive],children:e})},e))})]}),(0,D.jsxs)(c.default,{style:de.modalButtons,children:[(0,D.jsx)(f.default,{style:de.modalButton,onPress:o,children:(0,D.jsx)(i.default,{style:de.modalButtonText,children:"Cancel"})}),(0,D.jsx)(f.default,{style:[de.modalButton,de.modalButtonPrimary],onPress:()=>{if(!t||!a.trim()||!g.trim())return;const e=parseFloat(a);if(isNaN(e)||e<=0)return void y.default.alert("Invalid Amount","Please enter a valid amount greater than 0");const o=Object.assign({},t,{amount:e,currency:s,description:g.trim(),category:h.trim()||void 0});n(o)},children:(0,D.jsx)(i.default,{style:[de.modalButtonText,de.modalButtonTextPrimary],children:"Save"})})]})]})})})},se=()=>{const[e,t]=(0,r.useState)([]),[n,o]=(0,r.useState)("all"),[a,l]=(0,r.useState)(null),[s,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)("list"),y=(0,r.useCallback)(async()=>{const e=await B.getExpenses();t(e.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()))},[]);(0,r.useEffect)(()=>{y()},[y]),(0,Q.useFocusEffect)((0,r.useCallback)(()=>{y()},[y]));const h=e.filter(e=>{if("thisMonth"===n){const t=new Date,n=(0,oe.default)(t),o=(0,re.default)(t);return(0,ie.default)(e.createdAt,{start:n,end:o})}return!0}),p=e=>{const t={};return e.forEach(e=>{const n=e.category||"Other";t[n]||(t[n]={amount:0,count:0,currency:e.currency}),t[n].amount+=e.amount,t[n].count+=1}),Object.entries(t).map(([e,t])=>({category:e,amount:t.amount,count:t.count,currency:t.currency,formatted:A.formatCurrency(t.amount,t.currency)})).sort((e,t)=>t.amount-e.amount)},j=e=>{l(e),d(!0)},C=async e=>{if("undefined"===typeof window||window.confirm("Are you sure you want to delete this expense?"))try{await B.deleteExpense(e),t(t=>t.filter(t=>t.id!==e))}catch(n){console.error("Error deleting expense:",n)}},w=e=>[de.filterButton,n===e&&de.filterButtonActive],S=e=>[de.filterButtonText,n===e&&de.filterButtonTextActive];return(0,D.jsxs)(x.SafeAreaView,{style:de.container,children:[(0,D.jsxs)(c.default,{style:de.header,children:[(0,D.jsx)(i.default,{style:de.headerTitle,children:"Expenses"}),(0,D.jsx)(c.default,{style:de.totalsContainer,children:0===h.length?(0,D.jsxs)(c.default,{style:de.totalContainer,children:[(0,D.jsx)(i.default,{style:de.totalLabel,children:"Total:"}),(0,D.jsx)(i.default,{style:de.totalAmount,children:"$0.00"})]}):(e=>{if(0===e.length)return[];const t={};return e.forEach(e=>{t[e.currency]=(t[e.currency]||0)+e.amount}),Object.keys(t).map(e=>({currency:e,amount:t[e],formatted:A.formatCurrency(t[e],e)}))})(h).map(e=>(0,D.jsxs)(c.default,{style:de.totalContainer,children:[(0,D.jsxs)(i.default,{style:de.totalLabel,children:[e.currency," Total:"]}),(0,D.jsx)(i.default,{style:de.totalAmount,children:e.formatted})]},e.currency))})]}),(0,D.jsxs)(c.default,{style:de.filterContainer,children:[(0,D.jsx)(f.default,{style:w("all"),onPress:()=>o("all"),children:(0,D.jsx)(i.default,{style:S("all"),children:"All Time"})}),(0,D.jsx)(f.default,{style:w("thisMonth"),onPress:()=>o("thisMonth"),children:(0,D.jsx)(i.default,{style:S("thisMonth"),children:"This Month"})})]}),(0,D.jsxs)(c.default,{style:de.viewToggleContainer,children:[(0,D.jsx)(f.default,{style:[de.viewToggleButton,"list"===u&&de.viewToggleButtonActive],onPress:()=>m("list"),children:(0,D.jsx)(i.default,{style:[de.viewToggleText,"list"===u&&de.viewToggleTextActive],children:"List"})}),(0,D.jsx)(f.default,{style:[de.viewToggleButton,"analytics"===u&&de.viewToggleButtonActive],onPress:()=>m("analytics"),children:(0,D.jsx)(i.default,{style:[de.viewToggleText,"analytics"===u&&de.viewToggleTextActive],children:"Analytics"})})]}),0===h.length?(0,D.jsxs)(c.default,{style:de.emptyContainer,children:[(0,D.jsx)(X.default,{name:"receipt-outline",size:64,color:"#ccc"}),(0,D.jsx)(i.default,{style:de.emptyText,children:"all"===n?"No expenses yet":"No expenses this month"}),(0,D.jsx)(i.default,{style:de.emptySubtext,children:"Add entries in your journal to track expenses"})]}):"list"===u?(0,D.jsx)(g.default,{data:h,renderItem:({item:e})=>(0,D.jsx)(ae,{expense:e,onEdit:j,onDelete:C}),keyExtractor:e=>e.id,style:de.list,showsVerticalScrollIndicator:!1}):(0,D.jsxs)(O.default,{style:de.analyticsContainer,showsVerticalScrollIndicator:!1,children:[(0,D.jsxs)(c.default,{style:de.analyticsSection,children:[(0,D.jsx)(i.default,{style:de.analyticsSectionTitle,children:"\ud83d\udcca Category Breakdown"}),p(h).map((e,t)=>(0,D.jsxs)(c.default,{style:de.categoryAnalyticsItem,children:[(0,D.jsxs)(c.default,{style:de.categoryAnalyticsInfo,children:[(0,D.jsx)(i.default,{style:de.categoryAnalyticsName,children:e.category}),(0,D.jsxs)(i.default,{style:de.categoryAnalyticsCount,children:[e.count," ",1===e.count?"expense":"expenses"]})]}),(0,D.jsx)(i.default,{style:de.categoryAnalyticsAmount,children:e.formatted})]},e.category))]}),(0,D.jsxs)(c.default,{style:de.analyticsSection,children:[(0,D.jsx)(i.default,{style:de.analyticsSectionTitle,children:"\ud83d\udcc8 Monthly Trends"}),(()=>{const t={};return e.forEach(e=>{const n=(0,b.default)(e.createdAt,"MMM yyyy");t[n]||(t[n]={amount:0,count:0}),t[n].amount+=e.amount,t[n].count+=1}),Object.entries(t).map(([e,t])=>({month:e,amount:t.amount,count:t.count})).sort((e,t)=>new Date(e.month).getTime()-new Date(t.month).getTime())})().map((e,t)=>(0,D.jsxs)(c.default,{style:de.trendItem,children:[(0,D.jsx)(i.default,{style:de.trendMonth,children:e.month}),(0,D.jsxs)(c.default,{style:{alignItems:"flex-end"},children:[(0,D.jsx)(i.default,{style:de.trendAmount,children:A.formatCurrency(e.amount,"USD")}),(0,D.jsxs)(i.default,{style:de.categoryAnalyticsCount,children:[e.count," ",1===e.count?"expense":"expenses"]})]})]},e.month))]}),(0,D.jsxs)(c.default,{style:de.analyticsSection,children:[(0,D.jsx)(i.default,{style:de.analyticsSectionTitle,children:"\ud83d\udccb Quick Stats"}),(0,D.jsxs)(c.default,{style:de.trendItem,children:[(0,D.jsx)(i.default,{style:de.trendMonth,children:"Average per expense"}),(0,D.jsx)(i.default,{style:de.trendAmount,children:h.length>0?A.formatCurrency(h.reduce((e,t)=>e+t.amount,0)/h.length,h[0].currency):"$0.00"})]}),(0,D.jsxs)(c.default,{style:de.trendItem,children:[(0,D.jsx)(i.default,{style:de.trendMonth,children:"Most expensive category"}),(0,D.jsx)(i.default,{style:de.trendAmount,children:p(h)[0]?.category||"None"})]}),(0,D.jsxs)(c.default,{style:de.trendItem,children:[(0,D.jsx)(i.default,{style:de.trendMonth,children:"Total categories"}),(0,D.jsx)(i.default,{style:de.trendAmount,children:p(h).length})]})]})]}),(0,D.jsx)(le,{visible:s,expense:a,onSave:async e=>{await B.updateExpense(e.id,{amount:e.amount,currency:e.currency,description:e.description,category:e.category}),t(t=>t.map(t=>t.id===e.id?e:t)),d(!1),l(null)},onCancel:()=>{d(!1),l(null)}})]})},de=m.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},header:{paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},headerTitle:{fontSize:20,fontWeight:"bold",color:"#333",marginBottom:8},totalsContainer:{paddingHorizontal:16,paddingTop:8},totalContainer:{flexDirection:"row",alignItems:"center",marginBottom:4},totalLabel:{fontSize:14,color:"#666",marginRight:8},totalAmount:{fontSize:16,fontWeight:"bold",color:"#2e7d32"},filterContainer:{flexDirection:"row",paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},filterButton:{paddingHorizontal:16,paddingVertical:8,marginRight:8,borderRadius:20,backgroundColor:"#f0f0f0"},filterButtonActive:{backgroundColor:"#007AFF"},filterButtonText:{fontSize:14,color:"#666",fontWeight:"500"},filterButtonTextActive:{color:"#fff"},list:{flex:1,paddingHorizontal:16},expenseCard:{backgroundColor:"#fff",marginVertical:6,padding:16,borderRadius:12,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},expenseHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},expenseAmount:{flex:1},amountText:{fontSize:18,fontWeight:"bold",color:"#2e7d32"},categoryText:{fontSize:12,color:"#666",marginTop:2,backgroundColor:"#f0f0f0",paddingHorizontal:8,paddingVertical:2,borderRadius:10,alignSelf:"flex-start"},expenseActions:{flexDirection:"row"},actionButton:{padding:10,marginLeft:8,minWidth:36,minHeight:36,alignItems:"center",justifyContent:"center",borderRadius:6,backgroundColor:"rgba(0,0,0,0.05)",borderWidth:1,borderColor:"rgba(0,0,0,0.1)"},deleteButton:{backgroundColor:"#f44336",borderColor:"#d32f2f"},expenseDescription:{fontSize:14,color:"#333",lineHeight:18,marginBottom:8},expenseDate:{fontSize:12,color:"#999"},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",paddingHorizontal:40},emptyText:{fontSize:18,fontWeight:"600",color:"#666",marginTop:16,textAlign:"center"},emptySubtext:{fontSize:14,color:"#999",marginTop:8,textAlign:"center",lineHeight:20},modalContainer:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"#fff",borderRadius:12,padding:20,width:"90%",maxWidth:400,maxHeight:"80%"},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:16,textAlign:"center"},modalInput:{borderWidth:1,borderColor:"#e0e0e0",borderRadius:8,padding:12,marginBottom:12,fontSize:16,minHeight:44},modalInputLarge:{minHeight:80,textAlignVertical:"top"},inputLabel:{fontSize:14,fontWeight:"600",color:"#333",marginBottom:8},currencyContainer:{marginBottom:12},currencyOptions:{flexDirection:"row",flexWrap:"wrap"},currencyButton:{paddingHorizontal:12,paddingVertical:6,marginRight:8,marginBottom:8,borderRadius:16,backgroundColor:"#f0f0f0",borderWidth:1,borderColor:"#e0e0e0"},currencyButtonActive:{backgroundColor:"#007AFF",borderColor:"#007AFF"},currencyButtonText:{fontSize:14,color:"#666",fontWeight:"500"},currencyButtonTextActive:{color:"#fff"},categoryContainer:{marginBottom:16},categoryOptions:{flexDirection:"row",flexWrap:"wrap"},categoryButton:{paddingHorizontal:12,paddingVertical:6,marginRight:8,marginBottom:8,borderRadius:16,backgroundColor:"#f0f0f0",borderWidth:1,borderColor:"#e0e0e0"},categoryButtonActive:{backgroundColor:"#4caf50",borderColor:"#4caf50"},categoryButtonText:{fontSize:12,color:"#666",fontWeight:"500"},categoryButtonTextActive:{color:"#fff"},modalButtons:{flexDirection:"row",justifyContent:"space-between",marginTop:16},modalButton:{flex:1,paddingVertical:12,borderRadius:8,marginHorizontal:4,backgroundColor:"#f0f0f0"},modalButtonPrimary:{backgroundColor:"#007AFF"},modalButtonText:{textAlign:"center",fontSize:16,fontWeight:"600",color:"#333"},modalButtonTextPrimary:{color:"#fff"},viewToggleContainer:{flexDirection:"row",paddingHorizontal:16,paddingVertical:8,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},viewToggleButton:{flex:1,paddingVertical:8,paddingHorizontal:16,marginHorizontal:4,borderRadius:16,backgroundColor:"#f0f0f0",alignItems:"center"},viewToggleButtonActive:{backgroundColor:"#007AFF"},viewToggleText:{fontSize:14,fontWeight:"600",color:"#666"},viewToggleTextActive:{color:"#fff"},analyticsContainer:{flex:1,paddingHorizontal:16},analyticsSection:{backgroundColor:"#fff",borderRadius:12,padding:16,marginVertical:8},analyticsSectionTitle:{fontSize:16,fontWeight:"bold",color:"#333",marginBottom:12},categoryAnalyticsItem:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:8,borderBottomWidth:1,borderBottomColor:"#f0f0f0"},categoryAnalyticsInfo:{flex:1},categoryAnalyticsName:{fontSize:14,fontWeight:"600",color:"#333"},categoryAnalyticsCount:{fontSize:12,color:"#666",marginTop:2},categoryAnalyticsAmount:{fontSize:14,fontWeight:"bold",color:"#2e7d32"},trendItem:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:8,borderBottomWidth:1,borderBottomColor:"#f0f0f0"},trendMonth:{fontSize:14,fontWeight:"600",color:"#333"},trendAmount:{fontSize:14,fontWeight:"bold",color:"#2e7d32"}});var ce=n(1514),ue=n(1706),fe=n(7610),ge=n(9068),me=n(9007);const ye=()=>{const[e,t]=(0,r.useState)(null),[n,o]=(0,r.useState)("month"),[a,l]=(0,r.useState)(!0),s=(0,r.useCallback)(async()=>{l(!0);try{const[e,o,r]=await Promise.all([B.getEntries(),B.getExpenses(),B.getActionItems()]),i=new Date,a=(0,ce.default)(i,1),l=(0,ue.default)(i,1),s=((t=>{const n="week"===t?a:"month"===t?l:null;n&&e.filter(e=>e.timestamp>=n),n&&o.filter(e=>e.createdAt>=n),n&&r.filter(e=>e.createdAt>=n)})(n),e.length),d=e.filter(e=>e.timestamp>=a).length,c=e.filter(e=>e.timestamp>=l).length,u={},f={};o.forEach(e=>{u[e.currency]=(u[e.currency]||0)+e.amount}),o.filter(e=>e.createdAt>=l).forEach(e=>{f[e.currency]=(f[e.currency]||0)+e.amount});const g=r.length,m=r.filter(e=>e.completed).length,y=g-m,h=g>0?m/g*100:0,p={};e.forEach(e=>{const t=(0,b.default)(e.timestamp,"EEEE");p[t]=(p[t]||0)+1});const x=Object.entries(p).reduce((e,t)=>p[e[0]]>p[t[0]]?e:t,["Monday",0])[0]||"No data",j=e.length>0?e.length/Math.max(1,Math.ceil((i.getTime()-e[0].timestamp.getTime())/864e5)):0,C={};o.forEach(e=>{const t=e.category||"Other";C[t]||(C[t]={amount:0,currency:e.currency}),C[t].amount+=e.amount});const w=Object.entries(C).map(([e,t])=>({category:e,amount:t.amount,currency:t.currency})).sort((e,t)=>t.amount-e.amount).slice(0,5),S=[];for(let t=6;t>=0;t--){const n=(0,fe.default)(i,t),a=(0,ge.default)(n),l=(0,me.default)(n),s=e.filter(e=>(0,ie.default)(e.timestamp,{start:a,end:l})).length,d=o.filter(e=>(0,ie.default)(e.createdAt,{start:a,end:l})).length,c=r.filter(e=>(0,ie.default)(e.createdAt,{start:a,end:l})).length;S.push({date:(0,b.default)(n,"MMM dd"),entries:s,expenses:d,actions:c})}t({totalEntries:s,entriesThisWeek:d,entriesThisMonth:c,totalExpenses:Object.entries(u).map(([e,t])=>({currency:e,amount:t})),expensesThisMonth:Object.entries(f).map(([e,t])=>({currency:e,amount:t})),totalActionItems:g,completedActionItems:m,pendingActionItems:y,completionRate:h,averageEntriesPerDay:j,mostActiveDay:x,topExpenseCategories:w,recentActivity:S})}catch(e){console.error("Error calculating analytics:",e)}finally{l(!1)}},[n]);return(0,Q.useFocusEffect)((0,r.useCallback)(()=>{s()},[s])),a||!e?(0,D.jsx)(x.SafeAreaView,{style:he.container,children:(0,D.jsx)(i.default,{style:he.loadingText,children:"Loading analytics..."})}):(0,D.jsxs)(x.SafeAreaView,{style:he.container,children:[(0,D.jsx)(c.default,{style:he.header,children:(0,D.jsx)(i.default,{style:he.headerTitle,children:"Analytics & Insights"})}),(0,D.jsxs)(O.default,{style:he.content,showsVerticalScrollIndicator:!1,children:[(0,D.jsx)(c.default,{style:he.periodSelector,children:["week","month","all"].map(e=>(0,D.jsx)(f.default,{style:[he.periodButton,n===e&&he.periodButtonActive],onPress:()=>o(e),children:(0,D.jsx)(i.default,{style:[he.periodButtonText,n===e&&he.periodButtonTextActive],children:"all"===e?"All Time":`This ${e.charAt(0).toUpperCase()+e.slice(1)}`})},e))}),(0,D.jsxs)(c.default,{style:he.summaryGrid,children:[(0,D.jsxs)(c.default,{style:he.summaryCard,children:[(0,D.jsx)(i.default,{style:he.summaryNumber,children:e.totalEntries}),(0,D.jsx)(i.default,{style:he.summaryLabel,children:"Total Entries"})]}),(0,D.jsxs)(c.default,{style:he.summaryCard,children:[(0,D.jsx)(i.default,{style:he.summaryNumber,children:e.totalActionItems}),(0,D.jsx)(i.default,{style:he.summaryLabel,children:"Action Items"})]}),(0,D.jsxs)(c.default,{style:he.summaryCard,children:[(0,D.jsxs)(i.default,{style:he.summaryNumber,children:[e.completionRate.toFixed(0),"%"]}),(0,D.jsx)(i.default,{style:he.summaryLabel,children:"Completion Rate"})]}),(0,D.jsxs)(c.default,{style:he.summaryCard,children:[(0,D.jsx)(i.default,{style:he.summaryNumber,children:e.averageEntriesPerDay.toFixed(1)}),(0,D.jsx)(i.default,{style:he.summaryLabel,children:"Avg Entries/Day"})]})]}),(0,D.jsxs)(c.default,{style:he.section,children:[(0,D.jsx)(i.default,{style:he.sectionTitle,children:"\ud83d\udcb0 Spending Overview"}),e.totalExpenses.length>0?(0,D.jsx)(c.default,{style:he.expenseList,children:e.totalExpenses.map((e,t)=>(0,D.jsxs)(c.default,{style:he.expenseItem,children:[(0,D.jsx)(i.default,{style:he.expenseAmount,children:A.formatCurrency(e.amount,e.currency)}),(0,D.jsx)(i.default,{style:he.expenseLabel,children:"Total Spent"})]},e.currency))}):(0,D.jsx)(i.default,{style:he.emptyText,children:"No expenses recorded yet"})]}),e.topExpenseCategories.length>0&&(0,D.jsxs)(c.default,{style:he.section,children:[(0,D.jsx)(i.default,{style:he.sectionTitle,children:"\ud83d\udcca Top Spending Categories"}),(0,D.jsx)(c.default,{style:he.categoryList,children:e.topExpenseCategories.map((t,n)=>(0,D.jsxs)(c.default,{style:he.categoryItem,children:[(0,D.jsxs)(c.default,{style:he.categoryInfo,children:[(0,D.jsx)(i.default,{style:he.categoryName,children:t.category}),(0,D.jsx)(i.default,{style:he.categoryAmount,children:A.formatCurrency(t.amount,t.currency)})]}),(0,D.jsx)(c.default,{style:[he.categoryBar,{width:t.amount/e.topExpenseCategories[0].amount*100+"%"}]})]},t.category))})]}),(0,D.jsxs)(c.default,{style:he.section,children:[(0,D.jsx)(i.default,{style:he.sectionTitle,children:"\ud83d\udcc8 Activity Patterns"}),(0,D.jsxs)(c.default,{style:he.patternCard,children:[(0,D.jsx)(i.default,{style:he.patternLabel,children:"Most Active Day"}),(0,D.jsx)(i.default,{style:he.patternValue,children:e.mostActiveDay})]})]}),(0,D.jsxs)(c.default,{style:he.section,children:[(0,D.jsx)(i.default,{style:he.sectionTitle,children:"\ud83d\udcc5 Recent Activity (Last 7 Days)"}),(0,D.jsx)(c.default,{style:he.chartContainer,children:e.recentActivity.map((t,n)=>{const o=Math.max(...e.recentActivity.map(e=>e.entries)),r=Math.max(...e.recentActivity.map(e=>e.expenses)),a=Math.max(...e.recentActivity.map(e=>e.actions)),l=Math.max(o,r,a,1),s=Math.max(4,t.entries/l*50),d=Math.max(4,t.expenses/l*50),u=Math.max(4,t.actions/l*50);return(0,D.jsxs)(c.default,{style:he.chartDay,children:[(0,D.jsxs)(c.default,{style:he.chartBars,children:[(0,D.jsx)(c.default,{style:[he.chartBar,he.entriesBar,{height:s}]}),(0,D.jsx)(c.default,{style:[he.chartBar,he.expensesBar,{height:d}]}),(0,D.jsx)(c.default,{style:[he.chartBar,he.actionsBar,{height:u}]})]}),(0,D.jsx)(i.default,{style:he.chartDate,children:t.date})]},t.date)})}),(0,D.jsxs)(c.default,{style:he.legend,children:[(0,D.jsxs)(c.default,{style:he.legendItem,children:[(0,D.jsx)(c.default,{style:[he.legendColor,he.entriesBar]}),(0,D.jsx)(i.default,{style:he.legendText,children:"Entries"})]}),(0,D.jsxs)(c.default,{style:he.legendItem,children:[(0,D.jsx)(c.default,{style:[he.legendColor,he.expensesBar]}),(0,D.jsx)(i.default,{style:he.legendText,children:"Expenses"})]}),(0,D.jsxs)(c.default,{style:he.legendItem,children:[(0,D.jsx)(c.default,{style:[he.legendColor,he.actionsBar]}),(0,D.jsx)(i.default,{style:he.legendText,children:"Actions"})]})]})]}),(0,D.jsxs)(c.default,{style:he.section,children:[(0,D.jsx)(i.default,{style:he.sectionTitle,children:"\ud83d\udca1 Insights"}),(0,D.jsxs)(c.default,{style:he.insightsList,children:[e.averageEntriesPerDay>3&&(0,D.jsx)(c.default,{style:he.insightCard,children:(0,D.jsxs)(i.default,{style:he.insightText,children:["\ud83d\udd25 You're on fire! Averaging ",e.averageEntriesPerDay.toFixed(1)," entries per day"]})}),e.completionRate>75&&(0,D.jsx)(c.default,{style:he.insightCard,children:(0,D.jsxs)(i.default,{style:he.insightText,children:["\u2b50 Great job! You complete ",e.completionRate.toFixed(0),"% of your action items"]})}),e.pendingActionItems>5&&(0,D.jsx)(c.default,{style:he.insightCard,children:(0,D.jsxs)(i.default,{style:he.insightText,children:["\u26a0\ufe0f You have ",e.pendingActionItems," pending action items. Consider reviewing them!"]})}),0===e.totalExpenses.length&&e.totalEntries>10&&(0,D.jsx)(c.default,{style:he.insightCard,children:(0,D.jsx)(i.default,{style:he.insightText,children:"\ud83d\udcb8 No expenses tracked yet. Try adding some spending entries to track your budget!"})})]})]})]})]})},he=m.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},header:{paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},headerTitle:{fontSize:20,fontWeight:"bold",color:"#333"},loadingText:{textAlign:"center",marginTop:50,fontSize:16,color:"#666"},content:{flex:1},periodSelector:{flexDirection:"row",paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},periodButton:{flex:1,paddingVertical:8,paddingHorizontal:12,marginHorizontal:4,borderRadius:16,backgroundColor:"#f0f0f0",alignItems:"center"},periodButtonActive:{backgroundColor:"#007AFF"},periodButtonText:{fontSize:14,fontWeight:"600",color:"#666"},periodButtonTextActive:{color:"#fff"},summaryGrid:{flexDirection:"row",flexWrap:"wrap",paddingHorizontal:16,paddingTop:16,gap:12},summaryCard:{width:(E.default.get("window").width-44)/2,backgroundColor:"#fff",padding:16,borderRadius:12,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},summaryNumber:{fontSize:24,fontWeight:"bold",color:"#333",marginBottom:4},summaryLabel:{fontSize:12,color:"#666",textAlign:"center"},section:{marginTop:16,paddingHorizontal:16},sectionTitle:{fontSize:18,fontWeight:"bold",color:"#333",marginBottom:12},expenseList:{backgroundColor:"#fff",borderRadius:12,padding:16},expenseItem:{alignItems:"center",marginBottom:8},expenseAmount:{fontSize:20,fontWeight:"bold",color:"#2e7d32"},expenseLabel:{fontSize:12,color:"#666",marginTop:2},categoryList:{backgroundColor:"#fff",borderRadius:12,padding:16},categoryItem:{marginBottom:12,position:"relative"},categoryInfo:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:4,zIndex:1},categoryName:{fontSize:14,fontWeight:"600",color:"#333"},categoryAmount:{fontSize:14,fontWeight:"bold",color:"#2e7d32"},categoryBar:{height:4,backgroundColor:"#007AFF",borderRadius:2,position:"absolute",bottom:0,left:0,opacity:.3},patternCard:{backgroundColor:"#fff",borderRadius:12,padding:16,alignItems:"center"},patternLabel:{fontSize:14,color:"#666",marginBottom:4},patternValue:{fontSize:18,fontWeight:"bold",color:"#333"},chartContainer:{backgroundColor:"#fff",borderRadius:12,padding:16,flexDirection:"row",justifyContent:"space-around",alignItems:"flex-end",height:100,marginBottom:8},chartDay:{alignItems:"center",flex:1},chartBars:{flexDirection:"row",alignItems:"flex-end",height:50,marginBottom:8,gap:2},chartBar:{width:6,borderRadius:3,minHeight:4},entriesBar:{backgroundColor:"#007AFF"},expensesBar:{backgroundColor:"#2e7d32"},actionsBar:{backgroundColor:"#ff9800"},chartDate:{fontSize:10,color:"#666"},legend:{flexDirection:"row",justifyContent:"center",marginTop:12,gap:16},legendItem:{flexDirection:"row",alignItems:"center"},legendColor:{width:8,height:8,borderRadius:4,marginRight:6},legendText:{fontSize:12,color:"#666"},insightsList:{gap:8},insightCard:{backgroundColor:"#fff",borderRadius:12,padding:16,borderLeftWidth:4,borderLeftColor:"#007AFF"},insightText:{fontSize:14,color:"#333",lineHeight:20},emptyText:{textAlign:"center",color:"#666",fontSize:14,backgroundColor:"#fff",borderRadius:12,padding:20}});m.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},headerTitle:{fontSize:20,fontWeight:"bold",color:"#333"},closeButton:{padding:8,borderRadius:20,backgroundColor:"#f0f0f0"},closeButtonText:{fontSize:16,color:"#666",fontWeight:"bold"},content:{flex:1,paddingHorizontal:16},subtitle:{fontSize:16,color:"#666",textAlign:"center",marginVertical:20,lineHeight:22},optionCard:{backgroundColor:"#fff",borderRadius:12,padding:16,marginBottom:16,borderWidth:2,borderColor:"transparent",shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},selectedCard:{borderColor:"#007AFF",backgroundColor:"#f8f9ff"},optionHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:8},optionTitleRow:{flexDirection:"row",alignItems:"center",flex:1},optionPreview:{fontSize:28,marginRight:12},optionTitleContainer:{flex:1,flexDirection:"row",alignItems:"center"},optionName:{fontSize:18,fontWeight:"bold",color:"#333",marginRight:8},currentBadge:{backgroundColor:"#007AFF",color:"#fff",fontSize:10,fontWeight:"bold",paddingHorizontal:6,paddingVertical:2,borderRadius:10,overflow:"hidden"},optionDescription:{fontSize:14,color:"#666",marginBottom:12,lineHeight:20},featuresContainer:{marginTop:4},featureRow:{flexDirection:"row",alignItems:"flex-start",marginBottom:4},featureBullet:{fontSize:16,color:"#007AFF",marginRight:8,marginTop:1},featureText:{fontSize:13,color:"#555",flex:1,lineHeight:18},radioButton:{width:24,height:24,borderRadius:12,borderWidth:2,borderColor:"#ddd",justifyContent:"center",alignItems:"center"},radioButtonSelected:{borderColor:"#007AFF"},radioButtonInner:{width:12,height:12,borderRadius:6,backgroundColor:"#007AFF"},footer:{padding:16,backgroundColor:"#fff",borderTopWidth:1,borderTopColor:"#e0e0e0"},selectButton:{backgroundColor:"#007AFF",borderRadius:12,paddingVertical:16,alignItems:"center"},selectButtonDisabled:{backgroundColor:"#f0f0f0"},selectButtonText:{color:"#fff",fontSize:16,fontWeight:"bold"},selectButtonTextDisabled:{color:"#999"}});const pe=(0,s.default)();function xe(){return(0,D.jsxs)(d.SafeAreaProvider,{children:[(0,D.jsx)(a.StatusBar,{style:"dark"}),(0,D.jsx)(l.default,{children:(0,D.jsxs)(pe.Navigator,{screenOptions:({route:e})=>({tabBarIcon:({focused:t,color:n,size:o})=>{let r;return r="Journal"===e.name?"\ud83d\udcdd":"ActionItems"===e.name?"\u2705":"Expenses"===e.name?"\ud83d\udcb0":"Analytics"===e.name?"\ud83d\udcca":"\u2753",(0,D.jsx)(i.default,{style:{fontSize:o,color:n},children:r})},tabBarActiveTintColor:"#007AFF",tabBarInactiveTintColor:"gray",tabBarStyle:{backgroundColor:"#fff",borderTopWidth:1,borderTopColor:"#e0e0e0",paddingBottom:5,paddingTop:5,height:60},headerShown:!1}),children:[(0,D.jsx)(pe.Screen,{name:"Journal",component:q,options:{tabBarLabel:"Journal"}}),(0,D.jsx)(pe.Screen,{name:"ActionItems",component:te,options:{tabBarLabel:"Tasks"}}),(0,D.jsx)(pe.Screen,{name:"Expenses",component:se,options:{tabBarLabel:"Expenses"}}),(0,D.jsx)(pe.Screen,{name:"Analytics",component:ye,options:{tabBarLabel:"Analytics"}})]})})]})}(0,o.default)(xe),(0,o.default)(xe)}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,(()=>{var e=[];n.O=(t,o,r,i)=>{if(!o){var a=1/0;for(c=0;c<e.length;c++){for(var[o,r,i]=e[c],l=!0,s=0;s<o.length;s++)(!1&i||a>=i)&&Object.keys(n.O).every(e=>n.O[e](o[s]))?o.splice(s--,1):(l=!1,i<a&&(a=i));if(l){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,r,i]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/DailyTracker/",(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,i,[a,l,s]=o,d=0;if(a.some(t=>0!==e[t])){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(s)var c=s(n)}for(t&&t(o);d<a.length;d++)i=a[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[7],()=>n(9188));o=n.O(o)})();
//# sourceMappingURL=main.392703a4.js.map