(()=>{"use strict";var e={7217:(e,t,n)=>{var o=n(7408),r=n(9307),a=n(6283),i=n(9039),l=n(6986),s=n(9316),d=n(8833),c=n(3929),u=n(6773),f=n(5648),g=n(932),m=n(3668),y=n(1690),h=n(4767),x=n(5991),p=n(8264),b=n(1171),j=n(2656),C=n(5412),w=n(827);const S="@daily_tracker_entries",T="@daily_tracker_action_items",B="@daily_tracker_expenses",A="@daily_tracker_settings";class k{static async getEntries(){try{const e=await w.default.getItem(S);if(null!=e){const t=JSON.parse(e).map(e=>Object.assign({},e,{timestamp:new Date(e.timestamp),type:e.type,isMarkdown:e.isMarkdown||!1}));return t.sort((e,t)=>{if(Math.abs(e.timestamp.getTime()-t.timestamp.getTime())<2e3){if("system"===e.type&&"system"!==t.type)return 1;if("system"!==e.type&&"system"===t.type)return-1}return e.timestamp.getTime()-t.timestamp.getTime()})}return[]}catch(e){return console.error("Error getting entries:",e),[]}}static async saveEntries(e){try{const t=JSON.stringify(e);await w.default.setItem(S,t)}catch(t){console.error("Error saving entries:",t)}}static async addEntry(e){try{const t=await this.getEntries();t.push(e),await this.saveEntries(t)}catch(t){console.error("Error adding entry:",t)}}static async getActionItems(){try{const e=await w.default.getItem(T);if(null!=e){return JSON.parse(e).map(e=>Object.assign({},e,{createdAt:new Date(e.createdAt),dueDate:e.dueDate?new Date(e.dueDate):void 0}))}return[]}catch(e){return console.error("Error getting action items:",e),[]}}static async saveActionItems(e){try{const t=JSON.stringify(e);await w.default.setItem(T,t)}catch(t){console.error("Error saving action items:",t)}}static async addActionItem(e){try{const t=await this.getActionItems();t.push(e),await this.saveActionItems(t)}catch(t){console.error("Error adding action item:",t)}}static async updateActionItem(e,t){try{const n=await this.getActionItems(),o=n.findIndex(t=>t.id===e);-1!==o&&(n[o]=Object.assign({},n[o],t)),await this.saveActionItems(n)}catch(n){console.error("Error updating action item:",n)}}static async deleteActionItem(e){try{const t=(await this.getActionItems()).filter(t=>t.id!==e);await this.saveActionItems(t)}catch(t){console.error("Error deleting action item:",t)}}static async getExpenses(){try{const e=await w.default.getItem(B);if(null!=e){const t=JSON.parse(e);return t.map(e=>Object.assign({},e,{createdAt:new Date(e.createdAt)}))}return[]}catch(e){return console.error("Error getting expenses:",e),[]}}static async saveExpenses(e){try{const t=JSON.stringify(e);await w.default.setItem(B,t)}catch(t){console.error("Error saving expenses:",t)}}static async addExpense(e){try{const t=await this.getExpenses();t.push(e),await this.saveExpenses(t)}catch(t){console.error("Error adding expense:",t)}}static async updateExpense(e,t){try{const n=await this.getExpenses(),o=n.findIndex(t=>t.id===e);-1!==o&&(n[o]=Object.assign({},n[o],t),await this.saveExpenses(n))}catch(n){console.error("Error updating expense:",n)}}static async deleteExpense(e){try{const t=(await this.getExpenses()).filter(t=>t.id!==e);await this.saveExpenses(t)}catch(t){console.error("Error deleting expense:",t)}}static async getSettings(){try{const e=await w.default.getItem(A);return null!=e?JSON.parse(e):null}catch(e){return console.error("Error getting settings:",e),null}}static async saveSettings(e){try{const t=JSON.stringify(e);await w.default.setItem(A,t)}catch(t){console.error("Error saving settings:",t)}}}const z=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)});class I{static detectActionItem(e){return/^\s*\.\s*\S/.test(e)}static detectExpense(e){const t=e.toLowerCase();if(this.EXPENSE_KEYWORDS.some(e=>t.includes(e)))return!0;if(this.hasNumericValue(e)&&this.hasExpenseContext(e)){if(/^\s*\d+(\.\d{1,2})?\s*$/.test(e))return!1;return!/^\s*(?:Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])\s*\d+(?:\.\d{1,2})?\s*$/.test(e)}return!1}static hasNumericValue(e){return/(?:Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])\s*\d+(?:\.\d{1,2})?|\b\d+(?:\.\d{1,2})?\b/.test(e)}static hasExpenseContext(e){const t=e.toLowerCase();if(["spent","bought","purchased","paid","cost","price","bill","receipt","shopping","store","market","restaurant","cafe","food","lunch","dinner","gas","fuel","electricity","rent","groceries","medicine","doctor","haircut","salon","barber","transportation","taxi","uber","lyft","coffee","tea","snack","movie","ticket","parking","toll"].some(e=>t.includes(e)))return!0;if(/\d+(?:\.\d{1,2})?\s+for\s+\w+/i.test(e))return!0;return!!/(?:Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])\s*\d+(?:\.\d{1,2})?\s+for\s+\w+/i.test(e)}static getSystemCurrency(){try{const t=Intl.NumberFormat().resolvedOptions().locale,n=Intl.DateTimeFormat().resolvedOptions().timeZone,o={"en-IN":"INR",en_IN:"INR","hi-IN":"INR",hi_IN:"INR","en-CA":"CAD",en_CA:"CAD","en-AU":"AUD",en_AU:"AUD","de-DE":"EUR",de_DE:"EUR","fr-FR":"EUR",fr_FR:"EUR","es-ES":"EUR",es_ES:"EUR","it-IT":"EUR",it_IT:"EUR","ja-JP":"JPY",ja_JP:"JPY","ko-KR":"KRW",ko_KR:"KRW","zh-CN":"CNY",zh_CN:"CNY","pt-BR":"BRL",pt_BR:"BRL","ru-RU":"RUB",ru_RU:"RUB"};if(o[t])return o[t];if(t.endsWith("-IN")||t.endsWith("_IN"))return"INR";if(n&&(n.includes("Asia/Calcutta")||n.includes("Asia/Kolkata")))return"INR";if(t.includes("en"))try{const e=new Intl.NumberFormat(t,{style:"currency",currency:"INR"});if(e.format(100).includes("\u20b9"))return"INR"}catch(e){}if(t.endsWith("-US")||t.endsWith("_US"))return"USD";if(t.endsWith("-GB")||t.endsWith("_GB"))return"GBP";if(t.endsWith("-DE")||t.endsWith("_DE")||t.endsWith("-FR")||t.endsWith("_FR")||t.endsWith("-ES")||t.endsWith("_ES")||t.endsWith("-IT")||t.endsWith("_IT"))return"EUR";return Intl.NumberFormat(t).resolvedOptions().currency||"USD"}catch(e){return"USD"}}static extractActionItem(e,t){if(this.detectActionItem(e)){let n=e.trim();return n.startsWith(".")&&(n=n.substring(1).trim()),{id:z(),entryId:t,title:n,completed:!1,createdAt:new Date}}return null}static extractExpenseInfo(e,t){const n=this.extractAmount(e);if(!n)return null;const o=this.extractCategoryFromText(e);return{id:z(),entryId:t,amount:n.value,currency:n.currency,description:o.description,category:o.category,createdAt:new Date}}static extractCategoryFromText(e){const t=e.toLowerCase().trim(),n=e.trim(),o=e.match(/(?:spent|paid|bought|purchased|cost|charged)\s+(?:Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])?\s*\d+(?:\.\d{1,2})?\s+for\s+(.+)/i);if(o){const e=o[1].trim();return{category:this.mapToStandardCategory(e),description:n}}const r=e.match(/(?:Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])?\s*\d+(?:\.\d{1,2})?\s+for\s+(.+)/i);if(r){const e=r[1].trim();return{category:this.mapToStandardCategory(e),description:n}}const a=e.match(/(?:spent|paid|bought|purchased)\s+(?:Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])?\s*\d+(?:\.\d{1,2})?\s+on\s+(.+)/i);if(a){const e=a[1].trim();return{category:this.mapToStandardCategory(e),description:n}}const i=["haircut","salon","barber","taxi","uber","lyft","parking","toll","coffee","tea","lunch","dinner","breakfast","snack","food","groceries","shopping","movie","ticket","gas","fuel","electricity","rent","medicine","doctor","train","bus","flight","metro","subway","cab","auto"];for(const l of i)if(t.includes(l)){if("ticket"===l){const e=t.match(/\b(train|bus|flight|metro|subway)\s+ticket\b/);if(e)return{category:this.mapToStandardCategory(e[0]),description:n};const o=t.match(/\b(movie|cinema|concert|show)\s+ticket\b/);return o?{category:this.mapToStandardCategory(o[0]),description:n}:{category:this.mapToStandardCategory("ticket"),description:n}}return{category:this.mapToStandardCategory(l),description:n}}return{description:n}}static mapToStandardCategory(e){const t=e.toLowerCase().trim();return["train ticket","bus ticket","flight ticket","metro ticket","subway ticket"].some(e=>t.includes(e))||["taxi","uber","lyft","parking","toll","gas","fuel","transportation","train","bus","flight","metro","subway","cab","auto"].some(e=>t.includes(e))?"Transportation":["coffee","tea","lunch","dinner","breakfast","snack","food","groceries","restaurant","cafe"].some(e=>t.includes(e))?"Food":["haircut","salon","barber","medicine","doctor","hospital","pharmacy"].some(e=>t.includes(e))?"Health & Personal Care":["movie ticket","concert ticket","show ticket","movie","cinema","theater","entertainment"].some(e=>t.includes(e))||t.includes("ticket")&&!["train","bus","flight","metro","subway"].some(e=>t.includes(e))?"Entertainment":["electricity","rent","bill","utilities","water","internet"].some(e=>t.includes(e))?"Utilities":["shopping","clothes","clothing","shoes","accessories"].some(e=>t.includes(e))?"Shopping":e.charAt(0).toUpperCase()+e.slice(1)}static extractAmount(e){const t=e.match(/(?:Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])\s*(\d+(?:\.\d{1,2})?)|(\d+(?:\.\d{1,2})?)/g);if(!t||0===t.length)return null;let n=null,o=0;const r=t.map(e=>{const t=e.replace(/^(Rs\.?|rs\.?|RS\.?|\u20b9|[$\u20ac\xa3])\s*/i,""),r=parseFloat(t);return!isNaN(r)&&r>0?(r>=o&&(o=r,e.includes("$")?n="USD":e.includes("\u20ac")?n="EUR":e.includes("\xa3")?n="GBP":(e.includes("\u20b9")||/Rs\.?|rs\.?|RS\.?/i.test(e))&&(n="INR")),r):NaN}).filter(e=>!isNaN(e)&&e>0);if(0===r.length)return null;return{value:Math.max(...r),currency:n||this.getSystemCurrency()}}static formatCurrency(e,t){const n=t||this.getSystemCurrency();try{let t="en-US";switch(n){case"USD":t="en-US";break;case"EUR":case"GBP":t="en-GB";break;case"INR":t="en-IN";break;case"CAD":t="en-CA";break;case"AUD":t="en-AU"}const o=new Intl.NumberFormat(t,{style:"currency",currency:n,minimumFractionDigits:2,maximumFractionDigits:2}).format(e);return"USD"===n&&o.startsWith("US$")?o.replace("US$","$"):"CAD"===n&&o.startsWith("CA$")?o.replace("CA$","C$"):o}catch(o){return`${{USD:"$",EUR:"\u20ac",GBP:"\xa3",INR:"\u20b9",CAD:"C$",AUD:"A$",JPY:"\xa5",CNY:"\xa5"}[n]||n}${e.toFixed(2)}`}}static isExpenseRelated(e){const t=e.toLowerCase();return this.EXPENSE_KEYWORDS.some(e=>t.includes(e))}}I.CURRENCY_PATTERNS=[/\b\d+(\.\d{1,2})?\b/g,/[\u20b9$\u20ac\xa3]\s*\d+(\.\d{1,2})?|\d+(\.\d{1,2})?\s*[\u20b9$\u20ac\xa3]/g,/(?:Rs\.?|rs\.?|RS\.?)\s*\d+(\.\d{1,2})?/g,/\d+(\.\d{1,2})?\s*(rupees?|dollars?|euros?|pounds?)/g],I.EXPENSE_KEYWORDS=["spent","bought","purchased","paid","cost","expense","payment","buy","pay","shopping","store","bill","receipt","charged","withdrew","withdrawal","transaction","fee","subscription"],I.ACTION_KEYWORDS=["todo","to-do","task","need to","should","must","have to","action","plan","schedule","remind","remember","don't forget","important","deadline","due","appointment","meeting","call","email","follow up","buy","get","pick up","pack","finish","complete","start","contact","reach out","check","review","submit","apply","book","reserve"];var E=n(4411);const v=({entry:e,onLongPress:t,onEdit:n,markdownStyles:o,expense:r,actionItem:i})=>{const l=()=>{switch(e.type){case"expense":return(0,E.jsx)(a.default,{style:{fontSize:16,color:"#2e7d32"},children:"\ud83d\udcb0"});case"action":return(0,E.jsx)(a.default,{style:{fontSize:16,color:"#1565c0"},children:"\u2705"});default:return null}},s=()=>{switch(e.type){case"expense":if(r){return`${r.autoDetected?"\ud83d\udcb0 Auto-categorized as Expense":"\ud83d\udcb0 Manually categorized as Expense"}: ${I.formatCurrency(r.amount,r.currency)}`}return"\ud83d\udcb0 Expense";case"action":if(i){return`${i.autoDetected?"\u2705 Auto-categorized as Task":"\u2705 Manually categorized as Task"}: ${i.title}`}return"\u2705 Task";default:return null}};x.default.OS;return(0,E.jsx)(c.default,{style:"system"===e.type?R.systemMessageContainer:R.userMessageContainer,children:(0,E.jsx)(c.default,{style:(()=>{const t=[R.messageBubble],n="system"===e.type?R.systemMessage:R.userMessage;switch(e.type){case"expense":return[...t,R.expenseBubble,n];case"action":return[...t,R.actionBubble,n];case"system":return[...t,R.systemBubble,n];default:return[...t,R.defaultBubble,n]}})(),children:(0,E.jsx)(()=>(0,E.jsxs)(c.default,{children:[(0,E.jsxs)(c.default,{style:R.messageHeader,children:[l(),(0,E.jsx)(a.default,{style:R.timestamp,children:(0,C.default)(e.timestamp,"HH:mm")}),"system"!==e.type&&(0,E.jsx)(c.default,{style:R.actionButtons,children:n&&(0,E.jsx)(f.default,{style:R.actionButton,onPress:()=>n(e),hitSlop:{top:10,bottom:10,left:10,right:10},children:(0,E.jsx)(a.default,{style:R.actionButtonText,children:"\u270f\ufe0f"})})})]}),e.isMarkdown?(0,E.jsx)(j.default,{style:o,children:e.text}):(0,E.jsx)(a.default,{style:[R.messageText,"system"===e.type?R.systemMessageText:"log"===e.type?R.userMessageText:R.nonUserMessageText],selectable:"web"===x.default.OS,children:e.text}),"log"!==e.type&&"system"!==e.type&&(0,E.jsx)(a.default,{style:R.categoryLabel,children:s()})]}),{})})})},R=m.default.create({userMessageContainer:{marginVertical:1,alignSelf:"flex-start",maxWidth:"95%"},systemMessageContainer:{marginVertical:1,alignSelf:"flex-end",maxWidth:"95%"},messageContainer:{marginVertical:1,alignSelf:"flex-start",maxWidth:"95%"},messageBubble:{paddingHorizontal:8,paddingVertical:4,minWidth:60,maxWidth:"100%",borderRadius:12,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.18,shadowRadius:1,elevation:1},defaultBubble:{backgroundColor:"#f0f0f0"},expenseBubble:{backgroundColor:"#e8f5e8",borderColor:"#4caf50",borderWidth:1},actionBubble:{backgroundColor:"#e3f2fd",borderColor:"#2196f3",borderWidth:1},systemBubble:{backgroundColor:"#e3f2fd",borderColor:"#2196f3",borderWidth:1,borderRadius:12},systemMessage:{backgroundColor:"#e3f2fd",marginLeft:"15%",borderTopLeftRadius:20,borderTopRightRadius:5,borderBottomLeftRadius:20,borderBottomRightRadius:5},userMessage:{backgroundColor:"#f0f0f0",marginRight:"15%",borderTopLeftRadius:5,borderTopRightRadius:20,borderBottomLeftRadius:5,borderBottomRightRadius:20},messageHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:1,flexWrap:"nowrap"},actionButtons:{flexDirection:"row",gap:2,flexShrink:0},actionButton:{padding:4,borderRadius:4,backgroundColor:"rgba(0, 0, 0, 0.05)"},actionButtonText:{fontSize:14},timestamp:{fontSize:10,color:"#666",marginLeft:4},messageText:Object.assign({fontSize:15,lineHeight:17},"web"===x.default.OS?{userSelect:"text",WebkitUserSelect:"text"}:{}),userMessageText:{color:"#333"},systemMessageText:{color:"#1565c0",fontSize:14,textAlign:"left",fontWeight:"500"},nonUserMessageText:{color:"#333"},categoryLabel:{fontSize:11,color:"#666",fontStyle:"italic",marginTop:2}});var D=n(4037),W=n(2772);const M={isMarkdownEnabled:!0,enterToSend:!0,systemCurrency:"AUTO",layoutStyle:"chat"},H=[{code:"AUTO",name:"Auto-detect",symbol:"\ud83c\udf0d"},{code:"USD",name:"US Dollar",symbol:"$"},{code:"EUR",name:"Euro",symbol:"\u20ac"},{code:"GBP",name:"British Pound",symbol:"\xa3"},{code:"INR",name:"Indian Rupee",symbol:"\u20b9"},{code:"CAD",name:"Canadian Dollar",symbol:"C$"},{code:"AUD",name:"Australian Dollar",symbol:"A$"},{code:"JPY",name:"Japanese Yen",symbol:"\xa5"}],L=({onClose:e})=>{const[t,n]=(0,r.useState)(M),[o,i]=(0,r.useState)(!1),[l,s]=(0,r.useState)(!1);(0,r.useEffect)(()=>{d()},[]);const d=async()=>{try{const e=await k.getSettings();e&&n(Object.assign({},M,e))}catch(e){console.error("Error loading settings:",e)}},u=(e,o)=>{(async e=>{try{await k.saveSettings(e),n(e)}catch(t){console.error("Error saving settings:",t),y.default.alert("Error","Failed to save settings")}})(Object.assign({},t,{[e]:o}))},g=[{id:"chat",name:"Chat Style",icon:"\ud83d\udcac"},{id:"cards",name:"Card Layout",icon:"\ud83c\udccf"},{id:"list",name:"List View",icon:"\ud83d\udccb"},{id:"timeline",name:"Timeline Style",icon:"\u23f0"},{id:"magazine",name:"Magazine Layout",icon:"\ud83d\udcf0"},{id:"minimal",name:"Minimal Design",icon:"\u2728"}];return(0,E.jsxs)(b.SafeAreaView,{style:O.container,children:[(0,E.jsxs)(c.default,{style:O.header,children:[(0,E.jsx)(a.default,{style:O.headerTitle,children:"Settings"}),(0,E.jsx)(f.default,{onPress:e,style:O.closeButton,children:(0,E.jsx)(a.default,{style:O.closeButtonText,children:"\u2715"})})]}),(0,E.jsxs)(W.default,{style:O.content,children:[(0,E.jsxs)(c.default,{style:O.section,children:[(0,E.jsx)(a.default,{style:O.sectionTitle,children:"Text Input"}),(0,E.jsxs)(c.default,{style:O.settingItem,children:[(0,E.jsxs)(c.default,{style:O.settingInfo,children:[(0,E.jsx)(a.default,{style:O.settingLabel,children:"Enable Markdown"}),(0,E.jsx)(a.default,{style:O.settingDescription,children:"Format text with **bold**, *italic*, and other markdown syntax"})]}),(0,E.jsx)(D.default,{value:t.isMarkdownEnabled,onValueChange:e=>u("isMarkdownEnabled",e)})]}),(0,E.jsxs)(c.default,{style:O.settingItem,children:[(0,E.jsxs)(c.default,{style:O.settingInfo,children:[(0,E.jsx)(a.default,{style:O.settingLabel,children:"Enter to Send"}),(0,E.jsx)(a.default,{style:O.settingDescription,children:"Press Enter to send message (off = Enter adds new line)"})]}),(0,E.jsx)(D.default,{value:t.enterToSend,onValueChange:e=>u("enterToSend",e)})]})]}),(0,E.jsxs)(c.default,{style:O.section,children:[(0,E.jsx)(a.default,{style:O.sectionTitle,children:"Currency"}),(0,E.jsxs)(f.default,{style:O.settingItem,onPress:()=>{console.log("Currency picker tapped"),console.log("Setting showCurrencyModal to true"),i(!0)},children:[(0,E.jsxs)(c.default,{style:O.settingInfo,children:[(0,E.jsx)(a.default,{style:O.settingLabel,children:"Default Currency"}),(0,E.jsx)(a.default,{style:O.settingDescription,children:"Currency for expenses (when not explicitly specified)"}),(0,E.jsx)(a.default,{style:O.settingValue,children:(()=>{const e=H.find(e=>e.code===t.systemCurrency);return e?`${e.symbol} ${e.name}`:"Auto-detect"})()})]}),(0,E.jsx)(a.default,{style:O.arrow,children:"\u203a"})]})]}),(0,E.jsxs)(c.default,{style:O.section,children:[(0,E.jsx)(a.default,{style:O.sectionTitle,children:"Appearance"}),(0,E.jsxs)(f.default,{style:O.settingItem,onPress:()=>{console.log("Layout picker tapped"),console.log("Setting showLayoutModal to true"),s(!0)},children:[(0,E.jsxs)(c.default,{style:O.settingInfo,children:[(0,E.jsx)(a.default,{style:O.settingLabel,children:"Journal Layout"}),(0,E.jsx)(a.default,{style:O.settingDescription,children:"Choose how your journal entries are displayed"}),(0,E.jsx)(a.default,{style:O.settingValue,children:(()=>{const e=g.find(e=>e.id===t.layoutStyle);return e?`${e.icon} ${e.name}`:"\ud83d\udcac Chat Style"})()})]}),(0,E.jsx)(a.default,{style:O.arrow,children:"\u203a"})]})]}),(0,E.jsxs)(c.default,{style:O.section,children:[(0,E.jsx)(a.default,{style:O.sectionTitle,children:"About"}),(0,E.jsxs)(c.default,{style:O.settingItem,children:[(0,E.jsx)(a.default,{style:O.settingLabel,children:"Daily Tracker"}),(0,E.jsx)(a.default,{style:O.settingDescription,children:"Smart journal with automatic expense and task detection"})]})]})]}),(0,E.jsx)(p.default,{visible:o,animationType:"slide",transparent:!0,onRequestClose:()=>i(!1),children:(0,E.jsx)(c.default,{style:P.overlay,children:(0,E.jsxs)(c.default,{style:P.container,children:[(0,E.jsx)(a.default,{style:P.title,children:"Select Currency"}),(0,E.jsx)(a.default,{style:P.subtitle,children:"Choose your preferred currency:"}),(0,E.jsx)(W.default,{style:P.optionsList,showsVerticalScrollIndicator:!0,children:H.map(e=>(console.log(`Rendering currency option: ${e.name}`),(0,E.jsxs)(f.default,{style:[P.option,t.systemCurrency===e.code&&P.selectedOption],onPress:()=>{console.log(`Selected currency: ${e.name}`),u("systemCurrency",e.code),i(!1)},children:[(0,E.jsxs)(a.default,{style:[P.optionText,t.systemCurrency===e.code&&P.selectedOptionText],children:[e.symbol," ",e.name]}),t.systemCurrency===e.code&&(0,E.jsx)(a.default,{style:P.checkmark,children:"\u2713"})]},e.code)))}),(0,E.jsx)(f.default,{style:P.cancelButton,onPress:()=>i(!1),children:(0,E.jsx)(a.default,{style:P.cancelButtonText,children:"Cancel"})})]})})}),(0,E.jsx)(p.default,{visible:l,animationType:"slide",transparent:!0,onRequestClose:()=>s(!1),children:(0,E.jsx)(c.default,{style:P.overlay,children:(0,E.jsxs)(c.default,{style:P.container,children:[(0,E.jsx)(a.default,{style:P.title,children:"Select Layout Style"}),(0,E.jsx)(a.default,{style:P.subtitle,children:"Choose how your journal entries are displayed:"}),(0,E.jsx)(W.default,{style:P.optionsList,showsVerticalScrollIndicator:!0,children:g.map(e=>(console.log(`Rendering layout option: ${e.name}`),(0,E.jsxs)(f.default,{style:[P.option,t.layoutStyle===e.id&&P.selectedOption],onPress:()=>{console.log(`Selected layout: ${e.name}`),u("layoutStyle",e.id),s(!1)},children:[(0,E.jsxs)(a.default,{style:[P.optionText,t.layoutStyle===e.id&&P.selectedOptionText],children:[e.icon," ",e.name]}),t.layoutStyle===e.id&&(0,E.jsx)(a.default,{style:P.checkmark,children:"\u2713"})]},e.id)))}),(0,E.jsx)(f.default,{style:P.cancelButton,onPress:()=>s(!1),children:(0,E.jsx)(a.default,{style:P.cancelButtonText,children:"Cancel"})})]})})})]})},O=m.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},headerTitle:{fontSize:20,fontWeight:"bold",color:"#333"},closeButton:{padding:8,borderRadius:20,backgroundColor:"#f0f0f0"},closeButtonText:{fontSize:16,color:"#666",fontWeight:"bold"},content:{flex:1},section:{backgroundColor:"#fff",marginVertical:8,paddingVertical:8},sectionTitle:{fontSize:16,fontWeight:"bold",color:"#333",paddingHorizontal:16,paddingVertical:8,backgroundColor:"#f8f8f8"},settingItem:{flexDirection:"row",alignItems:"center",paddingHorizontal:16,paddingVertical:12,borderBottomWidth:1,borderBottomColor:"#f0f0f0"},settingInfo:{flex:1,marginRight:12},settingLabel:{fontSize:16,color:"#333",marginBottom:4},settingDescription:{fontSize:14,color:"#666",lineHeight:18},settingValue:{fontSize:14,color:"#007AFF",marginTop:4,fontWeight:"500"},arrow:{fontSize:20,color:"#ccc"}}),P=m.default.create({overlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",paddingHorizontal:20},container:{backgroundColor:"#fff",borderRadius:12,width:"100%",maxWidth:400,minHeight:300,maxHeight:"80%",paddingVertical:20},title:{fontSize:20,fontWeight:"bold",color:"#333",textAlign:"center",marginBottom:8},subtitle:{fontSize:16,color:"#666",textAlign:"center",marginBottom:20,paddingHorizontal:20},optionsList:{flexGrow:1,minHeight:200},option:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:20,paddingVertical:16,borderBottomWidth:1,borderBottomColor:"#f0f0f0",minHeight:50},selectedOption:{backgroundColor:"#e3f2fd"},optionText:{fontSize:16,color:"#333",flex:1},selectedOptionText:{color:"#1976d2",fontWeight:"500"},checkmark:{fontSize:18,color:"#1976d2",fontWeight:"bold"},cancelButton:{marginTop:20,marginHorizontal:20,paddingVertical:12,backgroundColor:"#f5f5f5",borderRadius:8,alignItems:"center"},cancelButtonText:{fontSize:16,color:"#333",fontWeight:"500"}}),F=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),V=()=>{const[e,t]=(0,r.useState)([]),[n,o]=(0,r.useState)(""),[i,l]=(0,r.useState)(!0),[s,d]=(0,r.useState)(0),m=(0,r.useRef)(null),w=(0,r.useRef)(null),[S,T]=(0,r.useState)(!0),[B,A]=(0,r.useState)(!1),[z,R]=(0,r.useState)("chat"),[D,W]=(0,r.useState)(""),[M,H]=(0,r.useState)(!1),[O,P]=(0,r.useState)([]);(0,r.useEffect)(()=>{console.log("\ud83d\udd0d Debug - Modal states:",{showSettings:B,showSearch:M})},[B,M]);const[V,_]=(0,r.useState)([]),[J,q]=(0,r.useState)([]),[Y,G]=(0,r.useState)(!1),[K,X]=(0,r.useState)(!1),[Q,Z]=(0,r.useState)(null),[ee,te]=(0,r.useState)(""),[ne,oe]=(0,r.useState)(""),[re,ae]=(0,r.useState)(""),ie=(0,r.useCallback)(async()=>{const e=(await k.getEntries()).sort((e,t)=>{if(Math.abs(e.timestamp.getTime()-t.timestamp.getTime())<2e3){if("system"===e.type&&"system"!==t.type)return 1;if("system"!==e.type&&"system"===t.type)return-1}return e.timestamp.getTime()-t.timestamp.getTime()});t(e),P(e)},[]),le=(0,r.useCallback)(e=>{if(0===e.length)return[];const t=[...e].sort((e,t)=>e.timestamp.getTime()-t.timestamp.getTime()),n=[];let o="";return t.forEach(e=>{const t=(0,C.default)(e.timestamp,"yyyy-MM-dd");t!==o&&(n.push({type:"dateSeparator",date:t,id:`date-${t}`}),o=t),n.push(e)}),n},[]);(0,r.useEffect)(()=>{if(!D.trim())return void P(e);const t=D.toLowerCase().trim(),n=e.filter(e=>{if(e.text.toLowerCase().includes(t))return!0;const n=(0,C.default)(e.timestamp,"yyyy-MM-dd"),o=(0,C.default)(e.timestamp,"MMMM dd, yyyy"),r=(0,C.default)(e.timestamp,"MMM dd");return!!(n.includes(t)||o.toLowerCase().includes(t)||r.toLowerCase().includes(t))||!!e.type.toLowerCase().includes(t)});P(n)},[D,e]);const se=(0,r.useCallback)(async()=>{try{const e=await k.getSettings();e&&(l(e.isMarkdownEnabled),T(e.enterToSend),R(e.layoutStyle||"chat"))}catch(e){console.error("Error loading settings:",e)}},[]),de=(0,r.useCallback)(async()=>{try{const[e,t]=await Promise.all([k.getExpenses(),k.getActionItems()]);_(e),q(t)}catch(e){console.error("Error loading expenses and action items:",e)}},[]);(0,r.useEffect)(()=>{ie(),se(),de()},[ie,se,de]),(0,r.useEffect)(()=>{},[e.length]);const ce=e=>{alert(e)},ue=async()=>{const e=n.trim();if(e)try{let t=e;const n=I.detectActionItem(e);(n||K)&&(t=e.replace(/^\s*\.\s*/,"\u2705 "));const r={id:F(),text:t,timestamp:new Date,type:"log",isMarkdown:i};await k.addEntry(r);const a=I.detectExpense(e);if(a||Y){const t=I.extractExpenseInfo(e,r.id);t?(t.autoDetected=a&&!Y,await k.addExpense(t),await pe(r.id,"expense")):Y&&y.default.alert("No Amount Found","Please include a numeric amount in your entry (e.g., 150, Rs200, $50)")}if(n||K){let t;K&&!n?t={id:F(),entryId:r.id,title:e,completed:!1,createdAt:new Date,autoDetected:!1}:(t=I.extractActionItem(e,r.id),t&&(t.autoDetected=n&&!K)),t&&(await k.addActionItem(t),await pe(r.id,"action"))}await ie(),await de(),o(""),G(!1),X(!1),setTimeout(()=>{m.current?.scrollToEnd({animated:!0})},200),setTimeout(()=>{w.current&&w.current.focus()},300)}catch(t){console.error("Error processing message:",t),ce("Failed to process message")}},fe=e=>{const t=[{text:"Edit Entry",onPress:()=>xe(e)}];"expense"!==e.type&&t.push({text:"Mark as Expense",onPress:()=>ge(e)}),"action"!==e.type&&t.push({text:"Mark as Action Item",onPress:()=>me(e)}),"log"!==e.type&&t.push({text:"Remove Category",onPress:()=>ye(e)}),t.push({text:"Delete Entry",onPress:()=>he(e),style:"destructive"},{text:"Cancel",style:"cancel"}),y.default.alert("Entry Options","What would you like to do with this entry?",t)},ge=async e=>{if("expense"===e.type)return;const t=I.extractExpenseInfo(e.text,e.id);t?(t.autoDetected=!1,await k.addExpense(t),await pe(e.id,"expense"),await de()):y.default.alert("Cannot Extract Expense","Could not find amount information in this entry. Please ensure it contains a monetary value.")},me=async e=>{if("action"===e.type)return;let t=I.extractActionItem(e.text,e.id);t?t.autoDetected=!1:t={id:F(),entryId:e.id,title:e.text.replace(/^\u2705\s*/,""),completed:!1,createdAt:new Date,autoDetected:!1},await k.addActionItem(t),await pe(e.id,"action"),await de()},ye=async e=>{try{if("expense"===e.type){const t=V.find(t=>t.entryId===e.id);t&&await k.deleteExpense(t.id)}else if("action"===e.type){const t=J.find(t=>t.entryId===e.id);t&&await k.deleteActionItem(t.id)}await pe(e.id,"log"),await de(),ce("Category removed")}catch(t){console.error("Error removing category:",t),ce("Failed to remove category")}},he=async e=>{console.log("handleDeleteEntry called for:",e.id,e.text);const t=async()=>{try{if(console.log("Deleting entry:",e.id),"expense"===e.type){const t=V.find(t=>t.entryId===e.id);t&&await k.deleteExpense(t.id)}else if("action"===e.type){const t=J.find(t=>t.entryId===e.id);t&&await k.deleteActionItem(t.id)}const t=(await k.getEntries()).filter(t=>t.id!==e.id);await k.saveEntries(t),await ie(),await de(),ce("Entry deleted")}catch(t){console.error("Error deleting entry:",t),ce("Failed to delete entry")}};"web"===x.default.OS?confirm("Are you sure you want to delete this entry?")&&await t():y.default.alert("Delete Entry","Are you sure you want to delete this entry?",[{text:"Cancel",style:"cancel"},{text:"Delete",style:"destructive",onPress:t}])},xe=e=>{if(Z(e),te(e.text.replace(/^\u2705\s*/,"")),"expense"===e.type){const t=V.find(t=>t.entryId===e.id);t&&(oe(t.amount.toString()),ae(t.category||""))}},pe=async(e,t)=>{try{const n=(await k.getEntries()).map(n=>n.id===e?Object.assign({},n,{type:t}):n);await k.saveEntries(n),await ie()}catch(n){console.error("Error updating entry type:",n),ce("Failed to update entry type")}};return(0,E.jsxs)(b.SafeAreaView,{style:N.container,children:[(0,E.jsxs)(c.default,{style:[N.header,{zIndex:1e4}],children:[(0,E.jsx)(a.default,{style:N.headerTitle,children:"Daily Journal"}),(0,E.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center",zIndex:10001},children:[(0,E.jsx)(f.default,{style:[N.settingsButton,{marginRight:8,zIndex:10002}],onPress:()=>{console.log("\ud83d\udd0d Search button pressed"),H(!M)},children:(0,E.jsx)(a.default,{style:N.settingsButtonText,children:"\ud83d\udd0d"})}),(0,E.jsx)(f.default,{style:[N.settingsButton,{zIndex:10003}],onPress:()=>{console.log("\u2699\ufe0f Settings button pressed"),A(!0)},children:(0,E.jsx)(a.default,{style:N.settingsButtonText,children:"\u2699\ufe0f"})})]})]}),M&&(0,E.jsxs)(c.default,{style:N.searchContainer,children:[(0,E.jsx)(u.default,{style:N.searchInput,placeholder:"Search entries by text, date, or type...",value:D,onChangeText:W,autoCapitalize:"none",clearButtonMode:"while-editing"}),D.length>0&&(0,E.jsx)(f.default,{style:N.clearButton,onPress:()=>W(""),children:(0,E.jsx)(a.default,{style:N.clearButtonText,children:"\u2715"})})]}),(0,E.jsx)(g.default,{ref:m,data:le(M?O:e),renderItem:({item:e})=>{if("type"in e&&"dateSeparator"===e.type)return(e=>{const t=new Date(e),n=new Date,o=new Date(n.getTime()-864e5);let r;return r=(0,C.default)(t,"yyyy-MM-dd")===(0,C.default)(n,"yyyy-MM-dd")?"Today":(0,C.default)(t,"yyyy-MM-dd")===(0,C.default)(o,"yyyy-MM-dd")?"Yesterday":(0,C.default)(t,"EEEE, MMMM d, yyyy"),(0,E.jsxs)(c.default,{style:N.dateSeparator,children:[(0,E.jsx)(c.default,{style:N.dateSeparatorLine}),(0,E.jsx)(a.default,{style:N.dateSeparatorText,children:r}),(0,E.jsx)(c.default,{style:N.dateSeparatorLine})]})})(e.date);const t=e,n="expense"===t.type?V.find(e=>e.entryId===t.id):void 0,o="action"===t.type?J.find(e=>e.entryId===t.id):void 0;switch(z){case"cards":return((e,t,n)=>(0,E.jsxs)(c.default,{style:U.cardContainer,children:[(0,E.jsxs)(c.default,{style:U.cardHeader,children:[(0,E.jsx)(a.default,{style:U.cardDate,children:(0,C.default)(e.timestamp,"MMM dd, yyyy")}),(0,E.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center",gap:4},children:[(0,E.jsx)(a.default,{style:U.cardTime,children:(0,C.default)(e.timestamp,"h:mm a")}),"system"!==e.type&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(f.default,{style:{padding:4,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:4},onPress:()=>xe(e),children:(0,E.jsx)(a.default,{style:{fontSize:12},children:"\u270f\ufe0f"})}),(0,E.jsx)(f.default,{style:{padding:4,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:4},onPress:()=>he(e),children:(0,E.jsx)(a.default,{style:{fontSize:12},children:"\ud83d\uddd1\ufe0f"})})]})]})]}),(0,E.jsxs)(c.default,{style:U.cardContent,children:[e.isMarkdown?(0,E.jsx)(j.default,{style:$,children:e.text}):(0,E.jsx)(a.default,{style:U.cardText,children:e.text}),t&&(0,E.jsx)(c.default,{style:U.expenseTag,children:(0,E.jsxs)(a.default,{style:U.expenseText,children:["\ud83d\udcb0 ",I.formatCurrency(t.amount,t.currency)]})}),n&&(0,E.jsx)(c.default,{style:U.actionTag,children:(0,E.jsx)(a.default,{style:U.actionText,children:"\u2705 Task"})})]})]}))(t,n,o);case"list":return((e,t,n)=>(0,E.jsxs)(c.default,{style:U.listContainer,children:[(0,E.jsxs)(c.default,{style:U.listLeft,children:[(0,E.jsx)(a.default,{style:U.listTime,children:(0,C.default)(e.timestamp,"h:mm a")}),(0,E.jsx)(c.default,{style:U.listIndicator})]}),(0,E.jsxs)(c.default,{style:U.listContent,children:[(0,E.jsxs)(c.default,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[(0,E.jsx)(c.default,{style:{flex:1}}),"system"!==e.type&&(0,E.jsxs)(c.default,{style:{flexDirection:"row",gap:4},children:[(0,E.jsx)(f.default,{style:{padding:4,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:4},onPress:()=>xe(e),children:(0,E.jsx)(a.default,{style:{fontSize:12},children:"\u270f\ufe0f"})}),(0,E.jsx)(f.default,{style:{padding:4,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:4},onPress:()=>he(e),children:(0,E.jsx)(a.default,{style:{fontSize:12},children:"\ud83d\uddd1\ufe0f"})})]})]}),e.isMarkdown?(0,E.jsx)(j.default,{style:$,children:e.text}):(0,E.jsx)(a.default,{style:U.listText,children:e.text}),(0,E.jsxs)(c.default,{style:U.listMeta,children:[t&&(0,E.jsxs)(a.default,{style:U.listExpense,children:["\ud83d\udcb0 ",I.formatCurrency(t.amount,t.currency)]}),n&&(0,E.jsx)(a.default,{style:U.listAction,children:"\u2705 Task"})]})]})]}))(t,n,o);case"timeline":return((e,t,n)=>(0,E.jsxs)(c.default,{style:U.timelineContainer,children:[(0,E.jsxs)(c.default,{style:U.timelineLeft,children:[(0,E.jsx)(c.default,{style:U.timelineDot}),(0,E.jsx)(c.default,{style:U.timelineLine})]}),(0,E.jsxs)(c.default,{style:U.timelineContent,children:[(0,E.jsxs)(c.default,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[(0,E.jsx)(a.default,{style:U.timelineDate,children:(0,C.default)(e.timestamp,"MMM dd, h:mm a")}),"system"!==e.type&&(0,E.jsxs)(c.default,{style:{flexDirection:"row",gap:4},children:[(0,E.jsx)(f.default,{style:{padding:4,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:4},onPress:()=>xe(e),children:(0,E.jsx)(a.default,{style:{fontSize:12},children:"\u270f\ufe0f"})}),(0,E.jsx)(f.default,{style:{padding:4,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:4},onPress:()=>he(e),children:(0,E.jsx)(a.default,{style:{fontSize:12},children:"\ud83d\uddd1\ufe0f"})})]})]}),e.isMarkdown?(0,E.jsx)(j.default,{style:$,children:e.text}):(0,E.jsx)(a.default,{style:U.timelineText,children:e.text}),(t||n)&&(0,E.jsxs)(c.default,{style:U.timelineTags,children:[t&&(0,E.jsxs)(a.default,{style:U.timelineExpense,children:["\ud83d\udcb0 ",I.formatCurrency(t.amount,t.currency)]}),n&&(0,E.jsx)(a.default,{style:U.timelineAction,children:"\u2705 Task"})]})]})]}))(t,n,o);case"magazine":return((e,t,n)=>(0,E.jsxs)(c.default,{style:U.magazineContainer,children:[(0,E.jsxs)(c.default,{style:U.magazineHeader,children:[(0,E.jsx)(a.default,{style:U.magazineDate,children:(0,C.default)(e.timestamp,"EEEE, MMMM dd")}),"system"!==e.type&&(0,E.jsxs)(c.default,{style:{flexDirection:"row",gap:4},children:[(0,E.jsx)(f.default,{style:{padding:4,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:4},onPress:()=>xe(e),children:(0,E.jsx)(a.default,{style:{fontSize:12},children:"\u270f\ufe0f"})}),(0,E.jsx)(f.default,{style:{padding:4,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:4},onPress:()=>he(e),children:(0,E.jsx)(a.default,{style:{fontSize:12},children:"\ud83d\uddd1\ufe0f"})})]})]}),(0,E.jsx)(c.default,{style:U.magazineBody,children:e.isMarkdown?(0,E.jsx)(j.default,{style:$,children:e.text}):(0,E.jsx)(a.default,{style:U.magazineText,children:e.text})}),(t||n)&&(0,E.jsxs)(c.default,{style:U.magazineFooter,children:[t&&(0,E.jsxs)(c.default,{style:U.magazineExpenseBlock,children:[(0,E.jsx)(a.default,{style:U.magazineExpenseLabel,children:"Expense"}),(0,E.jsx)(a.default,{style:U.magazineExpenseAmount,children:I.formatCurrency(t.amount,t.currency)})]}),n&&(0,E.jsxs)(c.default,{style:U.magazineActionBlock,children:[(0,E.jsx)(a.default,{style:U.magazineActionLabel,children:"Action Item"}),(0,E.jsx)(a.default,{style:U.magazineActionText,children:"Task"})]})]})]}))(t,n,o);case"minimal":return((e,t,n)=>(0,E.jsxs)(c.default,{style:U.minimalContainer,children:[(0,E.jsx)(c.default,{style:U.minimalContent,children:e.isMarkdown?(0,E.jsx)(j.default,{style:$,children:e.text}):(0,E.jsx)(a.default,{style:U.minimalText,children:e.text})}),(0,E.jsxs)(c.default,{style:U.minimalMeta,children:[(0,E.jsx)(a.default,{style:U.minimalTime,children:(0,C.default)(e.timestamp,"h:mm a")}),t&&(0,E.jsxs)(a.default,{style:U.minimalExpense,children:["\ud83d\udcb0",I.formatCurrency(t.amount,t.currency)]}),n&&(0,E.jsx)(a.default,{style:U.minimalAction,children:"\u2705"}),"system"!==e.type&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(f.default,{style:{padding:2,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:4,marginLeft:4},onPress:()=>xe(e),children:(0,E.jsx)(a.default,{style:{fontSize:10},children:"\u270f\ufe0f"})}),(0,E.jsx)(f.default,{style:{padding:2,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:4,marginLeft:2},onPress:()=>he(e),children:(0,E.jsx)(a.default,{style:{fontSize:10},children:"\ud83d\uddd1\ufe0f"})})]})]})]}))(t,n,o);default:return((e,t,n)=>(0,E.jsx)(v,{entry:e,onLongPress:fe,onEdit:xe,markdownStyles:$,expense:t,actionItem:n}))(t,n,o)}},keyExtractor:e=>("type"in e&&e.type,e.id),style:[N.messagesList,(e=>{switch(e){case"cards":return{paddingHorizontal:8};case"list":case"minimal":return{paddingHorizontal:0,backgroundColor:"#fff"};case"timeline":return{paddingHorizontal:0,backgroundColor:"#f8f9fa"};case"magazine":return{paddingHorizontal:0,backgroundColor:"#f5f5f5"};default:return{paddingHorizontal:16}}})(z)],showsVerticalScrollIndicator:!1,onLayout:()=>{m.current&&setTimeout(()=>{m.current?.scrollToEnd({animated:!1})},100)},onContentSizeChange:()=>{m.current&&setTimeout(()=>{m.current?.scrollToEnd({animated:!1})},100)},ListEmptyComponent:()=>{M?O.length:e.length;const t=M&&D.trim()?`No entries found matching "${D}"`:"No messages yet. Type a message below to get started!";return(0,E.jsx)(c.default,{style:{padding:20,alignItems:"center"},children:(0,E.jsx)(a.default,{style:{color:"#666",fontSize:16},children:t})})}}),(0,E.jsxs)(h.default,{behavior:"ios"===x.default.OS?"padding":"height",style:[N.inputContainer,{zIndex:1e4}],children:[(0,E.jsxs)(c.default,{style:N.quickActionsRow,children:[(0,E.jsx)(f.default,{style:[N.quickActionButton,Y&&N.quickActionButtonActive],onPress:()=>G(!Y),children:(0,E.jsx)(a.default,{style:[N.quickActionText,Y&&N.quickActionTextActive],children:"\ud83d\udcb0"})}),(0,E.jsx)(f.default,{style:[N.quickActionButton,K&&N.quickActionButtonActive],onPress:()=>X(!K),children:(0,E.jsx)(a.default,{style:[N.quickActionText,K&&N.quickActionTextActive],children:"\u2705"})})]}),(0,E.jsxs)(c.default,{style:N.inputRow,children:[(0,E.jsx)(u.default,{ref:w,style:N.textInput,value:n,onChangeText:o,placeholder:Y?"Type expense (e.g., 150 for coffee)...":K?"Type task description...":i?"Type a message (Markdown supported)...":"Type a message...",multiline:!0,maxLength:1e3,onSubmitEditing:S?ue:void 0,blurOnSubmit:S,returnKeyType:S?"send":"default"}),(0,E.jsx)(f.default,{style:[N.sendButton,!n.trim()&&N.sendButtonDisabled],onPress:ue,disabled:!n.trim(),children:(0,E.jsx)(a.default,{style:{color:"#fff",fontSize:16},children:"\u2192"})})]})]}),B&&(0,E.jsx)(p.default,{visible:B,animationType:"slide",presentationStyle:"formSheet",children:(0,E.jsx)(L,{onClose:()=>{A(!1),se()}})}),Q&&(0,E.jsx)(p.default,{visible:!!Q,animationType:"slide",transparent:!0,onRequestClose:()=>Z(null),children:(0,E.jsx)(c.default,{style:N.editModalOverlay,children:(0,E.jsxs)(c.default,{style:N.editModalContent,children:[(0,E.jsx)(a.default,{style:N.editModalTitle,children:"Edit Entry"}),(0,E.jsx)(a.default,{style:N.editLabel,children:"Text:"}),(0,E.jsx)(c.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:8},children:(0,E.jsx)(f.default,{style:[N.markdownToggle,Q.isMarkdown&&N.markdownToggleActive],onPress:()=>Z(Object.assign({},Q,{isMarkdown:!Q.isMarkdown})),children:(0,E.jsx)(a.default,{style:N.markdownToggleText,children:Q.isMarkdown?"\u2705 Markdown":"\u274c Plain Text"})})}),(0,E.jsx)(u.default,{style:N.editTextInput,value:ee,onChangeText:te,placeholder:"Entry text",multiline:!0,maxLength:1e3}),(0,E.jsx)(a.default,{style:N.editLabel,children:"Category:"}),(0,E.jsxs)(c.default,{style:N.categoryButtons,children:[(0,E.jsx)(f.default,{style:[N.categoryButton,"log"===Q.type&&N.categoryButtonActive],onPress:async()=>{"log"!==Q.type&&(await ye(Q),Z(Object.assign({},Q,{type:"log"})))},children:(0,E.jsx)(a.default,{style:N.categoryButtonText,children:"\ud83d\udcdd Log"})}),(0,E.jsx)(f.default,{style:[N.categoryButton,"expense"===Q.type&&N.categoryButtonActive],onPress:async()=>{if("expense"!==Q.type){await ge(Q);const e=V.find(e=>e.entryId===Q.id);e&&(oe(e.amount.toString()),ae(e.category||"")),Z(Object.assign({},Q,{type:"expense"}))}},children:(0,E.jsx)(a.default,{style:N.categoryButtonText,children:"\ud83d\udcb0 Expense"})}),(0,E.jsx)(f.default,{style:[N.categoryButton,"action"===Q.type&&N.categoryButtonActive],onPress:async()=>{"action"!==Q.type&&(await me(Q),Z(Object.assign({},Q,{type:"action"})))},children:(0,E.jsx)(a.default,{style:N.categoryButtonText,children:"\u2705 Task"})})]}),"expense"===Q.type&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(a.default,{style:N.editLabel,children:"Amount:"}),(0,E.jsx)(u.default,{style:N.editInput,value:ne,onChangeText:oe,placeholder:"150",keyboardType:"decimal-pad"}),(0,E.jsx)(a.default,{style:N.editLabel,children:"Category (optional):"}),(0,E.jsx)(u.default,{style:N.editInput,value:re,onChangeText:ae,placeholder:"Food, Transportation, etc."})]}),(0,E.jsxs)(c.default,{style:N.editModalButtons,children:[(0,E.jsx)(f.default,{style:[N.editModalButton,N.editModalButtonCancel],onPress:()=>{Z(null),te(""),oe(""),ae("")},children:(0,E.jsx)(a.default,{style:N.editModalButtonText,children:"Cancel"})}),(0,E.jsx)(f.default,{style:[N.editModalButton,N.editModalButtonSave],onPress:async()=>{if(Q&&ee.trim())try{const e=(await k.getEntries()).map(e=>e.id===Q.id?Object.assign({},e,{text:ee.trim(),type:Q.type,isMarkdown:Q.isMarkdown}):e);if(await k.saveEntries(e),"expense"===Q.type){const e=V.find(e=>e.entryId===Q.id);if(e&&ne){const t=parseFloat(ne);!isNaN(t)&&t>0&&await k.updateExpense(e.id,{amount:t,category:re||e.category,description:ee.trim()})}}if("action"===Q.type){let e=J.find(e=>e.entryId===Q.id);if(e)await k.updateActionItem(e.id,{title:ee.trim()});else{const e={id:F(),entryId:Q.id,title:ee.trim(),completed:!1,createdAt:new Date,autoDetected:!1};await k.addActionItem(e)}}await ie(),await de(),Z(null),te(""),oe(""),ae(""),ce("Entry updated")}catch(e){console.error("Error updating entry:",e),ce("Failed to update entry")}},children:(0,E.jsx)(a.default,{style:[N.editModalButtonText,{color:"#fff"}],children:"Save"})})]})]})})})]})},N=m.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:12,paddingVertical:8,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},headerTitle:{fontSize:20,fontWeight:"bold",color:"#333"},searchContainer:{flexDirection:"row",alignItems:"center",paddingHorizontal:16,paddingVertical:8,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},searchInput:{flex:1,height:36,paddingHorizontal:12,backgroundColor:"#f8f8f8",borderRadius:18,fontSize:16,color:"#333"},clearButton:{marginLeft:8,width:24,height:24,borderRadius:12,backgroundColor:"#ccc",alignItems:"center",justifyContent:"center"},clearButtonText:{fontSize:12,color:"#666",fontWeight:"bold"},settingsButton:{paddingHorizontal:8,paddingVertical:6,borderRadius:16,backgroundColor:"#f0f0f0",marginLeft:8},settingsButtonText:{fontSize:16},messagesList:{flex:1,paddingHorizontal:8,paddingVertical:4},inputContainer:{paddingHorizontal:8,paddingVertical:4,paddingBottom:"ios"===x.default.OS?6:4,backgroundColor:"#fff",borderTopWidth:1,borderTopColor:"#e0e0e0"},quickActionsRow:{flexDirection:"row",marginBottom:4,gap:4},quickActionButton:{paddingHorizontal:10,paddingVertical:4,borderRadius:16,backgroundColor:"#f0f0f0",borderWidth:2,borderColor:"#e0e0e0"},quickActionButtonActive:{backgroundColor:"#007AFF",borderColor:"#0056b3"},quickActionText:{fontSize:18},quickActionTextActive:{transform:[{scale:1.1}]},inputRow:{flexDirection:"row",alignItems:"flex-end"},textInput:{flex:1,borderWidth:1,borderColor:"#e0e0e0",borderRadius:20,paddingHorizontal:16,paddingVertical:12,marginRight:12,maxHeight:100,fontSize:16,backgroundColor:"#f8f8f8"},sendButton:{backgroundColor:"#007AFF",width:44,height:44,borderRadius:22,justifyContent:"center",alignItems:"center"},sendButtonDisabled:{backgroundColor:"#ccc"},editModalOverlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",padding:20},editModalContent:{backgroundColor:"#fff",borderRadius:12,padding:20,width:"100%",maxWidth:500},editModalTitle:{fontSize:20,fontWeight:"bold",marginBottom:16,color:"#333"},editLabel:{fontSize:14,fontWeight:"600",color:"#666",marginTop:12,marginBottom:6},editInput:{borderWidth:1,borderColor:"#ddd",borderRadius:8,padding:12,fontSize:16,backgroundColor:"#f9f9f9"},editTextInput:{borderWidth:1,borderColor:"#ddd",borderRadius:8,padding:12,fontSize:16,backgroundColor:"#f9f9f9",minHeight:80,maxHeight:200,textAlignVertical:"top"},editModalButtons:{flexDirection:"row",justifyContent:"flex-end",marginTop:20,gap:12},editModalButton:{paddingHorizontal:20,paddingVertical:10,borderRadius:8,minWidth:80,alignItems:"center"},editModalButtonCancel:{backgroundColor:"#f0f0f0"},editModalButtonSave:{backgroundColor:"#007AFF"},editModalButtonText:{fontSize:16,fontWeight:"600",color:"#333"},categoryButtons:{flexDirection:"row",gap:8,marginBottom:12},categoryButton:{flex:1,paddingVertical:8,paddingHorizontal:12,borderRadius:8,backgroundColor:"#f0f0f0",borderWidth:2,borderColor:"#e0e0e0",alignItems:"center"},categoryButtonActive:{backgroundColor:"#007AFF",borderColor:"#0056b3"},categoryButtonText:{fontSize:14,fontWeight:"600",color:"#333"},markdownToggle:{paddingVertical:6,paddingHorizontal:12,borderRadius:6,backgroundColor:"#f0f0f0",borderWidth:1,borderColor:"#e0e0e0"},markdownToggleActive:{backgroundColor:"#e8f5e8",borderColor:"#4caf50"},markdownToggleText:{fontSize:12,fontWeight:"600",color:"#333"},dateSeparator:{flexDirection:"row",alignItems:"center",marginVertical:16,paddingHorizontal:8},dateSeparatorLine:{flex:1,height:1,backgroundColor:"#e0e0e0"},dateSeparatorText:{marginHorizontal:12,fontSize:14,fontWeight:"600",color:"#666",backgroundColor:"#f5f5f5",paddingHorizontal:8,paddingVertical:4,borderRadius:12}}),U=m.default.create({cardContainer:{backgroundColor:"#fff",borderRadius:12,marginVertical:6,marginHorizontal:8,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3,overflow:"hidden"},cardHeader:{flexDirection:"row",justifyContent:"space-between",paddingHorizontal:16,paddingVertical:8,backgroundColor:"#f8f9fa",borderBottomWidth:1,borderBottomColor:"#e9ecef"},cardDate:{fontSize:14,fontWeight:"600",color:"#495057"},cardTime:{fontSize:12,color:"#6c757d"},cardContent:{padding:16},cardText:{fontSize:16,lineHeight:22,color:"#212529",marginBottom:8},expenseTag:{backgroundColor:"#d4edda",borderRadius:12,paddingHorizontal:8,paddingVertical:4,alignSelf:"flex-start",marginTop:8},expenseText:{fontSize:12,color:"#155724",fontWeight:"500"},actionTag:{backgroundColor:"#cce5ff",borderRadius:12,paddingHorizontal:8,paddingVertical:4,alignSelf:"flex-start",marginTop:8},actionText:{fontSize:12,color:"#004085",fontWeight:"500"},listContainer:{flexDirection:"row",paddingVertical:12,paddingHorizontal:16,borderBottomWidth:1,borderBottomColor:"#e9ecef"},listLeft:{alignItems:"center",marginRight:16,width:60},listTime:{fontSize:12,color:"#6c757d",fontWeight:"500",marginBottom:4},listIndicator:{width:8,height:8,borderRadius:4,backgroundColor:"#007bff"},listContent:{flex:1},listText:{fontSize:16,lineHeight:22,color:"#212529",marginBottom:6},listMeta:{flexDirection:"row",gap:12},listExpense:{fontSize:12,color:"#28a745",fontWeight:"500"},listAction:{fontSize:12,color:"#007bff",fontWeight:"500"},timelineContainer:{flexDirection:"row",paddingVertical:16,paddingHorizontal:16},timelineLeft:{alignItems:"center",marginRight:16,width:20},timelineDot:{width:12,height:12,borderRadius:6,backgroundColor:"#007bff",zIndex:1},timelineLine:{width:2,flex:1,backgroundColor:"#dee2e6",marginTop:4},timelineContent:{flex:1,backgroundColor:"#fff",borderRadius:8,padding:16,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.05,shadowRadius:2,elevation:1},timelineDate:{fontSize:12,color:"#6c757d",fontWeight:"500",marginBottom:8},timelineText:{fontSize:16,lineHeight:22,color:"#212529"},timelineTags:{flexDirection:"row",marginTop:12,gap:8},timelineExpense:{fontSize:12,color:"#28a745",backgroundColor:"#d4edda",paddingHorizontal:8,paddingVertical:2,borderRadius:8},timelineAction:{fontSize:12,color:"#007bff",backgroundColor:"#cce5ff",paddingHorizontal:8,paddingVertical:2,borderRadius:8},magazineContainer:{backgroundColor:"#fff",marginVertical:8,marginHorizontal:16,borderRadius:8,overflow:"hidden",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},magazineHeader:{backgroundColor:"#343a40",paddingHorizontal:20,paddingVertical:12},magazineDate:{fontSize:14,color:"#fff",fontWeight:"600",textTransform:"uppercase",letterSpacing:.5},magazineBody:{paddingHorizontal:20,paddingVertical:16},magazineText:{fontSize:17,lineHeight:26,color:"#212529",fontFamily:"ios"===x.default.OS?"Georgia":"serif"},magazineFooter:{flexDirection:"row",paddingHorizontal:20,paddingBottom:16,gap:16},magazineExpenseBlock:{flex:1},magazineExpenseLabel:{fontSize:10,color:"#6c757d",fontWeight:"600",textTransform:"uppercase",marginBottom:2},magazineExpenseAmount:{fontSize:16,color:"#28a745",fontWeight:"600"},magazineActionBlock:{flex:1},magazineActionLabel:{fontSize:10,color:"#6c757d",fontWeight:"600",textTransform:"uppercase",marginBottom:2},magazineActionText:{fontSize:16,color:"#007bff",fontWeight:"600"},minimalContainer:{flexDirection:"row",paddingVertical:0,paddingHorizontal:20,alignItems:"flex-start"},minimalContent:{flex:1,marginRight:16},minimalText:{fontSize:16,lineHeight:22,color:"#212529"},minimalMeta:{flexDirection:"row",alignItems:"center",gap:8},minimalTime:{fontSize:12,color:"#9ca3af"},minimalExpense:{fontSize:12,color:"#28a745"},minimalAction:{fontSize:12,color:"#007bff"}}),$=m.default.create({body:{fontSize:16,color:"#333",lineHeight:20},heading1:{fontSize:20,fontWeight:"bold",marginBottom:8},heading2:{fontSize:18,fontWeight:"bold",marginBottom:6},strong:{fontWeight:"bold"},em:{fontStyle:"italic"},code_inline:{backgroundColor:"#f0f0f0",paddingHorizontal:4,paddingVertical:2,borderRadius:3,fontFamily:"monospace"}});var _=n(2467),J=n(1862);const q=({item:e,onToggleComplete:t,onEdit:n,onDelete:o})=>(0,E.jsxs)(c.default,{style:[K.itemCard,e.completed&&K.completedCard],children:[(0,E.jsxs)(f.default,{style:K.itemHeader,onPress:()=>t(e.id),activeOpacity:.7,children:[(0,E.jsx)(_.default,{name:e.completed?"checkbox":"checkbox-outline",size:24,color:e.completed?"#4caf50":"#666"}),(0,E.jsx)(c.default,{style:{flex:1,marginLeft:8},children:(0,E.jsx)(j.default,{style:{body:{fontSize:16,color:e.completed?"#999":"#333",textDecorationLine:e.completed?"line-through":"none"}},children:e.title})})]}),e.description&&e.description!==e.title&&(0,E.jsx)(a.default,{style:[K.itemDescription,e.completed&&K.completedText],children:e.description}),(0,E.jsxs)(c.default,{style:K.itemFooter,children:[(0,E.jsxs)(a.default,{style:K.itemDate,children:["Created: ",(0,C.default)(e.createdAt,"MMM d, yyyy HH:mm")]}),(0,E.jsxs)(c.default,{style:K.itemActions,children:[(0,E.jsx)(f.default,{style:K.actionButton,onPress:()=>n(e),activeOpacity:.7,hitSlop:{top:15,bottom:15,left:15,right:15},children:(0,E.jsx)(_.default,{name:"pencil",size:18,color:"#666"})}),(0,E.jsx)(f.default,{style:[K.actionButton,K.deleteButton],onPress:()=>o(e.id),activeOpacity:.7,hitSlop:{top:15,bottom:15,left:15,right:15},children:(0,E.jsx)(_.default,{name:"trash",size:18,color:"#fff"})})]})]})]}),Y=({visible:e,item:t,onSave:n,onCancel:o})=>{const[i,l]=(0,r.useState)(""),[s,d]=(0,r.useState)("");(0,r.useEffect)(()=>{t&&(l(t.title),d(t.description||""))},[t]);return(0,E.jsx)(p.default,{visible:e,animationType:"slide",transparent:!0,children:(0,E.jsx)(c.default,{style:K.modalContainer,children:(0,E.jsxs)(c.default,{style:K.modalContent,children:[(0,E.jsx)(a.default,{style:K.modalTitle,children:"Edit Action Item"}),(0,E.jsx)(u.default,{style:K.modalInput,value:i,onChangeText:l,placeholder:"Title",multiline:!0}),(0,E.jsx)(u.default,{style:[K.modalInput,K.modalInputLarge],value:s,onChangeText:d,placeholder:"Description (optional)",multiline:!0}),(0,E.jsxs)(c.default,{style:K.modalButtons,children:[(0,E.jsx)(f.default,{style:K.modalButton,onPress:o,children:(0,E.jsx)(a.default,{style:K.modalButtonText,children:"Cancel"})}),(0,E.jsx)(f.default,{style:[K.modalButton,K.modalButtonPrimary],onPress:()=>{if(!t||!i.trim())return;const e=Object.assign({},t,{title:i.trim(),description:s.trim()});n(e)},children:(0,E.jsx)(a.default,{style:[K.modalButtonText,K.modalButtonTextPrimary],children:"Save"})})]})]})})})},G=()=>{const[e,t]=(0,r.useState)([]),[n,o]=(0,r.useState)("all"),[i,l]=(0,r.useState)(null),[s,d]=(0,r.useState)(!1),u=(0,r.useCallback)(async()=>{const e=await k.getActionItems();t(e.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()))},[]);(0,r.useEffect)(()=>{u()},[u]),(0,J.useFocusEffect)((0,r.useCallback)(()=>{u()},[u]));const m=e.filter(e=>{switch(n){case"pending":return!e.completed;case"completed":return e.completed;default:return!0}}),y=async n=>{const o=e.find(e=>e.id===n);if(!o)return;const r=Object.assign({},o,{completed:!o.completed});await k.updateActionItem(n,{completed:!o.completed}),t(e=>e.map(e=>e.id===n?r:e))},h=e=>{l(e),d(!0)},x=async e=>{if("undefined"===typeof window||window.confirm("Are you sure you want to delete this action item?"))try{await k.deleteActionItem(e),t(t=>t.filter(t=>t.id!==e))}catch(n){console.error("Error deleting action item:",n)}},p=e=>[K.filterButton,n===e&&K.filterButtonActive],j=e=>[K.filterButtonText,n===e&&K.filterButtonTextActive],C=e.filter(e=>!e.completed).length,w=e.filter(e=>e.completed).length;return(0,E.jsxs)(b.SafeAreaView,{style:K.container,children:[(0,E.jsxs)(c.default,{style:K.header,children:[(0,E.jsx)(a.default,{style:K.headerTitle,children:"Action Items"}),(0,E.jsx)(c.default,{style:K.stats,children:(0,E.jsxs)(a.default,{style:K.statsText,children:[C," pending \u2022 ",w," completed"]})})]}),(0,E.jsxs)(c.default,{style:K.filterContainer,children:[(0,E.jsx)(f.default,{style:p("all"),onPress:()=>o("all"),children:(0,E.jsx)(a.default,{style:j("all"),children:"All"})}),(0,E.jsx)(f.default,{style:p("pending"),onPress:()=>o("pending"),children:(0,E.jsx)(a.default,{style:j("pending"),children:"Pending"})}),(0,E.jsx)(f.default,{style:p("completed"),onPress:()=>o("completed"),children:(0,E.jsx)(a.default,{style:j("completed"),children:"Completed"})})]}),0===m.length?(0,E.jsxs)(c.default,{style:K.emptyContainer,children:[(0,E.jsx)(_.default,{name:"checkbox-outline",size:64,color:"#ccc"}),(0,E.jsx)(a.default,{style:K.emptyText,children:"all"===n?"No action items yet":"pending"===n?"No pending action items":"No completed action items"}),(0,E.jsx)(a.default,{style:K.emptySubtext,children:"Add entries in your journal to create action items"})]}):(0,E.jsx)(g.default,{data:m,renderItem:({item:e})=>(0,E.jsx)(q,{item:e,onToggleComplete:y,onEdit:h,onDelete:x}),keyExtractor:e=>e.id,style:K.list,showsVerticalScrollIndicator:!1}),(0,E.jsx)(Y,{visible:s,item:i,onSave:async e=>{await k.updateActionItem(e.id,{title:e.title,description:e.description}),t(t=>t.map(t=>t.id===e.id?e:t)),d(!1),l(null)},onCancel:()=>{d(!1),l(null)}})]})},K=m.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},header:{paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},headerTitle:{fontSize:20,fontWeight:"bold",color:"#333",marginBottom:4},stats:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},statsText:{fontSize:14,color:"#666"},filterContainer:{flexDirection:"row",paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},filterButton:{paddingHorizontal:16,paddingVertical:8,marginRight:8,borderRadius:20,backgroundColor:"#f0f0f0"},filterButtonActive:{backgroundColor:"#007AFF"},filterButtonText:{fontSize:14,color:"#666",fontWeight:"500"},filterButtonTextActive:{color:"#fff"},list:{flex:1,paddingHorizontal:16},itemCard:{backgroundColor:"#fff",marginVertical:6,padding:16,borderRadius:12,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},completedCard:{backgroundColor:"#f8f8f8",opacity:.8},itemHeader:{flexDirection:"row",alignItems:"flex-start",marginBottom:8},itemTitle:{flex:1,fontSize:16,fontWeight:"600",color:"#333",marginLeft:12,lineHeight:20},completedText:{textDecorationLine:"line-through",color:"#666"},itemDescription:{fontSize:14,color:"#666",lineHeight:18,marginBottom:12,marginLeft:36},itemFooter:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:8},itemDate:{fontSize:12,color:"#999"},itemActions:{flexDirection:"row"},actionButton:{padding:10,marginLeft:8,minWidth:36,minHeight:36,alignItems:"center",justifyContent:"center",borderRadius:6,backgroundColor:"rgba(0,0,0,0.05)",borderWidth:1,borderColor:"rgba(0,0,0,0.1)"},deleteButton:{backgroundColor:"#f44336",borderColor:"#d32f2f"},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",paddingHorizontal:40},emptyText:{fontSize:18,fontWeight:"600",color:"#666",marginTop:16,textAlign:"center"},emptySubtext:{fontSize:14,color:"#999",marginTop:8,textAlign:"center",lineHeight:20},modalContainer:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"#fff",borderRadius:12,padding:20,width:"90%",maxWidth:400},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:16,textAlign:"center"},modalInput:{borderWidth:1,borderColor:"#e0e0e0",borderRadius:8,padding:12,marginBottom:12,fontSize:16,minHeight:44},modalInputLarge:{minHeight:80,textAlignVertical:"top"},modalButtons:{flexDirection:"row",justifyContent:"space-between",marginTop:16},modalButton:{flex:1,paddingVertical:12,borderRadius:8,marginHorizontal:4,backgroundColor:"#f0f0f0"},modalButtonPrimary:{backgroundColor:"#007AFF"},modalButtonText:{textAlign:"center",fontSize:16,fontWeight:"600",color:"#333"},modalButtonTextPrimary:{color:"#fff"}});var X=n(7832),Q=n(3815),Z=n(8327);const ee=({expense:e,onEdit:t,onDelete:n})=>(0,E.jsxs)(c.default,{style:oe.expenseCard,children:[(0,E.jsxs)(c.default,{style:oe.expenseHeader,children:[(0,E.jsxs)(c.default,{style:oe.expenseAmount,children:[(0,E.jsx)(a.default,{style:oe.amountText,children:I.formatCurrency(e.amount,e.currency)}),e.category&&(0,E.jsx)(a.default,{style:oe.categoryText,children:e.category})]}),(0,E.jsxs)(c.default,{style:oe.expenseActions,children:[(0,E.jsx)(f.default,{style:oe.actionButton,onPress:()=>t(e),activeOpacity:.7,hitSlop:{top:15,bottom:15,left:15,right:15},children:(0,E.jsx)(_.default,{name:"pencil",size:18,color:"#666"})}),(0,E.jsx)(f.default,{style:[oe.actionButton,oe.deleteButton],onPress:()=>n(e.id),activeOpacity:.7,hitSlop:{top:15,bottom:15,left:15,right:15},children:(0,E.jsx)(_.default,{name:"trash",size:18,color:"#fff"})})]})]}),(0,E.jsx)(a.default,{style:oe.expenseDescription,numberOfLines:2,children:e.description}),(0,E.jsx)(a.default,{style:oe.expenseDate,children:(0,C.default)(e.createdAt,"MMM d, yyyy HH:mm")})]}),te=({visible:e,expense:t,onSave:n,onCancel:o})=>{const[i,l]=(0,r.useState)(""),[s,d]=(0,r.useState)("USD"),[g,m]=(0,r.useState)(""),[h,x]=(0,r.useState)("");(0,r.useEffect)(()=>{t&&(l(t.amount.toString()),d(t.currency),m(t.description),x(t.category||""))},[t]);return(0,E.jsx)(p.default,{visible:e,animationType:"slide",transparent:!0,children:(0,E.jsx)(c.default,{style:oe.modalContainer,children:(0,E.jsxs)(c.default,{style:oe.modalContent,children:[(0,E.jsx)(a.default,{style:oe.modalTitle,children:"Edit Expense"}),(0,E.jsx)(u.default,{style:oe.modalInput,value:i,onChangeText:l,placeholder:"Amount",keyboardType:"numeric"}),(0,E.jsxs)(c.default,{style:oe.currencyContainer,children:[(0,E.jsx)(a.default,{style:oe.inputLabel,children:"Currency:"}),(0,E.jsx)(c.default,{style:oe.currencyOptions,children:["USD","INR","EUR","GBP"].map(e=>(0,E.jsx)(f.default,{style:[oe.currencyButton,s===e&&oe.currencyButtonActive],onPress:()=>d(e),children:(0,E.jsx)(a.default,{style:[oe.currencyButtonText,s===e&&oe.currencyButtonTextActive],children:e})},e))})]}),(0,E.jsx)(u.default,{style:[oe.modalInput,oe.modalInputLarge],value:g,onChangeText:m,placeholder:"Description",multiline:!0}),(0,E.jsxs)(c.default,{style:oe.categoryContainer,children:[(0,E.jsx)(a.default,{style:oe.inputLabel,children:"Category (optional):"}),(0,E.jsx)(c.default,{style:oe.categoryOptions,children:["Food","Transportation","Shopping","Entertainment","Bills","Healthcare","Education","Travel","Other"].map(e=>(0,E.jsx)(f.default,{style:[oe.categoryButton,h===e&&oe.categoryButtonActive],onPress:()=>x(h===e?"":e),children:(0,E.jsx)(a.default,{style:[oe.categoryButtonText,h===e&&oe.categoryButtonTextActive],children:e})},e))})]}),(0,E.jsxs)(c.default,{style:oe.modalButtons,children:[(0,E.jsx)(f.default,{style:oe.modalButton,onPress:o,children:(0,E.jsx)(a.default,{style:oe.modalButtonText,children:"Cancel"})}),(0,E.jsx)(f.default,{style:[oe.modalButton,oe.modalButtonPrimary],onPress:()=>{if(!t||!i.trim()||!g.trim())return;const e=parseFloat(i);if(isNaN(e)||e<=0)return void y.default.alert("Invalid Amount","Please enter a valid amount greater than 0");const o=Object.assign({},t,{amount:e,currency:s,description:g.trim(),category:h.trim()||void 0});n(o)},children:(0,E.jsx)(a.default,{style:[oe.modalButtonText,oe.modalButtonTextPrimary],children:"Save"})})]})]})})})},ne=()=>{const[e,t]=(0,r.useState)([]),[n,o]=(0,r.useState)("all"),[i,l]=(0,r.useState)(null),[s,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)("list"),y=(0,r.useCallback)(async()=>{const e=await k.getExpenses();t(e.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()))},[]);(0,r.useEffect)(()=>{y()},[y]),(0,J.useFocusEffect)((0,r.useCallback)(()=>{y()},[y]));const h=e.filter(e=>{if("thisMonth"===n){const t=new Date,n=(0,X.default)(t),o=(0,Q.default)(t);return(0,Z.default)(e.createdAt,{start:n,end:o})}return!0}),x=e=>{const t={};return e.forEach(e=>{const n=e.category||"Other";t[n]||(t[n]={amount:0,count:0,currency:e.currency}),t[n].amount+=e.amount,t[n].count+=1}),Object.entries(t).map(([e,t])=>({category:e,amount:t.amount,count:t.count,currency:t.currency,formatted:I.formatCurrency(t.amount,t.currency)})).sort((e,t)=>t.amount-e.amount)},p=e=>{l(e),d(!0)},j=async e=>{if("undefined"===typeof window||window.confirm("Are you sure you want to delete this expense?"))try{await k.deleteExpense(e),t(t=>t.filter(t=>t.id!==e))}catch(n){console.error("Error deleting expense:",n)}},w=e=>[oe.filterButton,n===e&&oe.filterButtonActive],S=e=>[oe.filterButtonText,n===e&&oe.filterButtonTextActive];return(0,E.jsxs)(b.SafeAreaView,{style:oe.container,children:[(0,E.jsxs)(c.default,{style:oe.header,children:[(0,E.jsx)(a.default,{style:oe.headerTitle,children:"Expenses"}),(0,E.jsx)(c.default,{style:oe.totalsContainer,children:0===h.length?(0,E.jsxs)(c.default,{style:oe.totalContainer,children:[(0,E.jsx)(a.default,{style:oe.totalLabel,children:"Total:"}),(0,E.jsx)(a.default,{style:oe.totalAmount,children:"$0.00"})]}):(e=>{if(0===e.length)return[];const t={};return e.forEach(e=>{t[e.currency]=(t[e.currency]||0)+e.amount}),Object.keys(t).map(e=>({currency:e,amount:t[e],formatted:I.formatCurrency(t[e],e)}))})(h).map(e=>(0,E.jsxs)(c.default,{style:oe.totalContainer,children:[(0,E.jsxs)(a.default,{style:oe.totalLabel,children:[e.currency," Total:"]}),(0,E.jsx)(a.default,{style:oe.totalAmount,children:e.formatted})]},e.currency))})]}),(0,E.jsxs)(c.default,{style:oe.filterContainer,children:[(0,E.jsx)(f.default,{style:w("all"),onPress:()=>o("all"),children:(0,E.jsx)(a.default,{style:S("all"),children:"All Time"})}),(0,E.jsx)(f.default,{style:w("thisMonth"),onPress:()=>o("thisMonth"),children:(0,E.jsx)(a.default,{style:S("thisMonth"),children:"This Month"})})]}),(0,E.jsxs)(c.default,{style:oe.viewToggleContainer,children:[(0,E.jsx)(f.default,{style:[oe.viewToggleButton,"list"===u&&oe.viewToggleButtonActive],onPress:()=>m("list"),children:(0,E.jsx)(a.default,{style:[oe.viewToggleText,"list"===u&&oe.viewToggleTextActive],children:"List"})}),(0,E.jsx)(f.default,{style:[oe.viewToggleButton,"analytics"===u&&oe.viewToggleButtonActive],onPress:()=>m("analytics"),children:(0,E.jsx)(a.default,{style:[oe.viewToggleText,"analytics"===u&&oe.viewToggleTextActive],children:"Analytics"})})]}),0===h.length?(0,E.jsxs)(c.default,{style:oe.emptyContainer,children:[(0,E.jsx)(_.default,{name:"receipt-outline",size:64,color:"#ccc"}),(0,E.jsx)(a.default,{style:oe.emptyText,children:"all"===n?"No expenses yet":"No expenses this month"}),(0,E.jsx)(a.default,{style:oe.emptySubtext,children:"Add entries in your journal to track expenses"})]}):"list"===u?(0,E.jsx)(g.default,{data:h,renderItem:({item:e})=>(0,E.jsx)(ee,{expense:e,onEdit:p,onDelete:j}),keyExtractor:e=>e.id,style:oe.list,showsVerticalScrollIndicator:!1}):(0,E.jsxs)(W.default,{style:oe.analyticsContainer,showsVerticalScrollIndicator:!1,children:[(0,E.jsxs)(c.default,{style:oe.analyticsSection,children:[(0,E.jsx)(a.default,{style:oe.analyticsSectionTitle,children:"\ud83d\udcca Category Breakdown"}),x(h).map((e,t)=>(0,E.jsxs)(c.default,{style:oe.categoryAnalyticsItem,children:[(0,E.jsxs)(c.default,{style:oe.categoryAnalyticsInfo,children:[(0,E.jsx)(a.default,{style:oe.categoryAnalyticsName,children:e.category}),(0,E.jsxs)(a.default,{style:oe.categoryAnalyticsCount,children:[e.count," ",1===e.count?"expense":"expenses"]})]}),(0,E.jsx)(a.default,{style:oe.categoryAnalyticsAmount,children:e.formatted})]},e.category))]}),(0,E.jsxs)(c.default,{style:oe.analyticsSection,children:[(0,E.jsx)(a.default,{style:oe.analyticsSectionTitle,children:"\ud83d\udcc8 Monthly Trends"}),(()=>{const t={};return e.forEach(e=>{const n=(0,C.default)(e.createdAt,"MMM yyyy");t[n]||(t[n]={amount:0,count:0}),t[n].amount+=e.amount,t[n].count+=1}),Object.entries(t).map(([e,t])=>({month:e,amount:t.amount,count:t.count})).sort((e,t)=>new Date(e.month).getTime()-new Date(t.month).getTime())})().map((e,t)=>(0,E.jsxs)(c.default,{style:oe.trendItem,children:[(0,E.jsx)(a.default,{style:oe.trendMonth,children:e.month}),(0,E.jsxs)(c.default,{style:{alignItems:"flex-end"},children:[(0,E.jsx)(a.default,{style:oe.trendAmount,children:I.formatCurrency(e.amount,"USD")}),(0,E.jsxs)(a.default,{style:oe.categoryAnalyticsCount,children:[e.count," ",1===e.count?"expense":"expenses"]})]})]},e.month))]}),(0,E.jsxs)(c.default,{style:oe.analyticsSection,children:[(0,E.jsx)(a.default,{style:oe.analyticsSectionTitle,children:"\ud83d\udccb Quick Stats"}),(0,E.jsxs)(c.default,{style:oe.trendItem,children:[(0,E.jsx)(a.default,{style:oe.trendMonth,children:"Average per expense"}),(0,E.jsx)(a.default,{style:oe.trendAmount,children:h.length>0?I.formatCurrency(h.reduce((e,t)=>e+t.amount,0)/h.length,h[0].currency):"$0.00"})]}),(0,E.jsxs)(c.default,{style:oe.trendItem,children:[(0,E.jsx)(a.default,{style:oe.trendMonth,children:"Most expensive category"}),(0,E.jsx)(a.default,{style:oe.trendAmount,children:x(h)[0]?.category||"None"})]}),(0,E.jsxs)(c.default,{style:oe.trendItem,children:[(0,E.jsx)(a.default,{style:oe.trendMonth,children:"Total categories"}),(0,E.jsx)(a.default,{style:oe.trendAmount,children:x(h).length})]})]})]}),(0,E.jsx)(te,{visible:s,expense:i,onSave:async e=>{await k.updateExpense(e.id,{amount:e.amount,currency:e.currency,description:e.description,category:e.category}),t(t=>t.map(t=>t.id===e.id?e:t)),d(!1),l(null)},onCancel:()=>{d(!1),l(null)}})]})},oe=m.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},header:{paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},headerTitle:{fontSize:20,fontWeight:"bold",color:"#333",marginBottom:8},totalsContainer:{paddingHorizontal:16,paddingTop:8},totalContainer:{flexDirection:"row",alignItems:"center",marginBottom:4},totalLabel:{fontSize:14,color:"#666",marginRight:8},totalAmount:{fontSize:16,fontWeight:"bold",color:"#2e7d32"},filterContainer:{flexDirection:"row",paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},filterButton:{paddingHorizontal:16,paddingVertical:8,marginRight:8,borderRadius:20,backgroundColor:"#f0f0f0"},filterButtonActive:{backgroundColor:"#007AFF"},filterButtonText:{fontSize:14,color:"#666",fontWeight:"500"},filterButtonTextActive:{color:"#fff"},list:{flex:1,paddingHorizontal:16},expenseCard:{backgroundColor:"#fff",marginVertical:6,padding:16,borderRadius:12,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},expenseHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},expenseAmount:{flex:1},amountText:{fontSize:18,fontWeight:"bold",color:"#2e7d32"},categoryText:{fontSize:12,color:"#666",marginTop:2,backgroundColor:"#f0f0f0",paddingHorizontal:8,paddingVertical:2,borderRadius:10,alignSelf:"flex-start"},expenseActions:{flexDirection:"row"},actionButton:{padding:10,marginLeft:8,minWidth:36,minHeight:36,alignItems:"center",justifyContent:"center",borderRadius:6,backgroundColor:"rgba(0,0,0,0.05)",borderWidth:1,borderColor:"rgba(0,0,0,0.1)"},deleteButton:{backgroundColor:"#f44336",borderColor:"#d32f2f"},expenseDescription:{fontSize:14,color:"#333",lineHeight:18,marginBottom:8},expenseDate:{fontSize:12,color:"#999"},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",paddingHorizontal:40},emptyText:{fontSize:18,fontWeight:"600",color:"#666",marginTop:16,textAlign:"center"},emptySubtext:{fontSize:14,color:"#999",marginTop:8,textAlign:"center",lineHeight:20},modalContainer:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"#fff",borderRadius:12,padding:20,width:"90%",maxWidth:400,maxHeight:"80%"},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:16,textAlign:"center"},modalInput:{borderWidth:1,borderColor:"#e0e0e0",borderRadius:8,padding:12,marginBottom:12,fontSize:16,minHeight:44},modalInputLarge:{minHeight:80,textAlignVertical:"top"},inputLabel:{fontSize:14,fontWeight:"600",color:"#333",marginBottom:8},currencyContainer:{marginBottom:12},currencyOptions:{flexDirection:"row",flexWrap:"wrap"},currencyButton:{paddingHorizontal:12,paddingVertical:6,marginRight:8,marginBottom:8,borderRadius:16,backgroundColor:"#f0f0f0",borderWidth:1,borderColor:"#e0e0e0"},currencyButtonActive:{backgroundColor:"#007AFF",borderColor:"#007AFF"},currencyButtonText:{fontSize:14,color:"#666",fontWeight:"500"},currencyButtonTextActive:{color:"#fff"},categoryContainer:{marginBottom:16},categoryOptions:{flexDirection:"row",flexWrap:"wrap"},categoryButton:{paddingHorizontal:12,paddingVertical:6,marginRight:8,marginBottom:8,borderRadius:16,backgroundColor:"#f0f0f0",borderWidth:1,borderColor:"#e0e0e0"},categoryButtonActive:{backgroundColor:"#4caf50",borderColor:"#4caf50"},categoryButtonText:{fontSize:12,color:"#666",fontWeight:"500"},categoryButtonTextActive:{color:"#fff"},modalButtons:{flexDirection:"row",justifyContent:"space-between",marginTop:16},modalButton:{flex:1,paddingVertical:12,borderRadius:8,marginHorizontal:4,backgroundColor:"#f0f0f0"},modalButtonPrimary:{backgroundColor:"#007AFF"},modalButtonText:{textAlign:"center",fontSize:16,fontWeight:"600",color:"#333"},modalButtonTextPrimary:{color:"#fff"},viewToggleContainer:{flexDirection:"row",paddingHorizontal:16,paddingVertical:8,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},viewToggleButton:{flex:1,paddingVertical:8,paddingHorizontal:16,marginHorizontal:4,borderRadius:16,backgroundColor:"#f0f0f0",alignItems:"center"},viewToggleButtonActive:{backgroundColor:"#007AFF"},viewToggleText:{fontSize:14,fontWeight:"600",color:"#666"},viewToggleTextActive:{color:"#fff"},analyticsContainer:{flex:1,paddingHorizontal:16},analyticsSection:{backgroundColor:"#fff",borderRadius:12,padding:16,marginVertical:8},analyticsSectionTitle:{fontSize:16,fontWeight:"bold",color:"#333",marginBottom:12},categoryAnalyticsItem:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:8,borderBottomWidth:1,borderBottomColor:"#f0f0f0"},categoryAnalyticsInfo:{flex:1},categoryAnalyticsName:{fontSize:14,fontWeight:"600",color:"#333"},categoryAnalyticsCount:{fontSize:12,color:"#666",marginTop:2},categoryAnalyticsAmount:{fontSize:14,fontWeight:"bold",color:"#2e7d32"},trendItem:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:8,borderBottomWidth:1,borderBottomColor:"#f0f0f0"},trendMonth:{fontSize:14,fontWeight:"600",color:"#333"},trendAmount:{fontSize:14,fontWeight:"bold",color:"#2e7d32"}});var re=n(6725),ae=n(1514),ie=n(1706),le=n(7610),se=n(9068),de=n(9007);const ce=()=>{const[e,t]=(0,r.useState)(null),[n,o]=(0,r.useState)("month"),[i,l]=(0,r.useState)(!0),s=(0,r.useCallback)(async()=>{l(!0);try{const[e,o,r]=await Promise.all([k.getEntries(),k.getExpenses(),k.getActionItems()]),a=new Date,i=(0,ae.default)(a,1),l=(0,ie.default)(a,1),s=((t=>{const n="week"===t?i:"month"===t?l:null;n&&e.filter(e=>e.timestamp>=n),n&&o.filter(e=>e.createdAt>=n),n&&r.filter(e=>e.createdAt>=n)})(n),e.length),d=e.filter(e=>e.timestamp>=i).length,c=e.filter(e=>e.timestamp>=l).length,u={},f={};o.forEach(e=>{u[e.currency]=(u[e.currency]||0)+e.amount}),o.filter(e=>e.createdAt>=l).forEach(e=>{f[e.currency]=(f[e.currency]||0)+e.amount});const g=r.length,m=r.filter(e=>e.completed).length,y=g-m,h=g>0?m/g*100:0,x={};e.forEach(e=>{const t=(0,C.default)(e.timestamp,"EEEE");x[t]=(x[t]||0)+1});const p=Object.entries(x).reduce((e,t)=>x[e[0]]>x[t[0]]?e:t,["Monday",0])[0]||"No data",b=e.length>0?e.length/Math.max(1,Math.ceil((a.getTime()-e[0].timestamp.getTime())/864e5)):0,j={};o.forEach(e=>{const t=e.category||"Other";j[t]||(j[t]={amount:0,currency:e.currency}),j[t].amount+=e.amount});const w=Object.entries(j).map(([e,t])=>({category:e,amount:t.amount,currency:t.currency})).sort((e,t)=>t.amount-e.amount).slice(0,5),S=[];for(let t=6;t>=0;t--){const n=(0,le.default)(a,t),i=(0,se.default)(n),l=(0,de.default)(n),s=e.filter(e=>(0,Z.default)(e.timestamp,{start:i,end:l})).length,d=o.filter(e=>(0,Z.default)(e.createdAt,{start:i,end:l})).length,c=r.filter(e=>(0,Z.default)(e.createdAt,{start:i,end:l})).length;S.push({date:(0,C.default)(n,"MMM dd"),entries:s,expenses:d,actions:c})}t({totalEntries:s,entriesThisWeek:d,entriesThisMonth:c,totalExpenses:Object.entries(u).map(([e,t])=>({currency:e,amount:t})),expensesThisMonth:Object.entries(f).map(([e,t])=>({currency:e,amount:t})),totalActionItems:g,completedActionItems:m,pendingActionItems:y,completionRate:h,averageEntriesPerDay:b,mostActiveDay:p,topExpenseCategories:w,recentActivity:S})}catch(e){console.error("Error calculating analytics:",e)}finally{l(!1)}},[n]);return(0,J.useFocusEffect)((0,r.useCallback)(()=>{s()},[s])),i||!e?(0,E.jsx)(b.SafeAreaView,{style:ue.container,children:(0,E.jsx)(a.default,{style:ue.loadingText,children:"Loading analytics..."})}):(0,E.jsxs)(b.SafeAreaView,{style:ue.container,children:[(0,E.jsx)(c.default,{style:ue.header,children:(0,E.jsx)(a.default,{style:ue.headerTitle,children:"Analytics & Insights"})}),(0,E.jsxs)(W.default,{style:ue.content,showsVerticalScrollIndicator:!1,children:[(0,E.jsx)(c.default,{style:ue.periodSelector,children:["week","month","all"].map(e=>(0,E.jsx)(f.default,{style:[ue.periodButton,n===e&&ue.periodButtonActive],onPress:()=>o(e),children:(0,E.jsx)(a.default,{style:[ue.periodButtonText,n===e&&ue.periodButtonTextActive],children:"all"===e?"All Time":`This ${e.charAt(0).toUpperCase()+e.slice(1)}`})},e))}),(0,E.jsxs)(c.default,{style:ue.summaryGrid,children:[(0,E.jsxs)(c.default,{style:ue.summaryCard,children:[(0,E.jsx)(a.default,{style:ue.summaryNumber,children:e.totalEntries}),(0,E.jsx)(a.default,{style:ue.summaryLabel,children:"Total Entries"})]}),(0,E.jsxs)(c.default,{style:ue.summaryCard,children:[(0,E.jsx)(a.default,{style:ue.summaryNumber,children:e.totalActionItems}),(0,E.jsx)(a.default,{style:ue.summaryLabel,children:"Action Items"})]}),(0,E.jsxs)(c.default,{style:ue.summaryCard,children:[(0,E.jsxs)(a.default,{style:ue.summaryNumber,children:[e.completionRate.toFixed(0),"%"]}),(0,E.jsx)(a.default,{style:ue.summaryLabel,children:"Completion Rate"})]}),(0,E.jsxs)(c.default,{style:ue.summaryCard,children:[(0,E.jsx)(a.default,{style:ue.summaryNumber,children:e.averageEntriesPerDay.toFixed(1)}),(0,E.jsx)(a.default,{style:ue.summaryLabel,children:"Avg Entries/Day"})]})]}),(0,E.jsxs)(c.default,{style:ue.section,children:[(0,E.jsx)(a.default,{style:ue.sectionTitle,children:"\ud83d\udcb0 Spending Overview"}),e.totalExpenses.length>0?(0,E.jsx)(c.default,{style:ue.expenseList,children:e.totalExpenses.map((e,t)=>(0,E.jsxs)(c.default,{style:ue.expenseItem,children:[(0,E.jsx)(a.default,{style:ue.expenseAmount,children:I.formatCurrency(e.amount,e.currency)}),(0,E.jsx)(a.default,{style:ue.expenseLabel,children:"Total Spent"})]},e.currency))}):(0,E.jsx)(a.default,{style:ue.emptyText,children:"No expenses recorded yet"})]}),e.topExpenseCategories.length>0&&(0,E.jsxs)(c.default,{style:ue.section,children:[(0,E.jsx)(a.default,{style:ue.sectionTitle,children:"\ud83d\udcca Top Spending Categories"}),(0,E.jsx)(c.default,{style:ue.categoryList,children:e.topExpenseCategories.map((t,n)=>(0,E.jsxs)(c.default,{style:ue.categoryItem,children:[(0,E.jsxs)(c.default,{style:ue.categoryInfo,children:[(0,E.jsx)(a.default,{style:ue.categoryName,children:t.category}),(0,E.jsx)(a.default,{style:ue.categoryAmount,children:I.formatCurrency(t.amount,t.currency)})]}),(0,E.jsx)(c.default,{style:[ue.categoryBar,{width:t.amount/e.topExpenseCategories[0].amount*100+"%"}]})]},t.category))})]}),(0,E.jsxs)(c.default,{style:ue.section,children:[(0,E.jsx)(a.default,{style:ue.sectionTitle,children:"\ud83d\udcc8 Activity Patterns"}),(0,E.jsxs)(c.default,{style:ue.patternCard,children:[(0,E.jsx)(a.default,{style:ue.patternLabel,children:"Most Active Day"}),(0,E.jsx)(a.default,{style:ue.patternValue,children:e.mostActiveDay})]})]}),(0,E.jsxs)(c.default,{style:ue.section,children:[(0,E.jsx)(a.default,{style:ue.sectionTitle,children:"\ud83d\udcc5 Recent Activity (Last 7 Days)"}),(0,E.jsx)(c.default,{style:ue.chartContainer,children:e.recentActivity.map((t,n)=>{const o=Math.max(...e.recentActivity.map(e=>e.entries)),r=Math.max(...e.recentActivity.map(e=>e.expenses)),i=Math.max(...e.recentActivity.map(e=>e.actions)),l=Math.max(o,r,i,1),s=Math.max(4,t.entries/l*50),d=Math.max(4,t.expenses/l*50),u=Math.max(4,t.actions/l*50);return(0,E.jsxs)(c.default,{style:ue.chartDay,children:[(0,E.jsxs)(c.default,{style:ue.chartBars,children:[(0,E.jsx)(c.default,{style:[ue.chartBar,ue.entriesBar,{height:s}]}),(0,E.jsx)(c.default,{style:[ue.chartBar,ue.expensesBar,{height:d}]}),(0,E.jsx)(c.default,{style:[ue.chartBar,ue.actionsBar,{height:u}]})]}),(0,E.jsx)(a.default,{style:ue.chartDate,children:t.date})]},t.date)})}),(0,E.jsxs)(c.default,{style:ue.legend,children:[(0,E.jsxs)(c.default,{style:ue.legendItem,children:[(0,E.jsx)(c.default,{style:[ue.legendColor,ue.entriesBar]}),(0,E.jsx)(a.default,{style:ue.legendText,children:"Entries"})]}),(0,E.jsxs)(c.default,{style:ue.legendItem,children:[(0,E.jsx)(c.default,{style:[ue.legendColor,ue.expensesBar]}),(0,E.jsx)(a.default,{style:ue.legendText,children:"Expenses"})]}),(0,E.jsxs)(c.default,{style:ue.legendItem,children:[(0,E.jsx)(c.default,{style:[ue.legendColor,ue.actionsBar]}),(0,E.jsx)(a.default,{style:ue.legendText,children:"Actions"})]})]})]}),(0,E.jsxs)(c.default,{style:ue.section,children:[(0,E.jsx)(a.default,{style:ue.sectionTitle,children:"\ud83d\udca1 Insights"}),(0,E.jsxs)(c.default,{style:ue.insightsList,children:[e.averageEntriesPerDay>3&&(0,E.jsx)(c.default,{style:ue.insightCard,children:(0,E.jsxs)(a.default,{style:ue.insightText,children:["\ud83d\udd25 You're on fire! Averaging ",e.averageEntriesPerDay.toFixed(1)," entries per day"]})}),e.completionRate>75&&(0,E.jsx)(c.default,{style:ue.insightCard,children:(0,E.jsxs)(a.default,{style:ue.insightText,children:["\u2b50 Great job! You complete ",e.completionRate.toFixed(0),"% of your action items"]})}),e.pendingActionItems>5&&(0,E.jsx)(c.default,{style:ue.insightCard,children:(0,E.jsxs)(a.default,{style:ue.insightText,children:["\u26a0\ufe0f You have ",e.pendingActionItems," pending action items. Consider reviewing them!"]})}),0===e.totalExpenses.length&&e.totalEntries>10&&(0,E.jsx)(c.default,{style:ue.insightCard,children:(0,E.jsx)(a.default,{style:ue.insightText,children:"\ud83d\udcb8 No expenses tracked yet. Try adding some spending entries to track your budget!"})})]})]})]})]})},ue=m.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},header:{paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},headerTitle:{fontSize:20,fontWeight:"bold",color:"#333"},loadingText:{textAlign:"center",marginTop:50,fontSize:16,color:"#666"},content:{flex:1},periodSelector:{flexDirection:"row",paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},periodButton:{flex:1,paddingVertical:8,paddingHorizontal:12,marginHorizontal:4,borderRadius:16,backgroundColor:"#f0f0f0",alignItems:"center"},periodButtonActive:{backgroundColor:"#007AFF"},periodButtonText:{fontSize:14,fontWeight:"600",color:"#666"},periodButtonTextActive:{color:"#fff"},summaryGrid:{flexDirection:"row",flexWrap:"wrap",paddingHorizontal:16,paddingTop:16,gap:12},summaryCard:{width:(re.default.get("window").width-44)/2,backgroundColor:"#fff",padding:16,borderRadius:12,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},summaryNumber:{fontSize:24,fontWeight:"bold",color:"#333",marginBottom:4},summaryLabel:{fontSize:12,color:"#666",textAlign:"center"},section:{marginTop:16,paddingHorizontal:16},sectionTitle:{fontSize:18,fontWeight:"bold",color:"#333",marginBottom:12},expenseList:{backgroundColor:"#fff",borderRadius:12,padding:16},expenseItem:{alignItems:"center",marginBottom:8},expenseAmount:{fontSize:20,fontWeight:"bold",color:"#2e7d32"},expenseLabel:{fontSize:12,color:"#666",marginTop:2},categoryList:{backgroundColor:"#fff",borderRadius:12,padding:16},categoryItem:{marginBottom:12,position:"relative"},categoryInfo:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:4,zIndex:1},categoryName:{fontSize:14,fontWeight:"600",color:"#333"},categoryAmount:{fontSize:14,fontWeight:"bold",color:"#2e7d32"},categoryBar:{height:4,backgroundColor:"#007AFF",borderRadius:2,position:"absolute",bottom:0,left:0,opacity:.3},patternCard:{backgroundColor:"#fff",borderRadius:12,padding:16,alignItems:"center"},patternLabel:{fontSize:14,color:"#666",marginBottom:4},patternValue:{fontSize:18,fontWeight:"bold",color:"#333"},chartContainer:{backgroundColor:"#fff",borderRadius:12,padding:16,flexDirection:"row",justifyContent:"space-around",alignItems:"flex-end",height:100,marginBottom:8},chartDay:{alignItems:"center",flex:1},chartBars:{flexDirection:"row",alignItems:"flex-end",height:50,marginBottom:8,gap:2},chartBar:{width:6,borderRadius:3,minHeight:4},entriesBar:{backgroundColor:"#007AFF"},expensesBar:{backgroundColor:"#2e7d32"},actionsBar:{backgroundColor:"#ff9800"},chartDate:{fontSize:10,color:"#666"},legend:{flexDirection:"row",justifyContent:"center",marginTop:12,gap:16},legendItem:{flexDirection:"row",alignItems:"center"},legendColor:{width:8,height:8,borderRadius:4,marginRight:6},legendText:{fontSize:12,color:"#666"},insightsList:{gap:8},insightCard:{backgroundColor:"#fff",borderRadius:12,padding:16,borderLeftWidth:4,borderLeftColor:"#007AFF"},insightText:{fontSize:14,color:"#333",lineHeight:20},emptyText:{textAlign:"center",color:"#666",fontSize:14,backgroundColor:"#fff",borderRadius:12,padding:20}});m.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:16,paddingVertical:12,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},headerTitle:{fontSize:20,fontWeight:"bold",color:"#333"},closeButton:{padding:8,borderRadius:20,backgroundColor:"#f0f0f0"},closeButtonText:{fontSize:16,color:"#666",fontWeight:"bold"},content:{flex:1,paddingHorizontal:16},subtitle:{fontSize:16,color:"#666",textAlign:"center",marginVertical:20,lineHeight:22},optionCard:{backgroundColor:"#fff",borderRadius:12,padding:16,marginBottom:16,borderWidth:2,borderColor:"transparent",shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},selectedCard:{borderColor:"#007AFF",backgroundColor:"#f8f9ff"},optionHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:8},optionTitleRow:{flexDirection:"row",alignItems:"center",flex:1},optionPreview:{fontSize:28,marginRight:12},optionTitleContainer:{flex:1,flexDirection:"row",alignItems:"center"},optionName:{fontSize:18,fontWeight:"bold",color:"#333",marginRight:8},currentBadge:{backgroundColor:"#007AFF",color:"#fff",fontSize:10,fontWeight:"bold",paddingHorizontal:6,paddingVertical:2,borderRadius:10,overflow:"hidden"},optionDescription:{fontSize:14,color:"#666",marginBottom:12,lineHeight:20},featuresContainer:{marginTop:4},featureRow:{flexDirection:"row",alignItems:"flex-start",marginBottom:4},featureBullet:{fontSize:16,color:"#007AFF",marginRight:8,marginTop:1},featureText:{fontSize:13,color:"#555",flex:1,lineHeight:18},radioButton:{width:24,height:24,borderRadius:12,borderWidth:2,borderColor:"#ddd",justifyContent:"center",alignItems:"center"},radioButtonSelected:{borderColor:"#007AFF"},radioButtonInner:{width:12,height:12,borderRadius:6,backgroundColor:"#007AFF"},footer:{padding:16,backgroundColor:"#fff",borderTopWidth:1,borderTopColor:"#e0e0e0"},selectButton:{backgroundColor:"#007AFF",borderRadius:12,paddingVertical:16,alignItems:"center"},selectButtonDisabled:{backgroundColor:"#f0f0f0"},selectButtonText:{color:"#fff",fontSize:16,fontWeight:"bold"},selectButtonTextDisabled:{color:"#999"}});const fe=(0,s.default)();function ge(){return(0,E.jsxs)(d.SafeAreaProvider,{children:[(0,E.jsx)(i.StatusBar,{style:"dark"}),(0,E.jsx)(l.default,{children:(0,E.jsxs)(fe.Navigator,{screenOptions:({route:e})=>({tabBarIcon:({focused:t,color:n,size:o})=>{let r;return r="Journal"===e.name?"\ud83d\udcdd":"ActionItems"===e.name?"\u2705":"Expenses"===e.name?"\ud83d\udcb0":"Analytics"===e.name?"\ud83d\udcca":"\u2753",(0,E.jsx)(a.default,{style:{fontSize:o,color:n},children:r})},tabBarActiveTintColor:"#007AFF",tabBarInactiveTintColor:"gray",tabBarStyle:{backgroundColor:"#fff",borderTopWidth:1,borderTopColor:"#e0e0e0",paddingBottom:5,paddingTop:5,height:60},headerShown:!1}),children:[(0,E.jsx)(fe.Screen,{name:"Journal",component:V,options:{tabBarLabel:"Journal"}}),(0,E.jsx)(fe.Screen,{name:"ActionItems",component:G,options:{tabBarLabel:"Tasks"}}),(0,E.jsx)(fe.Screen,{name:"Expenses",component:ne,options:{tabBarLabel:"Expenses"}}),(0,E.jsx)(fe.Screen,{name:"Analytics",component:ce,options:{tabBarLabel:"Analytics"}})]})})]})}(0,o.default)(ge),(0,o.default)(ge)}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,(()=>{var e=[];n.O=(t,o,r,a)=>{if(!o){var i=1/0;for(c=0;c<e.length;c++){for(var[o,r,a]=e[c],l=!0,s=0;s<o.length;s++)(!1&a||i>=a)&&Object.keys(n.O).every(e=>n.O[e](o[s]))?o.splice(s--,1):(l=!1,a<i&&(i=a));if(l){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,r,a]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/DailyTracker/",(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,a,[i,l,s]=o,d=0;if(i.some(t=>0!==e[t])){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(s)var c=s(n)}for(t&&t(o);d<i.length;d++)a=i[d],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[546],()=>n(7217));o=n.O(o)})();
//# sourceMappingURL=main.efbbde1c.js.map