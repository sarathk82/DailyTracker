{"version":3,"file":"static/js/main.df5a3638.js","mappings":"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","sources":["src/utils/storage.ts","src/utils/textAnalysis.ts","src/components/MessageBubble.tsx","src/screens/SettingsScreen.tsx","src/screens/JournalScreen.tsx","src/screens/ActionItemsScreen.tsx","src/screens/ExpensesScreen.tsx","src/screens/AnalyticsScreen.tsx","src/screens/LayoutSelectionScreen.tsx","App.tsx","index.ts","webpack/bootstrap","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Entry, ActionItem, Expense, SettingsData } from '../types';\n\nconst ENTRIES_KEY = '@daily_tracker_entries';\nconst ACTION_ITEMS_KEY = '@daily_tracker_action_items';\nconst EXPENSES_KEY = '@daily_tracker_expenses';\nconst SETTINGS_KEY = '@daily_tracker_settings';\n\nexport class StorageService {\n  // Entries\n  static async getEntries(): Promise<Entry[]> {\n    try {\n      const jsonValue = await AsyncStorage.getItem(ENTRIES_KEY);\n      if (jsonValue != null) {\n        const entries = JSON.parse(jsonValue);\n        // Convert timestamp strings back to Date objects and ensure type preservation\n        const restoredEntries = entries.map((entry: any) => ({\n          ...entry,\n          timestamp: new Date(entry.timestamp),\n          // Ensure type is preserved as literal type\n          type: entry.type as 'log' | 'action' | 'expense' | 'system',\n          // Preserve markdown flag if it exists\n          isMarkdown: entry.isMarkdown || false\n        }));\n        \n        // Sort entries to maintain conversation flow\n        const sortedEntries = restoredEntries.sort((a: Entry, b: Entry) => {\n          // If timestamps are within 2 seconds of each other, maintain user-system alternation\n          const timeDiff = Math.abs(a.timestamp.getTime() - b.timestamp.getTime());\n          if (timeDiff < 2000) {\n            // If one is a system message and the other isn't, maintain the conversation flow\n            if (a.type === 'system' && b.type !== 'system') return 1;\n            if (a.type !== 'system' && b.type === 'system') return -1;\n          }\n          return a.timestamp.getTime() - b.timestamp.getTime();\n        });\n        return sortedEntries;\n      }\n      return [];\n    } catch (e) {\n      console.error('Error getting entries:', e);\n      return [];\n    }\n  }\n\n  static async saveEntries(entries: Entry[]): Promise<void> {\n    try {\n      const jsonValue = JSON.stringify(entries);\n      await AsyncStorage.setItem(ENTRIES_KEY, jsonValue);\n    } catch (e) {\n      console.error('Error saving entries:', e);\n    }\n  }\n\n  static async addEntry(entry: Entry): Promise<void> {\n    try {\n      const entries = await this.getEntries();\n      entries.push(entry);\n      await this.saveEntries(entries);\n    } catch (e) {\n      console.error('Error adding entry:', e);\n    }\n  }\n\n  // Action Items\n  static async getActionItems(): Promise<ActionItem[]> {\n    try {\n      const jsonValue = await AsyncStorage.getItem(ACTION_ITEMS_KEY);\n      if (jsonValue != null) {\n        const actionItems = JSON.parse(jsonValue);\n        return actionItems.map((item: any) => ({\n          ...item,\n          createdAt: new Date(item.createdAt),\n          dueDate: item.dueDate ? new Date(item.dueDate) : undefined,\n        }));\n      }\n      return [];\n    } catch (e) {\n      console.error('Error getting action items:', e);\n      return [];\n    }\n  }\n\n  static async saveActionItems(actionItems: ActionItem[]): Promise<void> {\n    try {\n      const jsonValue = JSON.stringify(actionItems);\n      await AsyncStorage.setItem(ACTION_ITEMS_KEY, jsonValue);\n    } catch (e) {\n      console.error('Error saving action items:', e);\n    }\n  }\n\n  static async addActionItem(actionItem: ActionItem): Promise<void> {\n    try {\n      const actionItems = await this.getActionItems();\n      actionItems.push(actionItem);\n      await this.saveActionItems(actionItems);\n    } catch (e) {\n      console.error('Error adding action item:', e);\n    }\n  }\n\n  static async updateActionItem(id: string, updates: Partial<ActionItem>): Promise<void> {\n    try {\n      const actionItems = await this.getActionItems();\n      const index = actionItems.findIndex(item => item.id === id);\n      if (index !== -1) {\n        actionItems[index] = { ...actionItems[index], ...updates };\n      }\n      await this.saveActionItems(actionItems);\n    } catch (e) {\n      console.error('Error updating action item:', e);\n    }\n  }\n\n  static async deleteActionItem(id: string): Promise<void> {\n    try {\n      const actionItems = await this.getActionItems();\n      const filteredItems = actionItems.filter(item => item.id !== id);\n      await this.saveActionItems(filteredItems);\n    } catch (e) {\n      console.error('Error deleting action item:', e);\n    }\n  }\n\n  // Expenses\n  static async getExpenses(): Promise<Expense[]> {\n    try {\n      const jsonValue = await AsyncStorage.getItem(EXPENSES_KEY);\n      if (jsonValue != null) {\n        const expenses = JSON.parse(jsonValue);\n        const mappedExpenses = expenses.map((expense: any) => ({\n          ...expense,\n          createdAt: new Date(expense.createdAt),\n        }));\n        return mappedExpenses;\n      }\n      return [];\n    } catch (e) {\n      console.error('Error getting expenses:', e);\n      return [];\n    }\n  }\n\n  static async saveExpenses(expenses: Expense[]): Promise<void> {\n    try {\n      const jsonValue = JSON.stringify(expenses);\n      await AsyncStorage.setItem(EXPENSES_KEY, jsonValue);\n    } catch (e) {\n      console.error('Error saving expenses:', e);\n    }\n  }\n\n  static async addExpense(expense: Expense): Promise<void> {\n    try {\n      const expenses = await this.getExpenses();\n      expenses.push(expense);\n      await this.saveExpenses(expenses);\n    } catch (e) {\n      console.error('Error adding expense:', e);\n    }\n  }\n\n  static async updateExpense(id: string, updates: Partial<Expense>): Promise<void> {\n    try {\n      const expenses = await this.getExpenses();\n      const index = expenses.findIndex(expense => expense.id === id);\n      if (index !== -1) {\n        expenses[index] = { ...expenses[index], ...updates };\n        await this.saveExpenses(expenses);\n      }\n    } catch (e) {\n      console.error('Error updating expense:', e);\n    }\n  }\n\n  static async deleteExpense(id: string): Promise<void> {\n    try {\n      const expenses = await this.getExpenses();\n      const filteredExpenses = expenses.filter(expense => expense.id !== id);\n      await this.saveExpenses(filteredExpenses);\n    } catch (e) {\n      console.error('Error deleting expense:', e);\n    }\n  }\n\n  // Settings\n  static async getSettings(): Promise<SettingsData | null> {\n    try {\n      const jsonValue = await AsyncStorage.getItem(SETTINGS_KEY);\n      return jsonValue != null ? JSON.parse(jsonValue) : null;\n    } catch (e) {\n      console.error('Error getting settings:', e);\n      return null;\n    }\n  }\n\n  static async saveSettings(settings: SettingsData): Promise<void> {\n    try {\n      const jsonValue = JSON.stringify(settings);\n      await AsyncStorage.setItem(SETTINGS_KEY, jsonValue);\n    } catch (e) {\n      console.error('Error saving settings:', e);\n    }\n  }\n}\n","import { Entry, Expense, ActionItem } from '../types';\n\n// Custom UUID function since react-native-uuid causes crashes\nconst uuid = {\n  v4: () => {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n};\n\nexport class TextAnalyzer {\n  // Currency patterns - simplified to detect any numeric amount\n  private static readonly CURRENCY_PATTERNS = [\n    // Any number with optional decimal places\n    /\\b\\d+(\\.\\d{1,2})?\\b/g,\n    // Currency symbols with numbers (but we'll extract just the number)\n    /[$]\\s*\\d+(\\.\\d{1,2})?|\\d+(\\.\\d{1,2})?\\s*[$]/g,\n    // Text-based currency mentions (extract number only)\n    /(?:Rs\\.?|rs\\.?|RS\\.?)\\s*\\d+(\\.\\d{1,2})?/g,\n    /\\d+(\\.\\d{1,2})?\\s*(rupees?|dollars?|euros?|pounds?)/g\n  ];\n\n  // Keywords for expenses\n  private static readonly EXPENSE_KEYWORDS: string[] = [\n    \"spent\", \"bought\", \"purchased\", \"paid\", \"cost\",\n    \"expense\", \"payment\", \"buy\", \"pay\", \"shopping\",\n    \"store\", \"bill\", \"receipt\", \"charged\", \"withdrew\",\n    \"withdrawal\", \"transaction\", \"fee\", \"subscription\"\n  ];\n\n  // Keywords for action items (kept for reference, but only dot-prefix is used)\n  private static readonly ACTION_KEYWORDS: string[] = [\n    \"todo\", \"to-do\", \"task\", \"need to\", \"should\",\n    \"must\", \"have to\", \"action\", \"plan\", \"schedule\",\n    \"remind\", \"remember\", \"don't forget\", \"important\",\n    \"deadline\", \"due\", \"appointment\", \"meeting\", \"call\",\n    \"email\", \"follow up\", \"buy\", \"get\", \"pick up\", \"pack\",\n    \"finish\", \"complete\", \"start\", \"contact\", \"reach out\",\n    \"check\", \"review\", \"submit\", \"apply\", \"book\", \"reserve\"\n  ];\n\n  // Only dot-prefix detection is used for action items\n  // Format: \". task description\" becomes an action item\n\n  static detectActionItem(text: string): boolean {\n    // Only detect action items that start with a dot (simple and explicit)\n    const startsWithDot = /^\\s*\\.\\s*\\S/.test(text);\n    return startsWithDot;\n  }\n\n  static detectExpense(text: string): boolean {\n    const lowerText = text.toLowerCase();\n    \n    // First check for explicit expense keywords\n    const hasExpenseKeywords = this.EXPENSE_KEYWORDS.some(keyword => lowerText.includes(keyword));\n    if (hasExpenseKeywords) {\n      return true;\n    }\n    \n    // Only consider numeric values as expenses if they have strong expense context\n    // AND the text is not just a plain number\n    if (this.hasNumericValue(text) && this.hasExpenseContext(text)) {\n      // Additional check: reject plain numbers without context\n      // If the text is ONLY a number (like \"150\"), it's probably not an expense\n      const isPlainNumber = /^\\s*\\d+(\\.\\d{1,2})?\\s*$/.test(text);\n      if (isPlainNumber) {\n        return false; // Don't treat plain numbers as expenses\n      }\n      \n      // Also reject if it's just currency symbol + number without context\n      const isCurrencyOnly = /^\\s*(?:Rs\\.?|rs\\.?|RS\\.?||[$])\\s*\\d+(?:\\.\\d{1,2})?\\s*$/.test(text);\n      if (isCurrencyOnly) {\n        return false; // Don't treat \"Rs150\" alone as expense without context\n      }\n      \n      return true;\n    }\n    \n    return false;\n  }\n\n  // Helper method to check if text contains numeric values\n  private static hasNumericValue(text: string): boolean {\n    // Check for numbers with or without currency symbols\n    return /(?:Rs\\.?|rs\\.?|RS\\.?||[$])\\s*\\d+(?:\\.\\d{1,2})?|\\b\\d+(?:\\.\\d{1,2})?\\b/.test(text);\n  }\n\n  // Helper method to check if text has expense-related context\n  private static hasExpenseContext(text: string): boolean {\n    const lowerText = text.toLowerCase();\n    const expenseContexts = [\n      'spent', 'bought', 'purchased', 'paid', 'cost', 'price', 'bill', 'receipt',\n      'shopping', 'store', 'market', 'restaurant', 'cafe', 'food', 'lunch', 'dinner',\n      'gas', 'fuel', 'electricity', 'rent', 'groceries', 'medicine', 'doctor',\n      'haircut', 'salon', 'barber', 'transportation', 'taxi', 'uber', 'lyft',\n      'coffee', 'tea', 'snack', 'movie', 'ticket', 'parking', 'toll'\n    ];\n    \n    // Check for explicit expense contexts\n    const hasDirectContext = expenseContexts.some(context => lowerText.includes(context));\n    if (hasDirectContext) {\n      return true;\n    }\n    \n    // Check for \"number + for + item\" pattern (e.g., \"500 for haircut\", \"20 for lunch\")\n    const forPattern = /\\d+(?:\\.\\d{1,2})?\\s+for\\s+\\w+/i.test(text);\n    if (forPattern) {\n      return true;\n    }\n    \n    // Check for \"number + currency + for + item\" pattern\n    const currencyForPattern = /(?:Rs\\.?|rs\\.?|RS\\.?||[$])\\s*\\d+(?:\\.\\d{1,2})?\\s+for\\s+\\w+/i.test(text);\n    if (currencyForPattern) {\n      return true;\n    }\n    \n    return false;\n  }\n\n  // Get system default currency\n  private static getSystemCurrency(): string {\n    try {\n      // Try to get system locale and extract currency\n      const locale = Intl.NumberFormat().resolvedOptions().locale;\n      const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n      \n      // Map common locales to their expected currencies (both underscore and hyphen formats)\n      const localeCurrencyMap: { [key: string]: string } = {\n        'en-IN': 'INR',\n        'en_IN': 'INR',\n        'hi-IN': 'INR',\n        'hi_IN': 'INR',\n        'en-CA': 'CAD',\n        'en_CA': 'CAD',\n        'en-AU': 'AUD',\n        'en_AU': 'AUD',\n        'de-DE': 'EUR',\n        'de_DE': 'EUR',\n        'fr-FR': 'EUR',\n        'fr_FR': 'EUR',\n        'es-ES': 'EUR',\n        'es_ES': 'EUR',\n        'it-IT': 'EUR',\n        'it_IT': 'EUR',\n        'ja-JP': 'JPY',\n        'ja_JP': 'JPY',\n        'ko-KR': 'KRW',\n        'ko_KR': 'KRW',\n        'zh-CN': 'CNY',\n        'zh_CN': 'CNY',\n        'pt-BR': 'BRL',\n        'pt_BR': 'BRL',\n        'ru-RU': 'RUB',\n        'ru_RU': 'RUB'\n        // Note: en-US and en-GB removed to force India detection\n      };\n      \n      // First check if we have a direct mapping for JavaScript's resolved locale\n      if (localeCurrencyMap[locale]) {\n        return localeCurrencyMap[locale];\n      }\n      \n      // Check for region-based mapping (e.g., any locale ending with -IN should use INR)\n      if (locale.endsWith('-IN') || locale.endsWith('_IN')) {\n        return 'INR';\n      }\n      \n      // Use timezone as an additional hint for currency detection\n      if (timezone && (timezone.includes('Asia/Calcutta') || timezone.includes('Asia/Kolkata'))) {\n        return 'INR';\n      }\n      \n      // For common English locales, test INR formatting to determine if user is likely in India\n      if (locale.includes('en')) {\n        try {\n          const testFormatter = new Intl.NumberFormat(locale, { \n            style: 'currency', \n            currency: 'INR' \n          });\n          const formatted = testFormatter.format(100);\n          \n          // If INR formats with  symbol, it indicates the system likely supports Indian localization\n          if (formatted.includes('')) {\n            return 'INR';\n          }\n        } catch (error) {\n          // INR formatting failed, continue to other checks\n        }\n      }\n      \n      // Specific handling for different locales\n      if (locale.endsWith('-US') || locale.endsWith('_US')) {\n        return 'USD';\n      }\n      if (locale.endsWith('-GB') || locale.endsWith('_GB')) {\n        return 'GBP';\n      }\n      if (locale.endsWith('-DE') || locale.endsWith('_DE') || \n          locale.endsWith('-FR') || locale.endsWith('_FR') ||\n          locale.endsWith('-ES') || locale.endsWith('_ES') || \n          locale.endsWith('-IT') || locale.endsWith('_IT')) {\n        return 'EUR';\n      }\n      \n      // Try to get currency from Intl as fallback\n      const currency = Intl.NumberFormat(locale).resolvedOptions().currency;\n      return currency || 'USD'; // Final fallback to USD\n    } catch (error) {\n      // Fallback for environments where Intl is not fully supported\n      return 'USD';\n    }\n  }\n\n  static extractActionItem(text: string, entryId: string): ActionItem | null {\n    if (this.detectActionItem(text)) {\n      // Clean up the title - remove leading dot if present\n      let cleanTitle = text.trim();\n      if (cleanTitle.startsWith('.')) {\n        cleanTitle = cleanTitle.substring(1).trim();\n      }\n      \n      return {\n        id: uuid.v4(),\n        entryId,\n        title: cleanTitle,\n        completed: false,\n        createdAt: new Date()\n      };\n    }\n    return null;\n  }\n\n  static extractExpenseInfo(text: string, entryId: string): Expense | null {\n    const amount = this.extractAmount(text);\n    if (!amount) return null;\n\n    // Extract category and clean description from the text\n    const categoryInfo = this.extractCategoryFromText(text);\n\n    return {\n      id: uuid.v4(),\n      entryId,\n      amount: amount.value,\n      currency: amount.currency,\n      description: categoryInfo.description,\n      category: categoryInfo.category,\n      createdAt: new Date()\n    };\n  }\n\n  // Extract category and keep full description from expense text\n  private static extractCategoryFromText(text: string): { category?: string; description: string } {\n    const lowerText = text.toLowerCase().trim();\n    const originalText = text.trim();\n    \n    // Pattern 1: \"spent/paid/bought X for Y\" -> category: Y, description: original text\n    const forPattern = /(?:spent|paid|bought|purchased|cost|charged)\\s+(?:Rs\\.?|rs\\.?|RS\\.?||[$])?\\s*\\d+(?:\\.\\d{1,2})?\\s+for\\s+(.+)/i;\n    const forMatch = text.match(forPattern);\n    if (forMatch) {\n      const category = forMatch[1].trim();\n      return {\n        category: this.mapToStandardCategory(category),\n        description: originalText\n      };\n    }\n\n    // Pattern 2: \"X for Y\" -> category: Y, description: original text\n    const simpleForPattern = /(?:Rs\\.?|rs\\.?|RS\\.?||[$])?\\s*\\d+(?:\\.\\d{1,2})?\\s+for\\s+(.+)/i;\n    const simpleForMatch = text.match(simpleForPattern);\n    if (simpleForMatch) {\n      const category = simpleForMatch[1].trim();\n      return {\n        category: this.mapToStandardCategory(category),\n        description: originalText\n      };\n    }\n\n    // Pattern 3: \"spent/paid/bought X on Y\" -> category: Y, description: original text\n    const onPattern = /(?:spent|paid|bought|purchased)\\s+(?:Rs\\.?|rs\\.?|RS\\.?||[$])?\\s*\\d+(?:\\.\\d{1,2})?\\s+on\\s+(.+)/i;\n    const onMatch = text.match(onPattern);\n    if (onMatch) {\n      const category = onMatch[1].trim();\n      return {\n        category: this.mapToStandardCategory(category),\n        description: originalText\n      };\n    }\n\n    // Pattern 4: Look for expense context words and extract category\n    const expenseContexts = [\n      'haircut', 'salon', 'barber', 'taxi', 'uber', 'lyft', 'parking', 'toll',\n      'coffee', 'tea', 'lunch', 'dinner', 'breakfast', 'snack', 'food',\n      'groceries', 'shopping', 'movie', 'ticket', 'gas', 'fuel',\n      'electricity', 'rent', 'medicine', 'doctor', 'train', 'bus', 'flight',\n      'metro', 'subway', 'cab', 'auto'\n    ];\n    \n    for (const context of expenseContexts) {\n      if (lowerText.includes(context)) {\n        // For compound terms like \"train ticket\", extract the full relevant phrase\n        if (context === 'ticket') {\n          // Look for transportation + ticket combinations first\n          const transportTicketMatch = lowerText.match(/\\b(train|bus|flight|metro|subway)\\s+ticket\\b/);\n          if (transportTicketMatch) {\n            return {\n              category: this.mapToStandardCategory(transportTicketMatch[0]),\n              description: originalText\n            };\n          }\n          // Look for movie/entertainment + ticket combinations\n          const entertainmentTicketMatch = lowerText.match(/\\b(movie|cinema|concert|show)\\s+ticket\\b/);\n          if (entertainmentTicketMatch) {\n            return {\n              category: this.mapToStandardCategory(entertainmentTicketMatch[0]),\n              description: originalText\n            };\n          }\n          // Generic ticket\n          return {\n            category: this.mapToStandardCategory('ticket'),\n            description: originalText\n          };\n        }\n        \n        return {\n          category: this.mapToStandardCategory(context),\n          description: originalText\n        };\n      }\n    }\n\n    // Fallback: return original text as description without category\n    return {\n      description: originalText\n    };\n  }\n\n  // Map extracted categories to standard category names\n  private static mapToStandardCategory(extractedCategory: string): string {\n    const lowerCategory = extractedCategory.toLowerCase().trim();\n    \n    // Transportation (check first for specific transport + ticket combinations)\n    if (['train ticket', 'bus ticket', 'flight ticket', 'metro ticket', 'subway ticket'].some(word => lowerCategory.includes(word))) {\n      return 'Transportation';\n    }\n    \n    // Transportation (general)\n    if (['taxi', 'uber', 'lyft', 'parking', 'toll', 'gas', 'fuel', 'transportation', 'train', 'bus', 'flight', 'metro', 'subway', 'cab', 'auto'].some(word => lowerCategory.includes(word))) {\n      return 'Transportation';\n    }\n    \n    // Food & Dining\n    if (['coffee', 'tea', 'lunch', 'dinner', 'breakfast', 'snack', 'food', 'groceries', 'restaurant', 'cafe'].some(word => lowerCategory.includes(word))) {\n      return 'Food';\n    }\n    \n    // Personal Care\n    if (['haircut', 'salon', 'barber', 'medicine', 'doctor', 'hospital', 'pharmacy'].some(word => lowerCategory.includes(word))) {\n      return 'Health & Personal Care';\n    }\n    \n    // Entertainment (check after transportation to avoid conflicts)\n    if (['movie ticket', 'concert ticket', 'show ticket', 'movie', 'cinema', 'theater', 'entertainment'].some(word => lowerCategory.includes(word))) {\n      return 'Entertainment';\n    }\n    \n    // Generic ticket (fallback for other tickets)\n    if (lowerCategory.includes('ticket') && !['train', 'bus', 'flight', 'metro', 'subway'].some(transport => lowerCategory.includes(transport))) {\n      return 'Entertainment';\n    }\n    \n    // Utilities\n    if (['electricity', 'rent', 'bill', 'utilities', 'water', 'internet'].some(word => lowerCategory.includes(word))) {\n      return 'Utilities';\n    }\n    \n    // Shopping\n    if (['shopping', 'clothes', 'clothing', 'shoes', 'accessories'].some(word => lowerCategory.includes(word))) {\n      return 'Shopping';\n    }\n    \n    // Default: capitalize first letter of extracted category\n    return extractedCategory.charAt(0).toUpperCase() + extractedCategory.slice(1);\n  }\n\n  private static extractAmount(text: string): { value: number; currency: string } | null {\n    // Find all numbers in the text, including those attached to currency symbols\n    const numberMatches = text.match(/(?:Rs\\.?|rs\\.?|RS\\.?||[$])\\s*(\\d+(?:\\.\\d{1,2})?)|(\\d+(?:\\.\\d{1,2})?)/g);\n    if (!numberMatches || numberMatches.length === 0) return null;\n\n    let detectedCurrency = null;\n    let largestAmount = 0;\n\n    // Extract numeric parts and detect explicit currency symbols\n    const amounts = numberMatches.map(match => {\n      // Extract number from patterns like \"Rs150\", \"100\", \"$50\" or plain \"100\"\n      const numericPart = match.replace(/^(Rs\\.?|rs\\.?|RS\\.?||[$])\\s*/i, '');\n      const amount = parseFloat(numericPart);\n      \n      if (!isNaN(amount) && amount > 0) {\n        // If this is the largest amount so far, check if it has an explicit currency\n        if (amount >= largestAmount) {\n          largestAmount = amount;\n          \n          // Check for explicit currency symbols in the original match\n          if (match.includes('$')) {\n            detectedCurrency = 'USD';\n          } else if (match.includes('')) {\n            detectedCurrency = 'EUR';\n          } else if (match.includes('')) {\n            detectedCurrency = 'GBP';\n          } else if (match.includes('')) {\n            detectedCurrency = 'INR';\n          } else if (/Rs\\.?|rs\\.?|RS\\.?/i.test(match)) {\n            detectedCurrency = 'INR';\n          }\n        }\n        \n        return amount;\n      }\n      return NaN;\n    }).filter(num => !isNaN(num) && num > 0);\n\n    if (amounts.length === 0) return null;\n\n    // Use the largest number as the expense amount\n    const value = Math.max(...amounts);\n    \n    // Use explicitly detected currency if found, otherwise fall back to system default\n    const currency = detectedCurrency || this.getSystemCurrency();\n\n    return { value, currency };\n  }\n\n  static formatCurrency(amount: number, currency?: string): string {\n    // Use provided currency or fall back to system default\n    const currencyCode = currency || this.getSystemCurrency();\n    \n    try {\n      // Use specific locales to avoid unwanted prefixes\n      let locale = 'en-US'; // Default to US English\n      \n      // Choose locale based on currency for cleaner formatting\n      switch (currencyCode) {\n        case 'USD':\n          locale = 'en-US'; // Produces clean $12.99\n          break;\n        case 'EUR':\n          locale = 'en-GB'; // Produces clean 12.99\n          break;\n        case 'GBP':\n          locale = 'en-GB'; // Produces clean 12.99\n          break;\n        case 'INR':\n          locale = 'en-IN'; // Produces clean 12.99\n          break;\n        case 'CAD':\n          locale = 'en-CA'; // Should produce C$12.99 or CA$12.99\n          break;\n        case 'AUD':\n          locale = 'en-AU'; // Should produce A$12.99\n          break;\n      }\n      \n      const formatter = new Intl.NumberFormat(locale, {\n        style: 'currency',\n        currency: currencyCode,\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      });\n      \n      const formatted = formatter.format(amount);\n      \n      // Clean up any remaining unwanted prefixes for better display\n      // Remove \"US\" prefix from USD formatting (US$12.99  $12.99)\n      if (currencyCode === 'USD' && formatted.startsWith('US$')) {\n        return formatted.replace('US$', '$');\n      }\n      \n      // Remove \"CA\" prefix from CAD formatting if present\n      if (currencyCode === 'CAD' && formatted.startsWith('CA$')) {\n        return formatted.replace('CA$', 'C$');\n      }\n      \n      return formatted;\n    } catch (error) {\n      // Fallback formatting if currency is not supported\n      const symbols: { [key: string]: string } = {\n        'USD': '$',\n        'EUR': '',\n        'GBP': '',\n        'INR': '',\n        'CAD': 'C$',\n        'AUD': 'A$',\n        'JPY': '',\n        'CNY': ''\n      };\n      \n      const symbol = symbols[currencyCode] || currencyCode;\n      return `${symbol}${amount.toFixed(2)}`;\n    }\n  }\n\n  static isExpenseRelated(text: string): boolean {\n    const lowerText = text.toLowerCase();\n    return this.EXPENSE_KEYWORDS.some((keyword: string) => lowerText.includes(keyword));\n  }\n}\n","import React from 'react';\nimport { View, Text, TouchableOpacity, Platform, Alert, StyleSheet } from 'react-native';\n// import { Ionicons } from \"@expo/vector-icons\";\nimport { format } from \"date-fns\";\nimport Markdown from \"react-native-markdown-display\";\nimport { Entry, Expense, ActionItem } from '../types';\nimport { TextAnalyzer } from '../utils/textAnalysis';\n\ninterface MessageBubbleProps {\n  entry: Entry;\n  onLongPress: (entry: Entry) => void;\n  markdownStyles: any;\n  expense?: Expense;\n  actionItem?: ActionItem;\n}\n\nexport const MessageBubble: React.FC<MessageBubbleProps> = ({\n  entry,\n  onLongPress,\n  markdownStyles,\n  expense,\n  actionItem,\n}) => {\n  const getBubbleStyle = () => {\n    const baseStyles = [styles.messageBubble];\n    const alignmentStyle = entry.type === 'system' ? styles.systemMessage : styles.userMessage;\n    \n    switch (entry.type) {\n      case \"expense\":\n        return [...baseStyles, styles.expenseBubble, alignmentStyle];\n      case \"action\":\n        return [...baseStyles, styles.actionBubble, alignmentStyle];\n      case \"system\":\n        return [...baseStyles, styles.systemBubble, alignmentStyle];\n      default:\n        return [...baseStyles, styles.defaultBubble, alignmentStyle];\n    }\n  };\n\n  const getIcon = () => {\n    switch (entry.type) {\n      case \"expense\":\n        return <Text style={{ fontSize: 16, color: \"#2e7d32\" }}></Text>;\n      case \"action\":\n        return <Text style={{ fontSize: 16, color: \"#1565c0\" }}></Text>;\n      default:\n        return null;\n    }\n  };\n\n  const getCategoryLabel = () => {\n    switch (entry.type) {\n      case \"expense\":\n        if (expense) {\n          return ` Auto-categorized as Expense: ${TextAnalyzer.formatCurrency(expense.amount, expense.currency)}`;\n        }\n        return \" Auto-categorized as Expense\";\n      case \"action\":\n        if (actionItem) {\n          return ` Auto-categorized as Action Item: ${actionItem.title}`;\n        }\n        return \" Auto-categorized as Action Item\";\n      default:\n        return null;\n    }\n  };\n\n  const handleNativeLongPress = () => {\n    if (entry.type !== 'system') {\n      Alert.alert(\n        \"Message Options\",\n        \"Choose an action\",\n        [\n          {\n            text: \"Copy\",\n            onPress: () => Alert.alert(\"Copy\", \"Text copied: \" + entry.text.substring(0, 50) + \"...\"),\n            style: \"default\"\n          },\n          {\n            text: \"Categorize\",\n            onPress: () => onLongPress(entry),\n          },\n          {\n            text: \"Cancel\",\n            style: \"cancel\"\n          }\n        ]\n      );\n    }\n  };\n\n  const MessageContent = () => (\n    <View>\n      <View style={styles.messageHeader}>\n        {getIcon()}\n        <Text style={styles.timestamp}>\n          {format(entry.timestamp, \"HH:mm\")}\n        </Text>\n      </View>\n      {entry.isMarkdown ? (\n        <Markdown style={markdownStyles}>{entry.text}</Markdown>\n      ) : (\n        <Text \n          style={[\n            styles.messageText,\n            entry.type === 'system' \n              ? styles.systemMessageText \n              : entry.type === 'log'\n                ? styles.userMessageText\n                : styles.nonUserMessageText\n          ]}\n          selectable={Platform.OS === 'web'}\n        >\n          {entry.text}\n        </Text>\n      )}\n      {entry.type !== \"log\" && entry.type !== \"system\" && (\n        <Text style={styles.categoryLabel}>{getCategoryLabel()}</Text>\n      )}\n    </View>\n  );\n\n  const webStyles = Platform.OS === 'web' ? {\n    style: {\n      cursor: 'text',\n      WebkitTouchCallout: 'none',\n      WebkitUserSelect: 'text',\n      MozUserSelect: 'text',\n      msUserSelect: 'text',\n      userSelect: 'text',\n    } as any\n  } : {};\n\n  return (\n    <View style={entry.type === 'system' ? styles.systemMessageContainer : styles.messageContainer}>\n      {Platform.OS === 'web' ? (\n        <View \n          {...webStyles}\n          style={[getBubbleStyle(), webStyles.style]}\n          onTouchEnd={(e) => {\n            const selection = window.getSelection();\n            if (selection?.toString().length === 0 && entry.type !== 'system') {\n              onLongPress(entry);\n            }\n          }}\n        >\n          <MessageContent />\n        </View>\n      ) : (\n        <TouchableOpacity\n          style={getBubbleStyle()}\n          activeOpacity={0.7}\n          onLongPress={handleNativeLongPress}\n        >\n          <MessageContent />\n        </TouchableOpacity>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  userMessageContainer: {\n    marginVertical: 4,\n    alignSelf: 'flex-start',\n    maxWidth: '85%',\n  },\n  systemMessageContainer: {\n    marginVertical: 4,\n    alignSelf: 'flex-end',\n    maxWidth: '85%',\n  },\n  messageContainer: {\n    marginVertical: 4,\n    alignSelf: \"flex-start\",\n    maxWidth: \"80%\",\n  },\n  messageBubble: {\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    minWidth: 60,\n    maxWidth: \"100%\",\n    borderRadius: 18,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 1,\n    },\n    shadowOpacity: 0.18,\n    shadowRadius: 1.0,\n    elevation: 1,\n  },\n  defaultBubble: {\n    backgroundColor: \"#f0f0f0\", // Light gray for user messages\n  },\n  expenseBubble: {\n    backgroundColor: \"#e8f5e8\",\n    borderColor: \"#4caf50\",\n    borderWidth: 1,\n  },\n  actionBubble: {\n    backgroundColor: \"#e3f2fd\",\n    borderColor: \"#2196f3\",\n    borderWidth: 1,\n  },\n  systemBubble: {\n    backgroundColor: \"#e3f2fd\", // Light blue for system messages\n    borderColor: \"#2196f3\",\n    borderWidth: 1,\n    borderRadius: 12,\n  },\n  systemMessage: {\n    alignSelf: 'flex-end',\n    backgroundColor: '#fff',\n    marginLeft: '15%',\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 5,\n    borderBottomLeftRadius: 20,\n    borderBottomRightRadius: 5,\n  },\n  userMessage: {\n    alignSelf: 'flex-start',\n    backgroundColor: '#fff',\n    marginRight: '15%',\n    borderTopLeftRadius: 5,\n    borderTopRightRadius: 20,\n    borderBottomLeftRadius: 5,\n    borderBottomRightRadius: 20,\n  },\n  messageHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginBottom: 4,\n  },\n  timestamp: {\n    fontSize: 11,\n    color: \"#666\",\n    marginLeft: 8,\n  },\n  messageText: {\n    fontSize: 16,\n    lineHeight: 20,\n    ...(Platform.OS === 'web' ? {\n      userSelect: 'text',\n      WebkitUserSelect: 'text',\n    } as any : {}),\n  },\n  userMessageText: {\n    color: \"#333\", // Dark text for user messages on light background\n  },\n  systemMessageText: {\n    color: \"#1565c0\", // Darker blue for contrast on light background\n    fontSize: 14,\n    textAlign: \"left\",\n    fontWeight: \"500\", // Slightly bolder for better readability\n  },\n  nonUserMessageText: {\n    color: \"#333\",  // Dark text for action/expense messages\n  },\n  categoryLabel: {\n    fontSize: 12,\n    color: \"#666\",\n    fontStyle: \"italic\",\n    marginTop: 4,\n  },\n});\n","import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  Switch,\n  TouchableOpacity,\n  ScrollView,\n  Alert,\n  Modal,\n} from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { StorageService } from '../utils/storage';\nimport { SettingsData } from '../types';\n\nconst defaultSettings: SettingsData = {\n  isMarkdownEnabled: true,\n  enterToSend: true,\n  systemCurrency: 'AUTO', // AUTO means use system default\n  layoutStyle: 'chat', // Default to current chat style\n};\n\nconst CURRENCIES = [\n  { code: 'AUTO', name: 'Auto-detect', symbol: '' },\n  { code: 'USD', name: 'US Dollar', symbol: '$' },\n  { code: 'EUR', name: 'Euro', symbol: '' },\n  { code: 'GBP', name: 'British Pound', symbol: '' },\n  { code: 'INR', name: 'Indian Rupee', symbol: '' },\n  { code: 'CAD', name: 'Canadian Dollar', symbol: 'C$' },\n  { code: 'AUD', name: 'Australian Dollar', symbol: 'A$' },\n  { code: 'JPY', name: 'Japanese Yen', symbol: '' },\n];\n\nexport const SettingsScreen: React.FC<{ onClose: () => void }> = ({ onClose }) => {\n  const [settings, setSettings] = useState<SettingsData>(defaultSettings);\n  const [showCurrencyModal, setShowCurrencyModal] = useState(false);\n  const [showLayoutModal, setShowLayoutModal] = useState(false);\n\n  useEffect(() => {\n    loadSettings();\n  }, []);\n\n  const loadSettings = async () => {\n    try {\n      const savedSettings = await StorageService.getSettings();\n      if (savedSettings) {\n        setSettings({ ...defaultSettings, ...savedSettings });\n      }\n    } catch (error) {\n      console.error('Error loading settings:', error);\n    }\n  };\n\n  const saveSettings = async (newSettings: SettingsData) => {\n    try {\n      await StorageService.saveSettings(newSettings);\n      setSettings(newSettings);\n    } catch (error) {\n      console.error('Error saving settings:', error);\n      Alert.alert('Error', 'Failed to save settings');\n    }\n  };\n\n  const updateSetting = <K extends keyof SettingsData>(\n    key: K,\n    value: SettingsData[K]\n  ) => {\n    const newSettings = { ...settings, [key]: value };\n    saveSettings(newSettings);\n  };\n\n  const showCurrencyPicker = () => {\n    console.log('Currency picker tapped'); // Debug log\n    console.log('Setting showCurrencyModal to true');\n    setShowCurrencyModal(true);\n  };\n\n  const LAYOUT_OPTIONS = [\n    { id: 'chat', name: 'Chat Style', icon: '' },\n    { id: 'cards', name: 'Card Layout', icon: '' },\n    { id: 'list', name: 'List View', icon: '' },\n    { id: 'timeline', name: 'Timeline Style', icon: '' },\n    { id: 'magazine', name: 'Magazine Layout', icon: '' },\n    { id: 'minimal', name: 'Minimal Design', icon: '' },\n  ];\n\n  const showLayoutPicker = () => {\n    console.log('Layout picker tapped'); // Debug log\n    console.log('Setting showLayoutModal to true');\n    setShowLayoutModal(true);\n  };\n\n  const getCurrentLayoutName = () => {\n    const current = LAYOUT_OPTIONS.find(l => l.id === settings.layoutStyle);\n    return current ? `${current.icon} ${current.name}` : ' Chat Style';\n  };\n\n  const getCurrentCurrencyName = () => {\n    const current = CURRENCIES.find(c => c.code === settings.systemCurrency);\n    return current ? `${current.symbol} ${current.name}` : 'Auto-detect';\n  };\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Settings</Text>\n        <TouchableOpacity onPress={onClose} style={styles.closeButton}>\n          <Text style={styles.closeButtonText}></Text>\n        </TouchableOpacity>\n      </View>\n\n      <ScrollView style={styles.content}>\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Text Input</Text>\n          \n          <View style={styles.settingItem}>\n            <View style={styles.settingInfo}>\n              <Text style={styles.settingLabel}>Enable Markdown</Text>\n              <Text style={styles.settingDescription}>\n                Format text with **bold**, *italic*, and other markdown syntax\n              </Text>\n            </View>\n            <Switch\n              value={settings.isMarkdownEnabled}\n              onValueChange={(value) => updateSetting('isMarkdownEnabled', value)}\n            />\n          </View>\n\n          <View style={styles.settingItem}>\n            <View style={styles.settingInfo}>\n              <Text style={styles.settingLabel}>Enter to Send</Text>\n              <Text style={styles.settingDescription}>\n                Press Enter to send message (off = Enter adds new line)\n              </Text>\n            </View>\n            <Switch\n              value={settings.enterToSend}\n              onValueChange={(value) => updateSetting('enterToSend', value)}\n            />\n          </View>\n        </View>\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Currency</Text>\n          \n          <TouchableOpacity style={styles.settingItem} onPress={showCurrencyPicker}>\n            <View style={styles.settingInfo}>\n              <Text style={styles.settingLabel}>Default Currency</Text>\n              <Text style={styles.settingDescription}>\n                Currency for expenses (when not explicitly specified)\n              </Text>\n              <Text style={styles.settingValue}>{getCurrentCurrencyName()}</Text>\n            </View>\n            <Text style={styles.arrow}></Text>\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Appearance</Text>\n          \n          <TouchableOpacity style={styles.settingItem} onPress={showLayoutPicker}>\n            <View style={styles.settingInfo}>\n              <Text style={styles.settingLabel}>Journal Layout</Text>\n              <Text style={styles.settingDescription}>\n                Choose how your journal entries are displayed\n              </Text>\n              <Text style={styles.settingValue}>{getCurrentLayoutName()}</Text>\n            </View>\n            <Text style={styles.arrow}></Text>\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>About</Text>\n          <View style={styles.settingItem}>\n            <Text style={styles.settingLabel}>Daily Tracker</Text>\n            <Text style={styles.settingDescription}>\n              Smart journal with automatic expense and task detection\n            </Text>\n          </View>\n        </View>\n      </ScrollView>\n\n      {/* Currency Selection Modal */}\n      <Modal\n        visible={showCurrencyModal}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={() => setShowCurrencyModal(false)}\n      >\n        <View style={modalStyles.overlay}>\n          <View style={modalStyles.container}>\n            <Text style={modalStyles.title}>Select Currency</Text>\n            <Text style={modalStyles.subtitle}>Choose your preferred currency:</Text>\n            \n            <ScrollView style={modalStyles.optionsList} showsVerticalScrollIndicator={true}>\n              {CURRENCIES.map((currency) => {\n                console.log(`Rendering currency option: ${currency.name}`);\n                return (\n                  <TouchableOpacity\n                    key={currency.code}\n                    style={[\n                      modalStyles.option,\n                      settings.systemCurrency === currency.code && modalStyles.selectedOption\n                    ]}\n                    onPress={() => {\n                      console.log(`Selected currency: ${currency.name}`);\n                      updateSetting('systemCurrency', currency.code);\n                      setShowCurrencyModal(false);\n                    }}\n                  >\n                    <Text style={[\n                      modalStyles.optionText,\n                      settings.systemCurrency === currency.code && modalStyles.selectedOptionText\n                    ]}>\n                      {currency.symbol} {currency.name}\n                    </Text>\n                    {settings.systemCurrency === currency.code && (\n                      <Text style={modalStyles.checkmark}></Text>\n                    )}\n                  </TouchableOpacity>\n                );\n              })}\n            </ScrollView>\n            \n            <TouchableOpacity\n              style={modalStyles.cancelButton}\n              onPress={() => setShowCurrencyModal(false)}\n            >\n              <Text style={modalStyles.cancelButtonText}>Cancel</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Layout Selection Modal */}\n      <Modal\n        visible={showLayoutModal}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={() => setShowLayoutModal(false)}\n      >\n        <View style={modalStyles.overlay}>\n          <View style={modalStyles.container}>\n            <Text style={modalStyles.title}>Select Layout Style</Text>\n            <Text style={modalStyles.subtitle}>Choose how your journal entries are displayed:</Text>\n            \n            <ScrollView style={modalStyles.optionsList} showsVerticalScrollIndicator={true}>\n              {LAYOUT_OPTIONS.map((layout) => {\n                console.log(`Rendering layout option: ${layout.name}`);\n                return (\n                  <TouchableOpacity\n                    key={layout.id}\n                    style={[\n                      modalStyles.option,\n                      settings.layoutStyle === layout.id && modalStyles.selectedOption\n                    ]}\n                    onPress={() => {\n                      console.log(`Selected layout: ${layout.name}`);\n                      updateSetting('layoutStyle', layout.id);\n                      setShowLayoutModal(false);\n                    }}\n                  >\n                    <Text style={[\n                      modalStyles.optionText,\n                      settings.layoutStyle === layout.id && modalStyles.selectedOptionText\n                    ]}>\n                      {layout.icon} {layout.name}\n                    </Text>\n                    {settings.layoutStyle === layout.id && (\n                      <Text style={modalStyles.checkmark}></Text>\n                    )}\n                  </TouchableOpacity>\n                );\n              })}\n            </ScrollView>\n            \n            <TouchableOpacity\n              style={modalStyles.cancelButton}\n              onPress={() => setShowLayoutModal(false)}\n            >\n              <Text style={modalStyles.cancelButtonText}>Cancel</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </Modal>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n  },\n  closeButton: {\n    padding: 8,\n    borderRadius: 20,\n    backgroundColor: '#f0f0f0',\n  },\n  closeButtonText: {\n    fontSize: 16,\n    color: '#666',\n    fontWeight: 'bold',\n  },\n  content: {\n    flex: 1,\n  },\n  section: {\n    backgroundColor: '#fff',\n    marginVertical: 8,\n    paddingVertical: 8,\n  },\n  sectionTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#333',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    backgroundColor: '#f8f8f8',\n  },\n  settingItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: '#f0f0f0',\n  },\n  settingInfo: {\n    flex: 1,\n    marginRight: 12,\n  },\n  settingLabel: {\n    fontSize: 16,\n    color: '#333',\n    marginBottom: 4,\n  },\n  settingDescription: {\n    fontSize: 14,\n    color: '#666',\n    lineHeight: 18,\n  },\n  settingValue: {\n    fontSize: 14,\n    color: '#007AFF',\n    marginTop: 4,\n    fontWeight: '500',\n  },\n  arrow: {\n    fontSize: 20,\n    color: '#ccc',\n  },\n});\n\nconst modalStyles = StyleSheet.create({\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n  },\n  container: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    width: '100%',\n    maxWidth: 400,\n    minHeight: 300,\n    maxHeight: '80%',\n    paddingVertical: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n    textAlign: 'center',\n    marginBottom: 8,\n  },\n  subtitle: {\n    fontSize: 16,\n    color: '#666',\n    textAlign: 'center',\n    marginBottom: 20,\n    paddingHorizontal: 20,\n  },\n  optionsList: {\n    flexGrow: 1,\n    minHeight: 200,\n  },\n  option: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 20,\n    paddingVertical: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#f0f0f0',\n    minHeight: 50,\n  },\n  selectedOption: {\n    backgroundColor: '#e3f2fd',\n  },\n  optionText: {\n    fontSize: 16,\n    color: '#333',\n    flex: 1,\n  },\n  selectedOptionText: {\n    color: '#1976d2',\n    fontWeight: '500',\n  },\n  checkmark: {\n    fontSize: 18,\n    color: '#1976d2',\n    fontWeight: 'bold',\n  },\n  cancelButton: {\n    marginTop: 20,\n    marginHorizontal: 20,\n    paddingVertical: 12,\n    backgroundColor: '#f5f5f5',\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  cancelButtonText: {\n    fontSize: 16,\n    color: '#333',\n    fontWeight: '500',\n  },\n});","import React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport {\n  View,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  FlatList,\n  StyleSheet,\n  Alert,\n  KeyboardAvoidingView,\n  Platform,\n  Modal,\n} from \"react-native\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\n// import { Ionicons } from \"@expo/vector-icons\";\nimport Markdown from \"react-native-markdown-display\";\nimport { format } from \"date-fns\";\n\nimport { Entry, Expense, ActionItem } from \"../types\";\nimport { StorageService } from \"../utils/storage\";\nimport { TextAnalyzer } from \"../utils/textAnalysis\";\nimport { MessageBubble } from \"../components/MessageBubble\";\nimport { SettingsScreen } from \"./SettingsScreen\";\n\n// Custom UUID function since react-native-uuid causes crashes\nconst uuid = {\n  v4: () => {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n};\nexport const JournalScreen: React.FC<{}> = () => {\n  const [entries, setEntries] = useState<Entry[]>([]);\n  const [inputText, setInputText] = useState(\"\");\n  const [isMarkdown, setIsMarkdown] = useState(true);\n  const [testIndex, setTestIndex] = useState(0);\n  const flatListRef = useRef<FlatList>(null);\n  const textInputRef = useRef<TextInput>(null);\n  \n  // Settings state (will be loaded from storage)\n  const [enterToSend, setEnterToSend] = useState(true);\n  const [showSettings, setShowSettings] = useState(false);\n  const [layoutStyle, setLayoutStyle] = useState('chat');\n  \n  // Search functionality\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showSearch, setShowSearch] = useState(false);\n  const [filteredEntries, setFilteredEntries] = useState<Entry[]>([]);\n  \n  // Data for enhanced messages\n  const [expenses, setExpenses] = useState<Expense[]>([]);\n  const [actionItems, setActionItems] = useState<ActionItem[]>([]);\n\n  // Test entries for different scenarios\n  const testEntries = [\n    // Expense entries with category extraction\n    \"spent Rs150 for coffee\",\n    \"bought groceries for $45.50\",\n    \"paid 2500 for electricity bill\",\n    \"lunch cost $12.99\",\n    \"purchased fuel Rs3200\",\n    \"500 for haircut\",\n    \"300 for taxi\",\n    \"50 for parking\",\n    \"spent 200 on movie ticket\",\n    \n    // Action item entries\n    \"need to call mom tomorrow\",\n    \"todo: finish the quarterly report\",\n    \"must submit tax documents by Friday\",\n    \"reminder: doctor appointment at 3pm\",\n    \"should book flight tickets\",\n    \". pick up dry cleaning\",\n    \". schedule dentist appointment\",\n    \". buy birthday gift for Sarah\",\n    \n    // Regular entries\n    \"had a great meeting today\",\n    \"weather is lovely\",\n    \"feeling productive this morning\",\n    \"learned something new about React Native\",\n    \"grateful for a good day\"\n  ];\n\n  const loadEntries = useCallback(async () => {\n    const savedEntries = await StorageService.getEntries();\n    // Sort entries by timestamp to maintain chronological order\n    const sortedEntries = savedEntries.sort((a, b) => {\n      // If timestamps are within 2 seconds of each other, maintain user-system alternation\n      const timeDiff = Math.abs(a.timestamp.getTime() - b.timestamp.getTime());\n      if (timeDiff < 2000) {\n        // If one is a system message and the other isn't, maintain the conversation flow\n        if (a.type === 'system' && b.type !== 'system') return 1;\n        if (a.type !== 'system' && b.type === 'system') return -1;\n      }\n      // Otherwise, sort by timestamp\n      return a.timestamp.getTime() - b.timestamp.getTime();\n    });\n    \n    setEntries(sortedEntries);\n    setFilteredEntries(sortedEntries); // Initialize filtered entries\n  }, []);\n\n  // Create a flattened list with date separators (for inverted FlatList)\n  const createEntriesWithDateSeparators = useCallback((entriesList: Entry[]) => {\n    if (entriesList.length === 0) return [];\n\n    // Sort entries chronologically (oldest first)\n    const sortedEntries = [...entriesList].sort((a, b) => a.timestamp.getTime() - b.timestamp.getTime());\n    \n    const result: (Entry | { type: 'dateSeparator'; date: string; id: string })[] = [];\n    let currentDate = '';\n\n    sortedEntries.forEach((entry) => {\n      const entryDate = format(entry.timestamp, 'yyyy-MM-dd');\n      \n      // Add date separator if this is a new date\n      if (entryDate !== currentDate) {\n        result.push({\n          type: 'dateSeparator',\n          date: entryDate,\n          id: `date-${entryDate}`,\n        });\n        currentDate = entryDate;\n      }\n      \n      result.push(entry);\n    });\n\n    // The FlatList inverted prop will handle showing this in reverse order\n    return result;\n  }, []);\n\n  // Filter entries based on search query\n  useEffect(() => {\n    if (!searchQuery.trim()) {\n      setFilteredEntries(entries);\n      return;\n    }\n\n    const query = searchQuery.toLowerCase().trim();\n    const filtered = entries.filter(entry => {\n      // Search in entry text\n      if (entry.text.toLowerCase().includes(query)) {\n        return true;\n      }\n      \n      // Search in date (various formats)\n      const entryDate = format(entry.timestamp, 'yyyy-MM-dd');\n      const entryDateLong = format(entry.timestamp, 'MMMM dd, yyyy');\n      const entryDateShort = format(entry.timestamp, 'MMM dd');\n      \n      if (entryDate.includes(query) || \n          entryDateLong.toLowerCase().includes(query) || \n          entryDateShort.toLowerCase().includes(query)) {\n        return true;\n      }\n      \n      // Search by entry type\n      if (entry.type.toLowerCase().includes(query)) {\n        return true;\n      }\n      \n      return false;\n    });\n    \n    setFilteredEntries(filtered);\n  }, [searchQuery, entries]);\n\n  const getListStyle = (layout: string) => {\n    switch (layout) {\n      case 'cards':\n        return { paddingHorizontal: 8 };\n      case 'list':\n        return { paddingHorizontal: 0, backgroundColor: '#fff' };\n      case 'timeline':\n        return { paddingHorizontal: 0, backgroundColor: '#f8f9fa' };\n      case 'magazine':\n        return { paddingHorizontal: 0, backgroundColor: '#f5f5f5' };\n      case 'minimal':\n        return { paddingHorizontal: 0, backgroundColor: '#fff' };\n      case 'chat':\n      default:\n        return { paddingHorizontal: 16 };\n    }\n  };\n\n  const loadSettings = useCallback(async () => {\n    try {\n      const savedSettings = await StorageService.getSettings();\n      if (savedSettings) {\n        setIsMarkdown(savedSettings.isMarkdownEnabled);\n        setEnterToSend(savedSettings.enterToSend);\n        setLayoutStyle(savedSettings.layoutStyle || 'chat');\n      }\n    } catch (error) {\n      console.error('Error loading settings:', error);\n    }\n  }, []);\n\n  const loadExpensesAndActions = useCallback(async () => {\n    try {\n      const [savedExpenses, savedActionItems] = await Promise.all([\n        StorageService.getExpenses(),\n        StorageService.getActionItems()\n      ]);\n      setExpenses(savedExpenses);\n      setActionItems(savedActionItems);\n    } catch (error) {\n      console.error('Error loading expenses and action items:', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadEntries();\n    loadSettings();\n    loadExpensesAndActions();\n  }, [loadEntries, loadSettings, loadExpensesAndActions]);\n\n  // Entries will auto-scroll via FlatList onLayout and onContentSizeChange\n  useEffect(() => {\n    // This useEffect is kept for potential future scroll enhancements\n  }, [entries.length]);\n\n  const showToast = (message: string) => {\n    alert(message);\n  };\n\n  // Helper function to convert dot-prefix to checkbox format\n  const convertDotToCheckbox = (text: string): string => {\n    // Convert \". task\" to \" task\" (unchecked checkbox)\n    return text.replace(/^\\s*\\.\\s*/, ' ');\n  };\n\n    const handleSendMessage = async () => {\n    const trimmedInput = inputText.trim();\n    if (!trimmedInput) return;\n\n    try {\n      // Convert dot-prefix to checkbox format for display\n      let displayText = trimmedInput;\n      if (TextAnalyzer.detectActionItem(trimmedInput)) {\n        displayText = convertDotToCheckbox(trimmedInput);\n      }\n\n      const entry: Entry = {\n        id: uuid.v4(),\n        text: displayText, // Use the converted text with checkbox\n        timestamp: new Date(),\n        type: 'log',\n        isMarkdown,\n      };\n\n      // Save the entry first\n      await StorageService.addEntry(entry);\n      \n      // Check for expense\n      if (TextAnalyzer.detectExpense(trimmedInput)) {\n        const expenseInfo = TextAnalyzer.extractExpenseInfo(trimmedInput, entry.id);\n        if (expenseInfo) {\n          await StorageService.addExpense(expenseInfo);\n          await updateEntryType(entry.id, 'expense');\n        }\n      }\n\n      // Check for action item (using original text for detection)\n      if (TextAnalyzer.detectActionItem(trimmedInput)) {\n        const actionItem = TextAnalyzer.extractActionItem(trimmedInput, entry.id);\n        if (actionItem) {\n          await StorageService.addActionItem(actionItem);\n          await updateEntryType(entry.id, 'action');\n        }\n      }\n\n      // Reload all data to show updated entries with categorization\n      await loadEntries();\n      await loadExpensesAndActions();\n\n      // Clear input after successful processing\n      setInputText(\"\");\n      \n      // Scroll to bottom (newest message) after sending\n      setTimeout(() => {\n        flatListRef.current?.scrollToEnd({ animated: true });\n      }, 200);\n      \n      // Refocus the text input for better UX - use setTimeout to ensure state update completes\n      setTimeout(() => {\n        if (textInputRef.current) {\n          textInputRef.current.focus();\n        }\n      }, 300);\n    } catch (error) {\n      console.error('Error processing message:', error);\n      showToast('Failed to process message');\n    }\n  };\n\n  const handleLongPress = (entry: Entry) => {\n    Alert.alert(\"Entry Options\", \"What would you like to do with this entry?\", [\n      {\n        text: \"Mark as Expense\",\n        onPress: () => markAsExpense(entry),\n        style: entry.type === \"expense\" ? \"cancel\" : \"default\",\n      },\n      {\n        text: \"Mark as Action Item\",\n        onPress: () => markAsActionItem(entry),\n        style: entry.type === \"action\" ? \"cancel\" : \"default\",\n      },\n      {\n        text: \"Cancel\",\n        style: \"cancel\",\n      },\n    ]);\n  };\n\n  const markAsExpense = async (entry: Entry) => {\n    if (entry.type === \"expense\") return;\n\n    const expenseInfo = TextAnalyzer.extractExpenseInfo(entry.text, entry.id);\n    if (expenseInfo) {\n      await StorageService.addExpense(expenseInfo);\n      await updateEntryType(entry.id, \"expense\");\n      // Reload expenses to show updated categorization\n      await loadExpensesAndActions();\n    } else {\n      Alert.alert(\n        \"Cannot Extract Expense\",\n        \"Could not find amount information in this entry. Please ensure it contains a monetary value.\"\n      );\n    }\n  };\n\n  const markAsActionItem = async (entry: Entry) => {\n    if (entry.type === \"action\") return;\n\n    const actionItem = TextAnalyzer.extractActionItem(entry.text, entry.id);\n    if (actionItem) {\n      await StorageService.addActionItem(actionItem);\n      await updateEntryType(entry.id, \"action\");\n      // Reload action items to show updated categorization\n      await loadExpensesAndActions();\n    }\n  };\n\n  const updateEntryType = async (entryId: string, newType: Entry[\"type\"]) => {\n    try {\n      // Get the latest entries from storage instead of using state\n      const currentEntries = await StorageService.getEntries();\n      \n      const updatedEntries = currentEntries.map((entry: Entry) =>\n        entry.id === entryId ? { ...entry, type: newType } : entry\n      );\n      \n      await StorageService.saveEntries(updatedEntries);\n      \n      // Reload entries to refresh the UI\n      await loadEntries();\n    } catch (error) {\n      console.error('Error updating entry type:', error);\n      showToast('Failed to update entry type');\n    }\n  };\n\n  const renderChatEntry = (item: Entry, expense?: Expense, actionItem?: ActionItem) => (\n    <MessageBubble \n      entry={item} \n      onLongPress={handleLongPress}\n      markdownStyles={markdownStyles}\n      expense={expense}\n      actionItem={actionItem}\n    />\n  );\n\n  const renderCardEntry = (item: Entry, expense?: Expense, actionItem?: ActionItem) => (\n    <View style={layoutStyles.cardContainer}>\n      <View style={layoutStyles.cardHeader}>\n        <Text style={layoutStyles.cardDate}>{format(item.timestamp, 'MMM dd, yyyy')}</Text>\n        <Text style={layoutStyles.cardTime}>{format(item.timestamp, 'h:mm a')}</Text>\n      </View>\n      <View style={layoutStyles.cardContent}>\n        {item.isMarkdown ? (\n          <Markdown style={markdownStyles}>{item.text}</Markdown>\n        ) : (\n          <Text style={layoutStyles.cardText}>{item.text}</Text>\n        )}\n        {expense && (\n          <View style={layoutStyles.expenseTag}>\n            <Text style={layoutStyles.expenseText}>\n               {TextAnalyzer.formatCurrency(expense.amount, expense.currency)}\n            </Text>\n          </View>\n        )}\n        {actionItem && (\n          <View style={layoutStyles.actionTag}>\n            <Text style={layoutStyles.actionText}> Task</Text>\n          </View>\n        )}\n      </View>\n    </View>\n  );\n\n  const renderListEntry = (item: Entry, expense?: Expense, actionItem?: ActionItem) => (\n    <View style={layoutStyles.listContainer}>\n      <View style={layoutStyles.listLeft}>\n        <Text style={layoutStyles.listTime}>{format(item.timestamp, 'h:mm a')}</Text>\n        <View style={layoutStyles.listIndicator} />\n      </View>\n      <View style={layoutStyles.listContent}>\n        {item.isMarkdown ? (\n          <Markdown style={markdownStyles}>{item.text}</Markdown>\n        ) : (\n          <Text style={layoutStyles.listText}>{item.text}</Text>\n        )}\n        <View style={layoutStyles.listMeta}>\n          {expense && (\n            <Text style={layoutStyles.listExpense}>\n               {TextAnalyzer.formatCurrency(expense.amount, expense.currency)}\n            </Text>\n          )}\n          {actionItem && <Text style={layoutStyles.listAction}> Task</Text>}\n        </View>\n      </View>\n    </View>\n  );\n\n  const renderTimelineEntry = (item: Entry, expense?: Expense, actionItem?: ActionItem) => (\n    <View style={layoutStyles.timelineContainer}>\n      <View style={layoutStyles.timelineLeft}>\n        <View style={layoutStyles.timelineDot} />\n        <View style={layoutStyles.timelineLine} />\n      </View>\n      <View style={layoutStyles.timelineContent}>\n        <Text style={layoutStyles.timelineDate}>{format(item.timestamp, 'MMM dd, h:mm a')}</Text>\n        {item.isMarkdown ? (\n          <Markdown style={markdownStyles}>{item.text}</Markdown>\n        ) : (\n          <Text style={layoutStyles.timelineText}>{item.text}</Text>\n        )}\n        {(expense || actionItem) && (\n          <View style={layoutStyles.timelineTags}>\n            {expense && (\n              <Text style={layoutStyles.timelineExpense}>\n                 {TextAnalyzer.formatCurrency(expense.amount, expense.currency)}\n              </Text>\n            )}\n            {actionItem && <Text style={layoutStyles.timelineAction}> Task</Text>}\n          </View>\n        )}\n      </View>\n    </View>\n  );\n\n  const renderMagazineEntry = (item: Entry, expense?: Expense, actionItem?: ActionItem) => (\n    <View style={layoutStyles.magazineContainer}>\n      <View style={layoutStyles.magazineHeader}>\n        <Text style={layoutStyles.magazineDate}>{format(item.timestamp, 'EEEE, MMMM dd')}</Text>\n      </View>\n      <View style={layoutStyles.magazineBody}>\n        {item.isMarkdown ? (\n          <Markdown style={markdownStyles}>{item.text}</Markdown>\n        ) : (\n          <Text style={layoutStyles.magazineText}>{item.text}</Text>\n        )}\n      </View>\n      {(expense || actionItem) && (\n        <View style={layoutStyles.magazineFooter}>\n          {expense && (\n            <View style={layoutStyles.magazineExpenseBlock}>\n              <Text style={layoutStyles.magazineExpenseLabel}>Expense</Text>\n              <Text style={layoutStyles.magazineExpenseAmount}>\n                {TextAnalyzer.formatCurrency(expense.amount, expense.currency)}\n              </Text>\n            </View>\n          )}\n          {actionItem && (\n            <View style={layoutStyles.magazineActionBlock}>\n              <Text style={layoutStyles.magazineActionLabel}>Action Item</Text>\n              <Text style={layoutStyles.magazineActionText}>Task</Text>\n            </View>\n          )}\n        </View>\n      )}\n    </View>\n  );\n\n  const renderMinimalEntry = (item: Entry, expense?: Expense, actionItem?: ActionItem) => (\n    <View style={layoutStyles.minimalContainer}>\n      <View style={layoutStyles.minimalContent}>\n        {item.isMarkdown ? (\n          <Markdown style={markdownStyles}>{item.text}</Markdown>\n        ) : (\n          <Text style={layoutStyles.minimalText}>{item.text}</Text>\n        )}\n      </View>\n      <View style={layoutStyles.minimalMeta}>\n        <Text style={layoutStyles.minimalTime}>{format(item.timestamp, 'h:mm a')}</Text>\n        {expense && <Text style={layoutStyles.minimalExpense}>{TextAnalyzer.formatCurrency(expense.amount, expense.currency)}</Text>}\n        {actionItem && <Text style={layoutStyles.minimalAction}></Text>}\n      </View>\n    </View>\n  );\n\n  // Render date separator component\n  const renderDateSeparator = (dateString: string) => {\n    const date = new Date(dateString);\n    const today = new Date();\n    const yesterday = new Date(today.getTime() - 24 * 60 * 60 * 1000);\n    \n    let displayDate;\n    if (format(date, 'yyyy-MM-dd') === format(today, 'yyyy-MM-dd')) {\n      displayDate = 'Today';\n    } else if (format(date, 'yyyy-MM-dd') === format(yesterday, 'yyyy-MM-dd')) {\n      displayDate = 'Yesterday';\n    } else {\n      displayDate = format(date, 'EEEE, MMMM d, yyyy');\n    }\n\n    return (\n      <View style={styles.dateSeparator}>\n        <View style={styles.dateSeparatorLine} />\n        <Text style={styles.dateSeparatorText}>{displayDate}</Text>\n        <View style={styles.dateSeparatorLine} />\n      </View>\n    );\n  };\n\n  const renderItem = ({ item }: { item: Entry | { type: 'dateSeparator'; date: string; id: string } }) => {\n    // Handle date separator\n    if ('type' in item && item.type === 'dateSeparator') {\n      return renderDateSeparator(item.date);\n    }\n\n    // Handle regular entry\n    const entry = item as Entry;\n    // Find associated expense or action item for this entry\n    const expense = entry.type === 'expense' ? expenses.find(e => e.entryId === entry.id) : undefined;\n    const actionItem = entry.type === 'action' ? actionItems.find(a => a.entryId === entry.id) : undefined;\n    \n    switch (layoutStyle) {\n      case 'cards':\n        return renderCardEntry(entry, expense, actionItem);\n      case 'list':\n        return renderListEntry(entry, expense, actionItem);\n      case 'timeline':\n        return renderTimelineEntry(entry, expense, actionItem);\n      case 'magazine':\n        return renderMagazineEntry(entry, expense, actionItem);\n      case 'minimal':\n        return renderMinimalEntry(entry, expense, actionItem);\n      case 'chat':\n      default:\n        return renderChatEntry(entry, expense, actionItem);\n    }\n  };\n\n  // Get data with date separators\n  const getDataWithSeparators = () => {\n    const baseEntries = showSearch ? filteredEntries : entries;\n    return createEntriesWithDateSeparators(baseEntries);\n  };\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Daily Journal</Text>\n        <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n          <TouchableOpacity\n            style={[styles.settingsButton, { marginRight: 8 }]}\n            onPress={() => setShowSearch(!showSearch)}\n          >\n            <Text style={styles.settingsButtonText}></Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={{ backgroundColor: '#4caf50', padding: 8, borderRadius: 4, marginRight: 8 }}\n            onPress={async () => {\n              const testMessage = testEntries[testIndex];\n              setTestIndex((prev) => (prev + 1) % testEntries.length);\n              \n              // Simulate typing the test message\n              setInputText(testMessage);\n              \n              // Auto-send after a short delay so you can see it being typed\n              setTimeout(async () => {\n                // Convert dot-prefix to checkbox format for display\n                let displayText = testMessage;\n                if (TextAnalyzer.detectActionItem(testMessage)) {\n                  displayText = convertDotToCheckbox(testMessage);\n                }\n\n                const entry: Entry = {\n                  id: uuid.v4(),\n                  text: displayText, // Use the converted text with checkbox\n                  timestamp: new Date(),\n                  type: 'log',\n                  isMarkdown,\n                };\n\n                // Save the entry first\n                await StorageService.addEntry(entry);\n                \n                // Check for expense\n                if (TextAnalyzer.detectExpense(testMessage)) {\n                  const expenseInfo = TextAnalyzer.extractExpenseInfo(testMessage, entry.id);\n                  if (expenseInfo) {\n                    await StorageService.addExpense(expenseInfo);\n                    await updateEntryType(entry.id, 'expense');\n                  }\n                }\n\n                // Check for action item (using original test message for detection)\n                if (TextAnalyzer.detectActionItem(testMessage)) {\n                  const actionItem = TextAnalyzer.extractActionItem(testMessage, entry.id);\n                  if (actionItem) {\n                    await StorageService.addActionItem(actionItem);\n                    await updateEntryType(entry.id, 'action');\n                  }\n                }\n\n                // Reload all data to show updated entries with categorization\n                await loadEntries();\n                await loadExpensesAndActions();\n\n                setInputText(\"\");\n                \n                // Scroll to bottom (newest message) after sending test\n                setTimeout(() => {\n                  flatListRef.current?.scrollToEnd({ animated: true });\n                }, 200);\n              }, 500);\n            }}\n          >\n            <Text style={{ color: 'white', fontSize: 12, fontWeight: 'bold' }}>TEST</Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[styles.settingsButton]}\n            onPress={() => setShowSettings(true)}\n          >\n            <Text style={styles.settingsButtonText}></Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      {showSearch && (\n        <View style={styles.searchContainer}>\n          <TextInput\n            style={styles.searchInput}\n            placeholder=\"Search entries by text, date, or type...\"\n            value={searchQuery}\n            onChangeText={setSearchQuery}\n            autoCapitalize=\"none\"\n            clearButtonMode=\"while-editing\"\n          />\n          {searchQuery.length > 0 && (\n            <TouchableOpacity\n              style={styles.clearButton}\n              onPress={() => setSearchQuery(\"\")}\n            >\n              <Text style={styles.clearButtonText}></Text>\n            </TouchableOpacity>\n          )}\n        </View>\n      )}\n\n      <FlatList\n        ref={flatListRef}\n        data={getDataWithSeparators()}\n        renderItem={renderItem}\n        keyExtractor={(item) => {\n          if ('type' in item && item.type === 'dateSeparator') {\n            return item.id;\n          }\n          return (item as Entry).id;\n        }}\n        style={[styles.messagesList, getListStyle(layoutStyle)]}\n        showsVerticalScrollIndicator={false}\n        onLayout={() => {\n          // Scroll to bottom when FlatList layout is complete\n          if (flatListRef.current) {\n            setTimeout(() => {\n              flatListRef.current?.scrollToEnd({ animated: false });\n            }, 100);\n          }\n        }}\n        onContentSizeChange={() => {\n          // Scroll to bottom when content size changes (new messages)\n          if (flatListRef.current) {\n            setTimeout(() => {\n              flatListRef.current?.scrollToEnd({ animated: false });\n            }, 100);\n          }\n        }}\n        ListEmptyComponent={() => {\n          const isEmpty = showSearch ? filteredEntries.length === 0 : entries.length === 0;\n          const message = showSearch && searchQuery.trim() \n            ? `No entries found matching \"${searchQuery}\"` \n            : \"No messages yet. Type a message below to get started!\";\n          \n          return (\n            <View style={{ padding: 20, alignItems: 'center' }}>\n              <Text style={{ color: '#666', fontSize: 16 }}>\n                {message}\n              </Text>\n            </View>\n          );\n        }}\n      />\n\n      <KeyboardAvoidingView\n        behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n        style={styles.inputContainer}\n      >\n        <TextInput\n          ref={textInputRef}\n          style={styles.textInput}\n          value={inputText}\n          onChangeText={setInputText}\n          placeholder={\n            isMarkdown\n              ? \"Type a message (Markdown supported)...\"\n              : \"Type a message...\"\n          }\n          multiline\n          maxLength={1000}\n          onSubmitEditing={enterToSend ? handleSendMessage : undefined}\n          blurOnSubmit={enterToSend}\n          returnKeyType={enterToSend ? \"send\" : \"default\"}\n        />\n        <TouchableOpacity\n          style={[\n            styles.sendButton,\n            !inputText.trim() && styles.sendButtonDisabled,\n          ]}\n          onPress={handleSendMessage}\n          disabled={!inputText.trim()}\n        >\n          <Text style={{ color: '#fff', fontSize: 16 }}></Text>\n        </TouchableOpacity>\n      </KeyboardAvoidingView>\n      \n      <Modal\n        visible={showSettings}\n        animationType=\"slide\"\n        presentationStyle=\"formSheet\"\n      >\n        <SettingsScreen \n          onClose={() => {\n            setShowSettings(false);\n            // Reload settings after closing\n            loadSettings();\n          }} \n        />\n      </Modal>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#f5f5f5\",\n  },\n  header: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: \"#fff\",\n    borderBottomWidth: 1,\n    borderBottomColor: \"#e0e0e0\",\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n    color: \"#333\",\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  searchInput: {\n    flex: 1,\n    height: 36,\n    paddingHorizontal: 12,\n    backgroundColor: '#f8f8f8',\n    borderRadius: 18,\n    fontSize: 16,\n    color: '#333',\n  },\n  clearButton: {\n    marginLeft: 8,\n    width: 24,\n    height: 24,\n    borderRadius: 12,\n    backgroundColor: '#ccc',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  clearButtonText: {\n    fontSize: 12,\n    color: '#666',\n    fontWeight: 'bold',\n  },\n  settingsButton: {\n    paddingHorizontal: 8,\n    paddingVertical: 6,\n    borderRadius: 16,\n    backgroundColor: \"#f0f0f0\",\n    marginLeft: 8,\n  },\n  settingsButtonText: {\n    fontSize: 16,\n  },\n  messagesList: {\n    flex: 1,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n  },\n  inputContainer: {\n    flexDirection: \"row\",\n    alignItems: \"flex-end\",\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: \"#fff\",\n    borderTopWidth: 1,\n    borderTopColor: \"#e0e0e0\",\n  },\n  textInput: {\n    flex: 1,\n    borderWidth: 1,\n    borderColor: \"#e0e0e0\",\n    borderRadius: 20,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    marginRight: 12,\n    maxHeight: 100,\n    fontSize: 16,\n    backgroundColor: \"#f8f8f8\",\n  },\n  sendButton: {\n    backgroundColor: \"#007AFF\",\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  sendButtonDisabled: {\n    backgroundColor: \"#ccc\",\n  },\n  dateSeparator: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginVertical: 16,\n    paddingHorizontal: 8,\n  },\n  dateSeparatorLine: {\n    flex: 1,\n    height: 1,\n    backgroundColor: '#e0e0e0',\n  },\n  dateSeparatorText: {\n    marginHorizontal: 12,\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#666',\n    backgroundColor: '#f5f5f5',\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n});\n\nconst layoutStyles = StyleSheet.create({\n  // Card Layout Styles\n  cardContainer: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    marginVertical: 6,\n    marginHorizontal: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    overflow: 'hidden',\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    backgroundColor: '#f8f9fa',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e9ecef',\n  },\n  cardDate: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#495057',\n  },\n  cardTime: {\n    fontSize: 12,\n    color: '#6c757d',\n  },\n  cardContent: {\n    padding: 16,\n  },\n  cardText: {\n    fontSize: 16,\n    lineHeight: 22,\n    color: '#212529',\n    marginBottom: 8,\n  },\n  expenseTag: {\n    backgroundColor: '#d4edda',\n    borderRadius: 12,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    alignSelf: 'flex-start',\n    marginTop: 8,\n  },\n  expenseText: {\n    fontSize: 12,\n    color: '#155724',\n    fontWeight: '500',\n  },\n  actionTag: {\n    backgroundColor: '#cce5ff',\n    borderRadius: 12,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    alignSelf: 'flex-start',\n    marginTop: 8,\n  },\n  actionText: {\n    fontSize: 12,\n    color: '#004085',\n    fontWeight: '500',\n  },\n  \n  // List Layout Styles\n  listContainer: {\n    flexDirection: 'row',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e9ecef',\n  },\n  listLeft: {\n    alignItems: 'center',\n    marginRight: 16,\n    width: 60,\n  },\n  listTime: {\n    fontSize: 12,\n    color: '#6c757d',\n    fontWeight: '500',\n    marginBottom: 4,\n  },\n  listIndicator: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#007bff',\n  },\n  listContent: {\n    flex: 1,\n  },\n  listText: {\n    fontSize: 16,\n    lineHeight: 22,\n    color: '#212529',\n    marginBottom: 6,\n  },\n  listMeta: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  listExpense: {\n    fontSize: 12,\n    color: '#28a745',\n    fontWeight: '500',\n  },\n  listAction: {\n    fontSize: 12,\n    color: '#007bff',\n    fontWeight: '500',\n  },\n  \n  // Timeline Layout Styles\n  timelineContainer: {\n    flexDirection: 'row',\n    paddingVertical: 16,\n    paddingHorizontal: 16,\n  },\n  timelineLeft: {\n    alignItems: 'center',\n    marginRight: 16,\n    width: 20,\n  },\n  timelineDot: {\n    width: 12,\n    height: 12,\n    borderRadius: 6,\n    backgroundColor: '#007bff',\n    zIndex: 1,\n  },\n  timelineLine: {\n    width: 2,\n    flex: 1,\n    backgroundColor: '#dee2e6',\n    marginTop: 4,\n  },\n  timelineContent: {\n    flex: 1,\n    backgroundColor: '#fff',\n    borderRadius: 8,\n    padding: 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.05,\n    shadowRadius: 2,\n    elevation: 1,\n  },\n  timelineDate: {\n    fontSize: 12,\n    color: '#6c757d',\n    fontWeight: '500',\n    marginBottom: 8,\n  },\n  timelineText: {\n    fontSize: 16,\n    lineHeight: 22,\n    color: '#212529',\n  },\n  timelineTags: {\n    flexDirection: 'row',\n    marginTop: 12,\n    gap: 8,\n  },\n  timelineExpense: {\n    fontSize: 12,\n    color: '#28a745',\n    backgroundColor: '#d4edda',\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 8,\n  },\n  timelineAction: {\n    fontSize: 12,\n    color: '#007bff',\n    backgroundColor: '#cce5ff',\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 8,\n  },\n  \n  // Magazine Layout Styles\n  magazineContainer: {\n    backgroundColor: '#fff',\n    marginVertical: 8,\n    marginHorizontal: 16,\n    borderRadius: 8,\n    overflow: 'hidden',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  magazineHeader: {\n    backgroundColor: '#343a40',\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n  },\n  magazineDate: {\n    fontSize: 14,\n    color: '#fff',\n    fontWeight: '600',\n    textTransform: 'uppercase',\n    letterSpacing: 0.5,\n  },\n  magazineBody: {\n    paddingHorizontal: 20,\n    paddingVertical: 16,\n  },\n  magazineText: {\n    fontSize: 17,\n    lineHeight: 26,\n    color: '#212529',\n    fontFamily: Platform.OS === 'ios' ? 'Georgia' : 'serif',\n  },\n  magazineFooter: {\n    flexDirection: 'row',\n    paddingHorizontal: 20,\n    paddingBottom: 16,\n    gap: 16,\n  },\n  magazineExpenseBlock: {\n    flex: 1,\n  },\n  magazineExpenseLabel: {\n    fontSize: 10,\n    color: '#6c757d',\n    fontWeight: '600',\n    textTransform: 'uppercase',\n    marginBottom: 2,\n  },\n  magazineExpenseAmount: {\n    fontSize: 16,\n    color: '#28a745',\n    fontWeight: '600',\n  },\n  magazineActionBlock: {\n    flex: 1,\n  },\n  magazineActionLabel: {\n    fontSize: 10,\n    color: '#6c757d',\n    fontWeight: '600',\n    textTransform: 'uppercase',\n    marginBottom: 2,\n  },\n  magazineActionText: {\n    fontSize: 16,\n    color: '#007bff',\n    fontWeight: '600',\n  },\n  \n  // Minimal Layout Styles\n  minimalContainer: {\n    flexDirection: 'row',\n    paddingVertical: 0, // Eliminated all vertical padding for maximum density\n    paddingHorizontal: 20,\n    alignItems: 'flex-start',\n  },\n  minimalContent: {\n    flex: 1,\n    marginRight: 16,\n  },\n  minimalText: {\n    fontSize: 16,\n    lineHeight: 22,\n    color: '#212529',\n  },\n  minimalMeta: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  minimalTime: {\n    fontSize: 12,\n    color: '#9ca3af',\n  },\n  minimalExpense: {\n    fontSize: 12,\n    color: '#28a745',\n  },\n  minimalAction: {\n    fontSize: 12,\n    color: '#007bff',\n  },\n});\n\nconst markdownStyles = StyleSheet.create({\n  body: {\n    fontSize: 16,\n    color: \"#333\",\n    lineHeight: 20,\n  },\n  heading1: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n    marginBottom: 8,\n  },\n  heading2: {\n    fontSize: 18,\n    fontWeight: \"bold\",\n    marginBottom: 6,\n  },\n  strong: {\n    fontWeight: \"bold\",\n  },\n  em: {\n    fontStyle: \"italic\",\n  },\n  code_inline: {\n    backgroundColor: \"#f0f0f0\",\n    paddingHorizontal: 4,\n    paddingVertical: 2,\n    borderRadius: 3,\n    fontFamily: \"monospace\",\n  },\n});\n","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  FlatList,\n  TouchableOpacity,\n  StyleSheet,\n  Alert,\n  Modal,\n  TextInput,\n} from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { format } from 'date-fns';\n\nimport { ActionItem } from '../types';\nimport { StorageService } from '../utils/storage';\n\ninterface ActionItemCardProps {\n  item: ActionItem;\n  onToggleComplete: (id: string) => void;\n  onEdit: (item: ActionItem) => void;\n  onDelete: (id: string) => void;\n}\n\nconst ActionItemCard: React.FC<ActionItemCardProps> = ({\n  item,\n  onToggleComplete,\n  onEdit,\n  onDelete,\n}) => {\n  return (\n    <View style={[styles.itemCard, item.completed && styles.completedCard]}>\n      <TouchableOpacity\n        style={styles.itemHeader}\n        onPress={() => onToggleComplete(item.id)}\n        activeOpacity={0.7}\n      >\n        <Ionicons\n          name={item.completed ? \"checkbox\" : \"checkbox-outline\"}\n          size={24}\n          color={item.completed ? \"#4caf50\" : \"#666\"}\n        />\n        <Text style={[styles.itemTitle, item.completed && styles.completedText]}>\n          {item.title}\n        </Text>\n      </TouchableOpacity>\n\n      {item.description && item.description !== item.title && (\n        <Text style={[styles.itemDescription, item.completed && styles.completedText]}>\n          {item.description}\n        </Text>\n      )}\n\n      <View style={styles.itemFooter}>\n        <Text style={styles.itemDate}>\n          Created: {format(item.createdAt, 'MMM d, yyyy HH:mm')}\n        </Text>\n        <View style={styles.itemActions}>\n          <TouchableOpacity\n            style={styles.actionButton}\n            onPress={() => onEdit(item)}\n            activeOpacity={0.7}\n            hitSlop={{ top: 15, bottom: 15, left: 15, right: 15 }}\n          >\n            <Ionicons name=\"pencil\" size={18} color=\"#666\" />\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[styles.actionButton, styles.deleteButton]}\n            onPress={() => onDelete(item.id)}\n            activeOpacity={0.7}\n            hitSlop={{ top: 15, bottom: 15, left: 15, right: 15 }}\n          >\n            <Ionicons name=\"trash\" size={18} color=\"#fff\" />\n          </TouchableOpacity>\n        </View>\n      </View>\n    </View>\n  );\n};\n\ninterface EditModalProps {\n  visible: boolean;\n  item: ActionItem | null;\n  onSave: (item: ActionItem) => void;\n  onCancel: () => void;\n}\n\nconst EditModal: React.FC<EditModalProps> = ({ visible, item, onSave, onCancel }) => {\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n\n  useEffect(() => {\n    if (item) {\n      setTitle(item.title);\n      setDescription(item.description || '');\n    }\n  }, [item]);\n\n  const handleSave = () => {\n    if (!item || !title.trim()) return;\n\n    const updatedItem: ActionItem = {\n      ...item,\n      title: title.trim(),\n      description: description.trim(),\n    };\n\n    onSave(updatedItem);\n  };\n\n  return (\n    <Modal visible={visible} animationType=\"slide\" transparent>\n      <View style={styles.modalContainer}>\n        <View style={styles.modalContent}>\n          <Text style={styles.modalTitle}>Edit Action Item</Text>\n\n          <TextInput\n            style={styles.modalInput}\n            value={title}\n            onChangeText={setTitle}\n            placeholder=\"Title\"\n            multiline\n          />\n\n          <TextInput\n            style={[styles.modalInput, styles.modalInputLarge]}\n            value={description}\n            onChangeText={setDescription}\n            placeholder=\"Description (optional)\"\n            multiline\n          />\n\n          <View style={styles.modalButtons}>\n            <TouchableOpacity style={styles.modalButton} onPress={onCancel}>\n              <Text style={styles.modalButtonText}>Cancel</Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={[styles.modalButton, styles.modalButtonPrimary]}\n              onPress={handleSave}\n            >\n              <Text style={[styles.modalButtonText, styles.modalButtonTextPrimary]}>\n                Save\n              </Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nexport const ActionItemsScreen: React.FC = () => {\n  const [actionItems, setActionItems] = useState<ActionItem[]>([]);\n  const [filter, setFilter] = useState<'all' | 'pending' | 'completed'>('all');\n  const [editingItem, setEditingItem] = useState<ActionItem | null>(null);\n  const [modalVisible, setModalVisible] = useState(false);\n\n  const loadActionItems = useCallback(async () => {\n    const items = await StorageService.getActionItems();\n    setActionItems(items.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime()));\n  }, []);\n\n  useEffect(() => {\n    loadActionItems();\n  }, [loadActionItems]);\n\n  const filteredItems = actionItems.filter(item => {\n    switch (filter) {\n      case 'pending':\n        return !item.completed;\n      case 'completed':\n        return item.completed;\n      default:\n        return true;\n    }\n  });\n\n  const handleToggleComplete = async (id: string) => {\n    const item = actionItems.find(item => item.id === id);\n    if (!item) return;\n\n    const updatedItem = { ...item, completed: !item.completed };\n    await StorageService.updateActionItem(id, { completed: !item.completed });\n    \n    setActionItems(prev =>\n      prev.map(item => (item.id === id ? updatedItem : item))\n    );\n  };\n\n  const handleEdit = (item: ActionItem) => {\n    setEditingItem(item);\n    setModalVisible(true);\n  };\n\n  const handleSaveEdit = async (updatedItem: ActionItem) => {\n    await StorageService.updateActionItem(updatedItem.id, {\n      title: updatedItem.title,\n      description: updatedItem.description,\n    });\n\n    setActionItems(prev =>\n      prev.map(item => (item.id === updatedItem.id ? updatedItem : item))\n    );\n\n    setModalVisible(false);\n    setEditingItem(null);\n  };\n\n  const handleDelete = async (id: string) => {\n    // Use window.confirm for web compatibility instead of Alert.alert\n    const confirmed = typeof window !== 'undefined' \n      ? window.confirm('Are you sure you want to delete this action item?')\n      : true; // On mobile, proceed directly\n    \n    if (confirmed) {\n      try {\n        await StorageService.deleteActionItem(id);\n        setActionItems(prev => prev.filter(item => item.id !== id));\n      } catch (error) {\n        console.error('Error deleting action item:', error);\n      }\n    }\n  };\n\n  const renderActionItem = ({ item }: { item: ActionItem }) => (\n    <ActionItemCard\n      item={item}\n      onToggleComplete={handleToggleComplete}\n      onEdit={handleEdit}\n      onDelete={handleDelete}\n    />\n  );\n\n  const getFilterButtonStyle = (filterType: typeof filter) => [\n    styles.filterButton,\n    filter === filterType && styles.filterButtonActive,\n  ];\n\n  const getFilterTextStyle = (filterType: typeof filter) => [\n    styles.filterButtonText,\n    filter === filterType && styles.filterButtonTextActive,\n  ];\n\n  const pendingCount = actionItems.filter(item => !item.completed).length;\n  const completedCount = actionItems.filter(item => item.completed).length;\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Action Items</Text>\n        <View style={styles.stats}>\n          <Text style={styles.statsText}>\n            {pendingCount} pending  {completedCount} completed\n          </Text>\n        </View>\n      </View>\n\n      <View style={styles.filterContainer}>\n        <TouchableOpacity\n          style={getFilterButtonStyle('all')}\n          onPress={() => setFilter('all')}\n        >\n          <Text style={getFilterTextStyle('all')}>All</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={getFilterButtonStyle('pending')}\n          onPress={() => setFilter('pending')}\n        >\n          <Text style={getFilterTextStyle('pending')}>Pending</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={getFilterButtonStyle('completed')}\n          onPress={() => setFilter('completed')}\n        >\n          <Text style={getFilterTextStyle('completed')}>Completed</Text>\n        </TouchableOpacity>\n      </View>\n\n      {filteredItems.length === 0 ? (\n        <View style={styles.emptyContainer}>\n          <Ionicons name=\"checkbox-outline\" size={64} color=\"#ccc\" />\n          <Text style={styles.emptyText}>\n            {filter === 'all'\n              ? 'No action items yet'\n              : filter === 'pending'\n              ? 'No pending action items'\n              : 'No completed action items'}\n          </Text>\n          <Text style={styles.emptySubtext}>\n            Add entries in your journal to create action items\n          </Text>\n        </View>\n      ) : (\n        <FlatList\n          data={filteredItems}\n          renderItem={renderActionItem}\n          keyExtractor={(item) => item.id}\n          style={styles.list}\n          showsVerticalScrollIndicator={false}\n        />\n      )}\n\n      <EditModal\n        visible={modalVisible}\n        item={editingItem}\n        onSave={handleSaveEdit}\n        onCancel={() => {\n          setModalVisible(false);\n          setEditingItem(null);\n        }}\n      />\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n  },\n  header: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 4,\n  },\n  stats: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  statsText: {\n    fontSize: 14,\n    color: '#666',\n  },\n  filterContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  filterButton: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    marginRight: 8,\n    borderRadius: 20,\n    backgroundColor: '#f0f0f0',\n  },\n  filterButtonActive: {\n    backgroundColor: '#007AFF',\n  },\n  filterButtonText: {\n    fontSize: 14,\n    color: '#666',\n    fontWeight: '500',\n  },\n  filterButtonTextActive: {\n    color: '#fff',\n  },\n  list: {\n    flex: 1,\n    paddingHorizontal: 16,\n  },\n  itemCard: {\n    backgroundColor: '#fff',\n    marginVertical: 6,\n    padding: 16,\n    borderRadius: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  completedCard: {\n    backgroundColor: '#f8f8f8',\n    opacity: 0.8,\n  },\n  itemHeader: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  itemTitle: {\n    flex: 1,\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#333',\n    marginLeft: 12,\n    lineHeight: 20,\n  },\n  completedText: {\n    textDecorationLine: 'line-through',\n    color: '#666',\n  },\n  itemDescription: {\n    fontSize: 14,\n    color: '#666',\n    lineHeight: 18,\n    marginBottom: 12,\n    marginLeft: 36,\n  },\n  itemFooter: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginTop: 8,\n  },\n  itemDate: {\n    fontSize: 12,\n    color: '#999',\n  },\n  itemActions: {\n    flexDirection: 'row',\n  },\n  actionButton: {\n    padding: 10,\n    marginLeft: 8,\n    minWidth: 36,\n    minHeight: 36,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 6,\n    backgroundColor: 'rgba(0,0,0,0.05)',\n    borderWidth: 1,\n    borderColor: 'rgba(0,0,0,0.1)',\n  },\n  deleteButton: {\n    backgroundColor: '#f44336',\n    borderColor: '#d32f2f',\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 40,\n  },\n  emptyText: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#666',\n    marginTop: 16,\n    textAlign: 'center',\n  },\n  emptySubtext: {\n    fontSize: 14,\n    color: '#999',\n    marginTop: 8,\n    textAlign: 'center',\n    lineHeight: 20,\n  },\n  modalContainer: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 20,\n    width: '90%',\n    maxWidth: 400,\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 16,\n    textAlign: 'center',\n  },\n  modalInput: {\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n    borderRadius: 8,\n    padding: 12,\n    marginBottom: 12,\n    fontSize: 16,\n    minHeight: 44,\n  },\n  modalInputLarge: {\n    minHeight: 80,\n    textAlignVertical: 'top',\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 16,\n  },\n  modalButton: {\n    flex: 1,\n    paddingVertical: 12,\n    borderRadius: 8,\n    marginHorizontal: 4,\n    backgroundColor: '#f0f0f0',\n  },\n  modalButtonPrimary: {\n    backgroundColor: '#007AFF',\n  },\n  modalButtonText: {\n    textAlign: 'center',\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#333',\n  },\n  modalButtonTextPrimary: {\n    color: '#fff',\n  },\n});\n","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  FlatList,\n  TouchableOpacity,\n  StyleSheet,\n  Alert,\n  Modal,\n  TextInput,\n  ScrollView,\n} from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { format, startOfMonth, endOfMonth, isWithinInterval } from 'date-fns';\n\nimport { Expense } from '../types';\nimport { StorageService } from '../utils/storage';\nimport { TextAnalyzer } from '../utils/textAnalysis';\n\ninterface ExpenseCardProps {\n  expense: Expense;\n  onEdit: (expense: Expense) => void;\n  onDelete: (id: string) => void;\n}\n\nconst ExpenseCard: React.FC<ExpenseCardProps> = ({ expense, onEdit, onDelete }) => {\n  return (\n    <View style={styles.expenseCard}>\n      <View style={styles.expenseHeader}>\n        <View style={styles.expenseAmount}>\n          <Text style={styles.amountText}>\n            {TextAnalyzer.formatCurrency(expense.amount, expense.currency)}\n          </Text>\n          {expense.category && (\n            <Text style={styles.categoryText}>{expense.category}</Text>\n          )}\n        </View>\n        <View style={styles.expenseActions}>\n          <TouchableOpacity\n            style={styles.actionButton}\n            onPress={() => onEdit(expense)}\n            activeOpacity={0.7}\n            hitSlop={{ top: 15, bottom: 15, left: 15, right: 15 }}\n          >\n            <Ionicons name=\"pencil\" size={18} color=\"#666\" />\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[styles.actionButton, styles.deleteButton]}\n            onPress={() => onDelete(expense.id)}\n            activeOpacity={0.7}\n            hitSlop={{ top: 15, bottom: 15, left: 15, right: 15 }}\n          >\n            <Ionicons name=\"trash\" size={18} color=\"#fff\" />\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      <Text style={styles.expenseDescription} numberOfLines={2}>\n        {expense.description}\n      </Text>\n\n      <Text style={styles.expenseDate}>\n        {format(expense.createdAt, 'MMM d, yyyy HH:mm')}\n      </Text>\n    </View>\n  );\n};\n\ninterface EditExpenseModalProps {\n  visible: boolean;\n  expense: Expense | null;\n  onSave: (expense: Expense) => void;\n  onCancel: () => void;\n}\n\nconst EditExpenseModal: React.FC<EditExpenseModalProps> = ({\n  visible,\n  expense,\n  onSave,\n  onCancel,\n}) => {\n  const [amount, setAmount] = useState('');\n  const [currency, setCurrency] = useState('USD');\n  const [description, setDescription] = useState('');\n  const [category, setCategory] = useState('');\n\n  const currencies = ['USD', 'INR', 'EUR', 'GBP'];\n  const categories = [\n    'Food', 'Transportation', 'Shopping', 'Entertainment', 'Bills',\n    'Healthcare', 'Education', 'Travel', 'Other'\n  ];\n\n  useEffect(() => {\n    if (expense) {\n      setAmount(expense.amount.toString());\n      setCurrency(expense.currency);\n      setDescription(expense.description);\n      setCategory(expense.category || '');\n    }\n  }, [expense]);\n\n  const handleSave = () => {\n    if (!expense || !amount.trim() || !description.trim()) return;\n\n    const numericAmount = parseFloat(amount);\n    if (isNaN(numericAmount) || numericAmount <= 0) {\n      Alert.alert('Invalid Amount', 'Please enter a valid amount greater than 0');\n      return;\n    }\n\n    const updatedExpense: Expense = {\n      ...expense,\n      amount: numericAmount,\n      currency,\n      description: description.trim(),\n      category: category.trim() || undefined,\n    };\n\n    onSave(updatedExpense);\n  };\n\n  return (\n    <Modal visible={visible} animationType=\"slide\" transparent>\n      <View style={styles.modalContainer}>\n        <View style={styles.modalContent}>\n          <Text style={styles.modalTitle}>Edit Expense</Text>\n\n          <TextInput\n            style={styles.modalInput}\n            value={amount}\n            onChangeText={setAmount}\n            placeholder=\"Amount\"\n            keyboardType=\"numeric\"\n          />\n\n          <View style={styles.currencyContainer}>\n            <Text style={styles.inputLabel}>Currency:</Text>\n            <View style={styles.currencyOptions}>\n              {currencies.map((curr) => (\n                <TouchableOpacity\n                  key={curr}\n                  style={[\n                    styles.currencyButton,\n                    currency === curr && styles.currencyButtonActive,\n                  ]}\n                  onPress={() => setCurrency(curr)}\n                >\n                  <Text\n                    style={[\n                      styles.currencyButtonText,\n                      currency === curr && styles.currencyButtonTextActive,\n                    ]}\n                  >\n                    {curr}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n          </View>\n\n          <TextInput\n            style={[styles.modalInput, styles.modalInputLarge]}\n            value={description}\n            onChangeText={setDescription}\n            placeholder=\"Description\"\n            multiline\n          />\n\n          <View style={styles.categoryContainer}>\n            <Text style={styles.inputLabel}>Category (optional):</Text>\n            <View style={styles.categoryOptions}>\n              {categories.map((cat) => (\n                <TouchableOpacity\n                  key={cat}\n                  style={[\n                    styles.categoryButton,\n                    category === cat && styles.categoryButtonActive,\n                  ]}\n                  onPress={() => setCategory(category === cat ? '' : cat)}\n                >\n                  <Text\n                    style={[\n                      styles.categoryButtonText,\n                      category === cat && styles.categoryButtonTextActive,\n                    ]}\n                  >\n                    {cat}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n          </View>\n\n          <View style={styles.modalButtons}>\n            <TouchableOpacity style={styles.modalButton} onPress={onCancel}>\n              <Text style={styles.modalButtonText}>Cancel</Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={[styles.modalButton, styles.modalButtonPrimary]}\n              onPress={handleSave}\n            >\n              <Text style={[styles.modalButtonText, styles.modalButtonTextPrimary]}>\n                Save\n              </Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nexport const ExpensesScreen: React.FC = () => {\n  const [expenses, setExpenses] = useState<Expense[]>([]);\n  const [filter, setFilter] = useState<'all' | 'thisMonth'>('all');\n  const [editingExpense, setEditingExpense] = useState<Expense | null>(null);\n  const [modalVisible, setModalVisible] = useState(false);\n  const [viewMode, setViewMode] = useState<'list' | 'analytics'>('list');\n\n  const loadExpenses = useCallback(async () => {\n    const expenseList = await StorageService.getExpenses();\n    setExpenses(expenseList.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime()));\n  }, []);\n\n  // Load expenses on initial mount\n  useEffect(() => {\n    loadExpenses();\n  }, [loadExpenses]);\n\n  // Refresh expenses when the screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      loadExpenses();\n    }, [loadExpenses])\n  );\n\n  const filteredExpenses = expenses.filter(expense => {\n    if (filter === 'thisMonth') {\n      const now = new Date();\n      const monthStart = startOfMonth(now);\n      const monthEnd = endOfMonth(now);\n      return isWithinInterval(expense.createdAt, { start: monthStart, end: monthEnd });\n    }\n    return true;\n  });\n\n  interface TotalAmount {\n    currency: string;\n    amount: number;\n    formatted: string;\n  }\n\n  const getTotalAmount = (expenseList: Expense[]): TotalAmount[] => {\n    if (expenseList.length === 0) {\n      return [];\n    }\n\n    const totals: Record<string, number> = {};\n    \n    // Group expenses by currency and sum amounts\n    expenseList.forEach(expense => {\n      totals[expense.currency] = (totals[expense.currency] || 0) + expense.amount;\n    });\n\n    // Convert totals to array of TotalAmount objects\n    return Object.keys(totals).map((currency): TotalAmount => ({\n      currency,\n      amount: totals[currency],\n      formatted: TextAnalyzer.formatCurrency(totals[currency], currency)\n    }));\n  };\n\n  // Category analytics\n  const getCategoryBreakdown = (expenseList: Expense[]) => {\n    const categoryTotals: Record<string, { amount: number; count: number; currency: string }> = {};\n    \n    expenseList.forEach(expense => {\n      const category = expense.category || 'Other';\n      if (!categoryTotals[category]) {\n        categoryTotals[category] = { amount: 0, count: 0, currency: expense.currency };\n      }\n      categoryTotals[category].amount += expense.amount;\n      categoryTotals[category].count += 1;\n    });\n\n    return Object.entries(categoryTotals)\n      .map(([category, data]) => ({\n        category,\n        amount: data.amount,\n        count: data.count,\n        currency: data.currency,\n        formatted: TextAnalyzer.formatCurrency(data.amount, data.currency)\n      }))\n      .sort((a, b) => b.amount - a.amount);\n  };\n\n  const getMonthlyTrend = () => {\n    const monthlyData: Record<string, { amount: number; count: number }> = {};\n    \n    expenses.forEach(expense => {\n      const monthKey = format(expense.createdAt, 'MMM yyyy');\n      if (!monthlyData[monthKey]) {\n        monthlyData[monthKey] = { amount: 0, count: 0 };\n      }\n      monthlyData[monthKey].amount += expense.amount;\n      monthlyData[monthKey].count += 1;\n    });\n\n    return Object.entries(monthlyData)\n      .map(([month, data]) => ({\n        month,\n        amount: data.amount,\n        count: data.count\n      }))\n      .sort((a, b) => new Date(a.month).getTime() - new Date(b.month).getTime());\n  };\n\n  const handleEdit = (expense: Expense) => {\n    setEditingExpense(expense);\n    setModalVisible(true);\n  };\n\n  const handleSaveEdit = async (updatedExpense: Expense) => {\n    await StorageService.updateExpense(updatedExpense.id, {\n      amount: updatedExpense.amount,\n      currency: updatedExpense.currency,\n      description: updatedExpense.description,\n      category: updatedExpense.category,\n    });\n\n    setExpenses(prev =>\n      prev.map(expense => (expense.id === updatedExpense.id ? updatedExpense : expense))\n    );\n\n    setModalVisible(false);\n    setEditingExpense(null);\n  };\n\n  const handleDelete = async (id: string) => {\n    // Use window.confirm for web compatibility instead of Alert.alert\n    const confirmed = typeof window !== 'undefined' \n      ? window.confirm('Are you sure you want to delete this expense?')\n      : true; // On mobile, proceed directly\n    \n    if (confirmed) {\n      try {\n        await StorageService.deleteExpense(id);\n        setExpenses(prev => prev.filter(expense => expense.id !== id));\n      } catch (error) {\n        console.error('Error deleting expense:', error);\n      }\n    }\n  };\n\n  const renderExpense = ({ item }: { item: Expense }) => (\n    <ExpenseCard\n      expense={item}\n      onEdit={handleEdit}\n      onDelete={handleDelete}\n    />\n  );\n\n  const getFilterButtonStyle = (filterType: typeof filter) => [\n    styles.filterButton,\n    filter === filterType && styles.filterButtonActive,\n  ];\n\n  const getFilterTextStyle = (filterType: typeof filter) => [\n    styles.filterButtonText,\n    filter === filterType && styles.filterButtonTextActive,\n  ];\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Expenses</Text>\n        <View style={styles.totalsContainer}>\n          {filteredExpenses.length === 0 ? (\n            <View style={styles.totalContainer}>\n              <Text style={styles.totalLabel}>Total:</Text>\n              <Text style={styles.totalAmount}>$0.00</Text>\n            </View>\n          ) : (\n            getTotalAmount(filteredExpenses).map((total) => (\n              <View key={total.currency} style={styles.totalContainer}>\n                <Text style={styles.totalLabel}>{total.currency} Total:</Text>\n                <Text style={styles.totalAmount}>{total.formatted}</Text>\n              </View>\n            ))\n          )}\n        </View>\n      </View>\n\n      <View style={styles.filterContainer}>\n        <TouchableOpacity\n          style={getFilterButtonStyle('all')}\n          onPress={() => setFilter('all')}\n        >\n          <Text style={getFilterTextStyle('all')}>All Time</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={getFilterButtonStyle('thisMonth')}\n          onPress={() => setFilter('thisMonth')}\n        >\n          <Text style={getFilterTextStyle('thisMonth')}>This Month</Text>\n        </TouchableOpacity>\n      </View>\n\n      {/* View Mode Toggle */}\n      <View style={styles.viewToggleContainer}>\n        <TouchableOpacity\n          style={[styles.viewToggleButton, viewMode === 'list' && styles.viewToggleButtonActive]}\n          onPress={() => setViewMode('list')}\n        >\n          <Text style={[styles.viewToggleText, viewMode === 'list' && styles.viewToggleTextActive]}>List</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={[styles.viewToggleButton, viewMode === 'analytics' && styles.viewToggleButtonActive]}\n          onPress={() => setViewMode('analytics')}\n        >\n          <Text style={[styles.viewToggleText, viewMode === 'analytics' && styles.viewToggleTextActive]}>Analytics</Text>\n        </TouchableOpacity>\n      </View>\n\n      {filteredExpenses.length === 0 ? (\n        <View style={styles.emptyContainer}>\n          <Ionicons name=\"receipt-outline\" size={64} color=\"#ccc\" />\n          <Text style={styles.emptyText}>\n            {filter === 'all' ? 'No expenses yet' : 'No expenses this month'}\n          </Text>\n          <Text style={styles.emptySubtext}>\n            Add entries in your journal to track expenses\n          </Text>\n        </View>\n      ) : (\n        viewMode === 'list' ? (\n          <FlatList\n            data={filteredExpenses}\n            renderItem={renderExpense}\n            keyExtractor={(item) => item.id}\n            style={styles.list}\n            showsVerticalScrollIndicator={false}\n          />\n        ) : (\n          <ScrollView style={styles.analyticsContainer} showsVerticalScrollIndicator={false}>\n            {/* Category Breakdown */}\n            <View style={styles.analyticsSection}>\n              <Text style={styles.analyticsSectionTitle}> Category Breakdown</Text>\n              {getCategoryBreakdown(filteredExpenses).map((category, index) => (\n                <View key={category.category} style={styles.categoryAnalyticsItem}>\n                  <View style={styles.categoryAnalyticsInfo}>\n                    <Text style={styles.categoryAnalyticsName}>{category.category}</Text>\n                    <Text style={styles.categoryAnalyticsCount}>\n                      {category.count} {category.count === 1 ? 'expense' : 'expenses'}\n                    </Text>\n                  </View>\n                  <Text style={styles.categoryAnalyticsAmount}>{category.formatted}</Text>\n                </View>\n              ))}\n            </View>\n\n            {/* Monthly Trends */}\n            <View style={styles.analyticsSection}>\n              <Text style={styles.analyticsSectionTitle}> Monthly Trends</Text>\n              {getMonthlyTrend().map((trend, index) => (\n                <View key={trend.month} style={styles.trendItem}>\n                  <Text style={styles.trendMonth}>{trend.month}</Text>\n                  <View style={{ alignItems: 'flex-end' }}>\n                    <Text style={styles.trendAmount}>\n                      {TextAnalyzer.formatCurrency(trend.amount, 'USD')}\n                    </Text>\n                    <Text style={styles.categoryAnalyticsCount}>\n                      {trend.count} {trend.count === 1 ? 'expense' : 'expenses'}\n                    </Text>\n                  </View>\n                </View>\n              ))}\n            </View>\n\n            {/* Quick Stats */}\n            <View style={styles.analyticsSection}>\n              <Text style={styles.analyticsSectionTitle}> Quick Stats</Text>\n              <View style={styles.trendItem}>\n                <Text style={styles.trendMonth}>Average per expense</Text>\n                <Text style={styles.trendAmount}>\n                  {filteredExpenses.length > 0\n                    ? TextAnalyzer.formatCurrency(\n                        filteredExpenses.reduce((sum, exp) => sum + exp.amount, 0) / filteredExpenses.length,\n                        filteredExpenses[0].currency\n                      )\n                    : '$0.00'\n                  }\n                </Text>\n              </View>\n              <View style={styles.trendItem}>\n                <Text style={styles.trendMonth}>Most expensive category</Text>\n                <Text style={styles.trendAmount}>\n                  {getCategoryBreakdown(filteredExpenses)[0]?.category || 'None'}\n                </Text>\n              </View>\n              <View style={styles.trendItem}>\n                <Text style={styles.trendMonth}>Total categories</Text>\n                <Text style={styles.trendAmount}>\n                  {getCategoryBreakdown(filteredExpenses).length}\n                </Text>\n              </View>\n            </View>\n          </ScrollView>\n        )\n      )}\n\n      <EditExpenseModal\n        visible={modalVisible}\n        expense={editingExpense}\n        onSave={handleSaveEdit}\n        onCancel={() => {\n          setModalVisible(false);\n          setEditingExpense(null);\n        }}\n      />\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n  },\n  header: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 8,\n  },\n  totalsContainer: {\n    paddingHorizontal: 16,\n    paddingTop: 8,\n  },\n  totalContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  totalLabel: {\n    fontSize: 14,\n    color: '#666',\n    marginRight: 8,\n  },\n  totalAmount: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#2e7d32',\n  },\n  filterContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  filterButton: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    marginRight: 8,\n    borderRadius: 20,\n    backgroundColor: '#f0f0f0',\n  },\n  filterButtonActive: {\n    backgroundColor: '#007AFF',\n  },\n  filterButtonText: {\n    fontSize: 14,\n    color: '#666',\n    fontWeight: '500',\n  },\n  filterButtonTextActive: {\n    color: '#fff',\n  },\n  list: {\n    flex: 1,\n    paddingHorizontal: 16,\n  },\n  expenseCard: {\n    backgroundColor: '#fff',\n    marginVertical: 6,\n    padding: 16,\n    borderRadius: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  expenseHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  expenseAmount: {\n    flex: 1,\n  },\n  amountText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#2e7d32',\n  },\n  categoryText: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 2,\n    backgroundColor: '#f0f0f0',\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 10,\n    alignSelf: 'flex-start',\n  },\n  expenseActions: {\n    flexDirection: 'row',\n  },\n  actionButton: {\n    padding: 10,\n    marginLeft: 8,\n    minWidth: 36,\n    minHeight: 36,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 6,\n    backgroundColor: 'rgba(0,0,0,0.05)',\n    borderWidth: 1,\n    borderColor: 'rgba(0,0,0,0.1)',\n  },\n  deleteButton: {\n    backgroundColor: '#f44336',\n    borderColor: '#d32f2f',\n  },\n  expenseDescription: {\n    fontSize: 14,\n    color: '#333',\n    lineHeight: 18,\n    marginBottom: 8,\n  },\n  expenseDate: {\n    fontSize: 12,\n    color: '#999',\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 40,\n  },\n  emptyText: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#666',\n    marginTop: 16,\n    textAlign: 'center',\n  },\n  emptySubtext: {\n    fontSize: 14,\n    color: '#999',\n    marginTop: 8,\n    textAlign: 'center',\n    lineHeight: 20,\n  },\n  modalContainer: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 20,\n    width: '90%',\n    maxWidth: 400,\n    maxHeight: '80%',\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 16,\n    textAlign: 'center',\n  },\n  modalInput: {\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n    borderRadius: 8,\n    padding: 12,\n    marginBottom: 12,\n    fontSize: 16,\n    minHeight: 44,\n  },\n  modalInputLarge: {\n    minHeight: 80,\n    textAlignVertical: 'top',\n  },\n  inputLabel: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#333',\n    marginBottom: 8,\n  },\n  currencyContainer: {\n    marginBottom: 12,\n  },\n  currencyOptions: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n  },\n  currencyButton: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    marginRight: 8,\n    marginBottom: 8,\n    borderRadius: 16,\n    backgroundColor: '#f0f0f0',\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  currencyButtonActive: {\n    backgroundColor: '#007AFF',\n    borderColor: '#007AFF',\n  },\n  currencyButtonText: {\n    fontSize: 14,\n    color: '#666',\n    fontWeight: '500',\n  },\n  currencyButtonTextActive: {\n    color: '#fff',\n  },\n  categoryContainer: {\n    marginBottom: 16,\n  },\n  categoryOptions: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n  },\n  categoryButton: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    marginRight: 8,\n    marginBottom: 8,\n    borderRadius: 16,\n    backgroundColor: '#f0f0f0',\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  categoryButtonActive: {\n    backgroundColor: '#4caf50',\n    borderColor: '#4caf50',\n  },\n  categoryButtonText: {\n    fontSize: 12,\n    color: '#666',\n    fontWeight: '500',\n  },\n  categoryButtonTextActive: {\n    color: '#fff',\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 16,\n  },\n  modalButton: {\n    flex: 1,\n    paddingVertical: 12,\n    borderRadius: 8,\n    marginHorizontal: 4,\n    backgroundColor: '#f0f0f0',\n  },\n  modalButtonPrimary: {\n    backgroundColor: '#007AFF',\n  },\n  modalButtonText: {\n    textAlign: 'center',\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#333',\n  },\n  modalButtonTextPrimary: {\n    color: '#fff',\n  },\n  viewToggleContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  viewToggleButton: {\n    flex: 1,\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    marginHorizontal: 4,\n    borderRadius: 16,\n    backgroundColor: '#f0f0f0',\n    alignItems: 'center',\n  },\n  viewToggleButtonActive: {\n    backgroundColor: '#007AFF',\n  },\n  viewToggleText: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#666',\n  },\n  viewToggleTextActive: {\n    color: '#fff',\n  },\n  analyticsContainer: {\n    flex: 1,\n    paddingHorizontal: 16,\n  },\n  analyticsSection: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 16,\n    marginVertical: 8,\n  },\n  analyticsSectionTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 12,\n  },\n  categoryAnalyticsItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: '#f0f0f0',\n  },\n  categoryAnalyticsInfo: {\n    flex: 1,\n  },\n  categoryAnalyticsName: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#333',\n  },\n  categoryAnalyticsCount: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 2,\n  },\n  categoryAnalyticsAmount: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    color: '#2e7d32',\n  },\n  trendItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: '#f0f0f0',\n  },\n  trendMonth: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#333',\n  },\n  trendAmount: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    color: '#2e7d32',\n  },\n});\n","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  ScrollView,\n  StyleSheet,\n  TouchableOpacity,\n  Dimensions,\n} from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { format, subDays, subWeeks, subMonths, isWithinInterval, startOfDay, endOfDay } from 'date-fns';\n\nimport { Entry, Expense, ActionItem } from '../types';\nimport { StorageService } from '../utils/storage';\nimport { TextAnalyzer } from '../utils/textAnalysis';\n\ninterface AnalyticsData {\n  totalEntries: number;\n  entriesThisWeek: number;\n  entriesThisMonth: number;\n  totalExpenses: { currency: string; amount: number }[];\n  expensesThisMonth: { currency: string; amount: number }[];\n  totalActionItems: number;\n  completedActionItems: number;\n  pendingActionItems: number;\n  completionRate: number;\n  averageEntriesPerDay: number;\n  mostActiveDay: string;\n  topExpenseCategories: { category: string; amount: number; currency: string }[];\n  recentActivity: {\n    date: string;\n    entries: number;\n    expenses: number;\n    actions: number;\n  }[];\n}\n\nexport const AnalyticsScreen: React.FC = () => {\n  const [analytics, setAnalytics] = useState<AnalyticsData | null>(null);\n  const [selectedPeriod, setSelectedPeriod] = useState<'week' | 'month' | 'all'>('month');\n  const [loading, setLoading] = useState(true);\n\n  const calculateAnalytics = useCallback(async () => {\n    setLoading(true);\n    try {\n      const [entries, expenses, actionItems] = await Promise.all([\n        StorageService.getEntries(),\n        StorageService.getExpenses(),\n        StorageService.getActionItems()\n      ]);\n\n      const now = new Date();\n      const weekAgo = subWeeks(now, 1);\n      const monthAgo = subMonths(now, 1);\n\n      // Filter data by period\n      const getFilteredData = (period: 'week' | 'month' | 'all') => {\n        const cutoffDate = period === 'week' ? weekAgo : period === 'month' ? monthAgo : null;\n        \n        return {\n          entries: cutoffDate ? entries.filter(e => e.timestamp >= cutoffDate) : entries,\n          expenses: cutoffDate ? expenses.filter(e => e.createdAt >= cutoffDate) : expenses,\n          actionItems: cutoffDate ? actionItems.filter(a => a.createdAt >= cutoffDate) : actionItems\n        };\n      };\n\n      const periodData = getFilteredData(selectedPeriod);\n\n      // Basic counts\n      const totalEntries = entries.length;\n      const entriesThisWeek = entries.filter(e => e.timestamp >= weekAgo).length;\n      const entriesThisMonth = entries.filter(e => e.timestamp >= monthAgo).length;\n\n      // Expense totals by currency\n      const totalExpenses: { [key: string]: number } = {};\n      const expensesThisMonth: { [key: string]: number } = {};\n\n      expenses.forEach(expense => {\n        totalExpenses[expense.currency] = (totalExpenses[expense.currency] || 0) + expense.amount;\n      });\n\n      expenses.filter(e => e.createdAt >= monthAgo).forEach(expense => {\n        expensesThisMonth[expense.currency] = (expensesThisMonth[expense.currency] || 0) + expense.amount;\n      });\n\n      // Action items stats\n      const totalActionItems = actionItems.length;\n      const completedActionItems = actionItems.filter(a => a.completed).length;\n      const pendingActionItems = totalActionItems - completedActionItems;\n      const completionRate = totalActionItems > 0 ? (completedActionItems / totalActionItems) * 100 : 0;\n\n      // Activity patterns\n      const dayActivity: { [key: string]: number } = {};\n      entries.forEach(entry => {\n        const day = format(entry.timestamp, 'EEEE');\n        dayActivity[day] = (dayActivity[day] || 0) + 1;\n      });\n\n      const mostActiveDay = Object.entries(dayActivity).reduce((a, b) => \n        dayActivity[a[0]] > dayActivity[b[0]] ? a : b, ['Monday', 0])[0] || 'No data';\n\n      const averageEntriesPerDay = entries.length > 0 ? \n        entries.length / Math.max(1, Math.ceil((now.getTime() - entries[0].timestamp.getTime()) / (1000 * 60 * 60 * 24))) : 0;\n\n      // Top expense categories\n      const categoryTotals: { [key: string]: { amount: number; currency: string } } = {};\n      expenses.forEach(expense => {\n        const category = expense.category || 'Other';\n        if (!categoryTotals[category]) {\n          categoryTotals[category] = { amount: 0, currency: expense.currency };\n        }\n        categoryTotals[category].amount += expense.amount;\n      });\n\n      const topExpenseCategories = Object.entries(categoryTotals)\n        .map(([category, data]) => ({ category, amount: data.amount, currency: data.currency }))\n        .sort((a, b) => b.amount - a.amount)\n        .slice(0, 5);\n\n      // Recent activity (last 7 days)\n      const recentActivity = [];\n      for (let i = 6; i >= 0; i--) {\n        const date = subDays(now, i);\n        const dayStart = startOfDay(date);\n        const dayEnd = endOfDay(date);\n        \n        const dayEntries = entries.filter(e => \n          isWithinInterval(e.timestamp, { start: dayStart, end: dayEnd })).length;\n        const dayExpenses = expenses.filter(e => \n          isWithinInterval(e.createdAt, { start: dayStart, end: dayEnd })).length;\n        const dayActions = actionItems.filter(a => \n          isWithinInterval(a.createdAt, { start: dayStart, end: dayEnd })).length;\n\n        recentActivity.push({\n          date: format(date, 'MMM dd'),\n          entries: dayEntries,\n          expenses: dayExpenses,\n          actions: dayActions,\n        });\n      }\n\n      setAnalytics({\n        totalEntries,\n        entriesThisWeek,\n        entriesThisMonth,\n        totalExpenses: Object.entries(totalExpenses).map(([currency, amount]) => ({ currency, amount })),\n        expensesThisMonth: Object.entries(expensesThisMonth).map(([currency, amount]) => ({ currency, amount })),\n        totalActionItems,\n        completedActionItems,\n        pendingActionItems,\n        completionRate,\n        averageEntriesPerDay,\n        mostActiveDay,\n        topExpenseCategories,\n        recentActivity,\n      });\n    } catch (error) {\n      console.error('Error calculating analytics:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [selectedPeriod]);\n\n  useFocusEffect(\n    useCallback(() => {\n      calculateAnalytics();\n    }, [calculateAnalytics])\n  );\n\n  if (loading || !analytics) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <Text style={styles.loadingText}>Loading analytics...</Text>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Analytics & Insights</Text>\n      </View>\n\n      <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>\n        {/* Period Selector */}\n        <View style={styles.periodSelector}>\n          {(['week', 'month', 'all'] as const).map((period) => (\n            <TouchableOpacity\n              key={period}\n              style={[\n                styles.periodButton,\n                selectedPeriod === period && styles.periodButtonActive\n              ]}\n              onPress={() => setSelectedPeriod(period)}\n            >\n              <Text style={[\n                styles.periodButtonText,\n                selectedPeriod === period && styles.periodButtonTextActive\n              ]}>\n                {period === 'all' ? 'All Time' : `This ${period.charAt(0).toUpperCase() + period.slice(1)}`}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n\n        {/* Summary Cards */}\n        <View style={styles.summaryGrid}>\n          <View style={styles.summaryCard}>\n            <Text style={styles.summaryNumber}>{analytics.totalEntries}</Text>\n            <Text style={styles.summaryLabel}>Total Entries</Text>\n          </View>\n          <View style={styles.summaryCard}>\n            <Text style={styles.summaryNumber}>{analytics.totalActionItems}</Text>\n            <Text style={styles.summaryLabel}>Action Items</Text>\n          </View>\n          <View style={styles.summaryCard}>\n            <Text style={styles.summaryNumber}>{analytics.completionRate.toFixed(0)}%</Text>\n            <Text style={styles.summaryLabel}>Completion Rate</Text>\n          </View>\n          <View style={styles.summaryCard}>\n            <Text style={styles.summaryNumber}>{analytics.averageEntriesPerDay.toFixed(1)}</Text>\n            <Text style={styles.summaryLabel}>Avg Entries/Day</Text>\n          </View>\n        </View>\n\n        {/* Spending Overview */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}> Spending Overview</Text>\n          {analytics.totalExpenses.length > 0 ? (\n            <View style={styles.expenseList}>\n              {analytics.totalExpenses.map((expense, index) => (\n                <View key={expense.currency} style={styles.expenseItem}>\n                  <Text style={styles.expenseAmount}>\n                    {TextAnalyzer.formatCurrency(expense.amount, expense.currency)}\n                  </Text>\n                  <Text style={styles.expenseLabel}>Total Spent</Text>\n                </View>\n              ))}\n            </View>\n          ) : (\n            <Text style={styles.emptyText}>No expenses recorded yet</Text>\n          )}\n        </View>\n\n        {/* Top Categories */}\n        {analytics.topExpenseCategories.length > 0 && (\n          <View style={styles.section}>\n            <Text style={styles.sectionTitle}> Top Spending Categories</Text>\n            <View style={styles.categoryList}>\n              {analytics.topExpenseCategories.map((category, index) => (\n                <View key={category.category} style={styles.categoryItem}>\n                  <View style={styles.categoryInfo}>\n                    <Text style={styles.categoryName}>{category.category}</Text>\n                    <Text style={styles.categoryAmount}>\n                      {TextAnalyzer.formatCurrency(category.amount, category.currency)}\n                    </Text>\n                  </View>\n                  <View style={[styles.categoryBar, { width: `${(category.amount / analytics.topExpenseCategories[0].amount) * 100}%` }]} />\n                </View>\n              ))}\n            </View>\n          </View>\n        )}\n\n        {/* Activity Patterns */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}> Activity Patterns</Text>\n          <View style={styles.patternCard}>\n            <Text style={styles.patternLabel}>Most Active Day</Text>\n            <Text style={styles.patternValue}>{analytics.mostActiveDay}</Text>\n          </View>\n        </View>\n\n        {/* Recent Activity Chart */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}> Recent Activity (Last 7 Days)</Text>\n          <View style={styles.chartContainer}>\n            {analytics.recentActivity.map((day, index) => {\n              // Calculate max values for proper scaling\n              const maxEntries = Math.max(...analytics.recentActivity.map(d => d.entries));\n              const maxExpenses = Math.max(...analytics.recentActivity.map(d => d.expenses));\n              const maxActions = Math.max(...analytics.recentActivity.map(d => d.actions));\n              const maxValue = Math.max(maxEntries, maxExpenses, maxActions, 1);\n              \n              // Scale bars to fit within the allocated height (50px max)\n              const entriesHeight = Math.max(4, (day.entries / maxValue) * 50);\n              const expensesHeight = Math.max(4, (day.expenses / maxValue) * 50);\n              const actionsHeight = Math.max(4, (day.actions / maxValue) * 50);\n              \n              return (\n                <View key={day.date} style={styles.chartDay}>\n                  <View style={styles.chartBars}>\n                    <View style={[styles.chartBar, styles.entriesBar, { height: entriesHeight }]} />\n                    <View style={[styles.chartBar, styles.expensesBar, { height: expensesHeight }]} />\n                    <View style={[styles.chartBar, styles.actionsBar, { height: actionsHeight }]} />\n                  </View>\n                  <Text style={styles.chartDate}>{day.date}</Text>\n                </View>\n              );\n            })}\n          </View>\n          \n          {/* Legend */}\n          <View style={styles.legend}>\n            <View style={styles.legendItem}>\n              <View style={[styles.legendColor, styles.entriesBar]} />\n              <Text style={styles.legendText}>Entries</Text>\n            </View>\n            <View style={styles.legendItem}>\n              <View style={[styles.legendColor, styles.expensesBar]} />\n              <Text style={styles.legendText}>Expenses</Text>\n            </View>\n            <View style={styles.legendItem}>\n              <View style={[styles.legendColor, styles.actionsBar]} />\n              <Text style={styles.legendText}>Actions</Text>\n            </View>\n          </View>\n        </View>\n\n        {/* Insights */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}> Insights</Text>\n          <View style={styles.insightsList}>\n            {analytics.averageEntriesPerDay > 3 && (\n              <View style={styles.insightCard}>\n                <Text style={styles.insightText}>\n                   You're on fire! Averaging {analytics.averageEntriesPerDay.toFixed(1)} entries per day\n                </Text>\n              </View>\n            )}\n            {analytics.completionRate > 75 && (\n              <View style={styles.insightCard}>\n                <Text style={styles.insightText}>\n                   Great job! You complete {analytics.completionRate.toFixed(0)}% of your action items\n                </Text>\n              </View>\n            )}\n            {analytics.pendingActionItems > 5 && (\n              <View style={styles.insightCard}>\n                <Text style={styles.insightText}>\n                   You have {analytics.pendingActionItems} pending action items. Consider reviewing them!\n                </Text>\n              </View>\n            )}\n            {analytics.totalExpenses.length === 0 && analytics.totalEntries > 10 && (\n              <View style={styles.insightCard}>\n                <Text style={styles.insightText}>\n                   No expenses tracked yet. Try adding some spending entries to track your budget!\n                </Text>\n              </View>\n            )}\n          </View>\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n  },\n  header: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n  },\n  loadingText: {\n    textAlign: 'center',\n    marginTop: 50,\n    fontSize: 16,\n    color: '#666',\n  },\n  content: {\n    flex: 1,\n  },\n  periodSelector: {\n    flexDirection: 'row',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  periodButton: {\n    flex: 1,\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    marginHorizontal: 4,\n    borderRadius: 16,\n    backgroundColor: '#f0f0f0',\n    alignItems: 'center',\n  },\n  periodButtonActive: {\n    backgroundColor: '#007AFF',\n  },\n  periodButtonText: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#666',\n  },\n  periodButtonTextActive: {\n    color: '#fff',\n  },\n  summaryGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    paddingHorizontal: 16,\n    paddingTop: 16,\n    gap: 12,\n  },\n  summaryCard: {\n    width: (Dimensions.get('window').width - 44) / 2,\n    backgroundColor: '#fff',\n    padding: 16,\n    borderRadius: 12,\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  summaryNumber: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 4,\n  },\n  summaryLabel: {\n    fontSize: 12,\n    color: '#666',\n    textAlign: 'center',\n  },\n  section: {\n    marginTop: 16,\n    paddingHorizontal: 16,\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 12,\n  },\n  expenseList: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 16,\n  },\n  expenseItem: {\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  expenseAmount: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#2e7d32',\n  },\n  expenseLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 2,\n  },\n  categoryList: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 16,\n  },\n  categoryItem: {\n    marginBottom: 12,\n    position: 'relative',\n  },\n  categoryInfo: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 4,\n    zIndex: 1,\n  },\n  categoryName: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#333',\n  },\n  categoryAmount: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    color: '#2e7d32',\n  },\n  categoryBar: {\n    height: 4,\n    backgroundColor: '#007AFF',\n    borderRadius: 2,\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    opacity: 0.3,\n  },\n  patternCard: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 16,\n    alignItems: 'center',\n  },\n  patternLabel: {\n    fontSize: 14,\n    color: '#666',\n    marginBottom: 4,\n  },\n  patternValue: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333',\n  },\n  chartContainer: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 16,\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    alignItems: 'flex-end',\n    height: 100,\n    marginBottom: 8,\n  },\n  chartDay: {\n    alignItems: 'center',\n    flex: 1,\n  },\n  chartBars: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    height: 50,\n    marginBottom: 8,\n    gap: 2,\n  },\n  chartBar: {\n    width: 6,\n    borderRadius: 3,\n    minHeight: 4,\n  },\n  entriesBar: {\n    backgroundColor: '#007AFF',\n  },\n  expensesBar: {\n    backgroundColor: '#2e7d32',\n  },\n  actionsBar: {\n    backgroundColor: '#ff9800',\n  },\n  chartDate: {\n    fontSize: 10,\n    color: '#666',\n  },\n  legend: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    marginTop: 12,\n    gap: 16,\n  },\n  legendItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  legendColor: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    marginRight: 6,\n  },\n  legendText: {\n    fontSize: 12,\n    color: '#666',\n  },\n  insightsList: {\n    gap: 8,\n  },\n  insightCard: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 16,\n    borderLeftWidth: 4,\n    borderLeftColor: '#007AFF',\n  },\n  insightText: {\n    fontSize: 14,\n    color: '#333',\n    lineHeight: 20,\n  },\n  emptyText: {\n    textAlign: 'center',\n    color: '#666',\n    fontSize: 14,\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 20,\n  },\n});","import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ScrollView,\n  Image,\n} from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\n\ninterface LayoutOption {\n  id: string;\n  name: string;\n  description: string;\n  preview: string;\n  features: string[];\n}\n\nconst LAYOUT_OPTIONS: LayoutOption[] = [\n  {\n    id: 'chat',\n    name: 'Chat Style (Current)',\n    description: 'WhatsApp-like interface with message bubbles',\n    preview: '',\n    features: [\n      'Message bubbles with timestamps',\n      'Auto-categorization badges on right',\n      'Conversation-like flow',\n      'Familiar messaging interface'\n    ]\n  },\n  {\n    id: 'cards',\n    name: 'Card Layout',\n    description: 'Each entry as a clean card with clear categorization',\n    preview: '',\n    features: [\n      'Clean card design for each entry',\n      'Large category icons and labels',\n      'Amount/task details prominently displayed',\n      'More space for content'\n    ]\n  },\n  {\n    id: 'list',\n    name: 'List View',\n    description: 'Compact list with category indicators on the left',\n    preview: '',\n    features: [\n      'Compact, efficient layout',\n      'Category icons on the left',\n      'Quick scanning of entries',\n      'More entries visible at once'\n    ]\n  },\n  {\n    id: 'timeline',\n    name: 'Timeline Style',\n    description: 'Chronological timeline with connecting lines',\n    preview: '',\n    features: [\n      'Visual timeline with connecting dots',\n      'Clear time progression',\n      'Category colors for visual grouping',\n      'Journal-like appearance'\n    ]\n  },\n  {\n    id: 'magazine',\n    name: 'Magazine Layout',\n    description: 'Rich content blocks with emphasis on categorization',\n    preview: '',\n    features: [\n      'Large typography and spacing',\n      'Category sections with colored headers',\n      'Reading-focused design',\n      'Publication-style layout'\n    ]\n  },\n  {\n    id: 'minimal',\n    name: 'Minimal Design',\n    description: 'Clean, distraction-free text-focused layout',\n    preview: '',\n    features: [\n      'Ultra-clean design',\n      'Focus on content over decoration',\n      'Subtle category indicators',\n      'Maximum readability'\n    ]\n  }\n];\n\nexport const LayoutSelectionScreen: React.FC<{ \n  onClose: () => void;\n  onSelect: (layoutId: string) => void;\n  currentLayout: string;\n}> = ({ onClose, onSelect, currentLayout }) => {\n  const [selectedLayout, setSelectedLayout] = useState(currentLayout);\n\n  const handleSelect = () => {\n    onSelect(selectedLayout);\n    onClose();\n  };\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Choose Journal Layout</Text>\n        <TouchableOpacity onPress={onClose} style={styles.closeButton}>\n          <Text style={styles.closeButtonText}></Text>\n        </TouchableOpacity>\n      </View>\n\n      <ScrollView style={styles.content}>\n        <Text style={styles.subtitle}>\n          Select how you'd like your journal entries to be displayed\n        </Text>\n\n        {LAYOUT_OPTIONS.map((option) => (\n          <TouchableOpacity\n            key={option.id}\n            style={[\n              styles.optionCard,\n              selectedLayout === option.id && styles.selectedCard\n            ]}\n            onPress={() => setSelectedLayout(option.id)}\n          >\n            <View style={styles.optionHeader}>\n              <View style={styles.optionTitleRow}>\n                <Text style={styles.optionPreview}>{option.preview}</Text>\n                <View style={styles.optionTitleContainer}>\n                  <Text style={styles.optionName}>{option.name}</Text>\n                  {selectedLayout === option.id && (\n                    <Text style={styles.currentBadge}>Current</Text>\n                  )}\n                </View>\n              </View>\n              <View style={[\n                styles.radioButton,\n                selectedLayout === option.id && styles.radioButtonSelected\n              ]}>\n                {selectedLayout === option.id && (\n                  <View style={styles.radioButtonInner} />\n                )}\n              </View>\n            </View>\n            \n            <Text style={styles.optionDescription}>{option.description}</Text>\n            \n            <View style={styles.featuresContainer}>\n              {option.features.map((feature, index) => (\n                <View key={index} style={styles.featureRow}>\n                  <Text style={styles.featureBullet}></Text>\n                  <Text style={styles.featureText}>{feature}</Text>\n                </View>\n              ))}\n            </View>\n          </TouchableOpacity>\n        ))}\n      </ScrollView>\n\n      <View style={styles.footer}>\n        <TouchableOpacity\n          style={[styles.selectButton, selectedLayout === currentLayout && styles.selectButtonDisabled]}\n          onPress={handleSelect}\n          disabled={selectedLayout === currentLayout}\n        >\n          <Text style={[styles.selectButtonText, selectedLayout === currentLayout && styles.selectButtonTextDisabled]}>\n            {selectedLayout === currentLayout ? 'Already Selected' : `Apply ${LAYOUT_OPTIONS.find(o => o.id === selectedLayout)?.name}`}\n          </Text>\n        </TouchableOpacity>\n      </View>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n  },\n  closeButton: {\n    padding: 8,\n    borderRadius: 20,\n    backgroundColor: '#f0f0f0',\n  },\n  closeButtonText: {\n    fontSize: 16,\n    color: '#666',\n    fontWeight: 'bold',\n  },\n  content: {\n    flex: 1,\n    paddingHorizontal: 16,\n  },\n  subtitle: {\n    fontSize: 16,\n    color: '#666',\n    textAlign: 'center',\n    marginVertical: 20,\n    lineHeight: 22,\n  },\n  optionCard: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    borderWidth: 2,\n    borderColor: 'transparent',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 1,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  selectedCard: {\n    borderColor: '#007AFF',\n    backgroundColor: '#f8f9ff',\n  },\n  optionHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  optionTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  optionPreview: {\n    fontSize: 28,\n    marginRight: 12,\n  },\n  optionTitleContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  optionName: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333',\n    marginRight: 8,\n  },\n  currentBadge: {\n    backgroundColor: '#007AFF',\n    color: '#fff',\n    fontSize: 10,\n    fontWeight: 'bold',\n    paddingHorizontal: 6,\n    paddingVertical: 2,\n    borderRadius: 10,\n    overflow: 'hidden',\n  },\n  optionDescription: {\n    fontSize: 14,\n    color: '#666',\n    marginBottom: 12,\n    lineHeight: 20,\n  },\n  featuresContainer: {\n    marginTop: 4,\n  },\n  featureRow: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    marginBottom: 4,\n  },\n  featureBullet: {\n    fontSize: 16,\n    color: '#007AFF',\n    marginRight: 8,\n    marginTop: 1,\n  },\n  featureText: {\n    fontSize: 13,\n    color: '#555',\n    flex: 1,\n    lineHeight: 18,\n  },\n  radioButton: {\n    width: 24,\n    height: 24,\n    borderRadius: 12,\n    borderWidth: 2,\n    borderColor: '#ddd',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  radioButtonSelected: {\n    borderColor: '#007AFF',\n  },\n  radioButtonInner: {\n    width: 12,\n    height: 12,\n    borderRadius: 6,\n    backgroundColor: '#007AFF',\n  },\n  footer: {\n    padding: 16,\n    backgroundColor: '#fff',\n    borderTopWidth: 1,\n    borderTopColor: '#e0e0e0',\n  },\n  selectButton: {\n    backgroundColor: '#007AFF',\n    borderRadius: 12,\n    paddingVertical: 16,\n    alignItems: 'center',\n  },\n  selectButtonDisabled: {\n    backgroundColor: '#f0f0f0',\n  },\n  selectButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  selectButtonTextDisabled: {\n    color: '#999',\n  },\n});","import React from 'react';\nimport { View, Text } from 'react-native';\nimport { StatusBar } from 'expo-status-bar';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\n\nimport { JournalScreen, ActionItemsScreen, ExpensesScreen, AnalyticsScreen } from './src/screens';\n\nconst Tab = createBottomTabNavigator();\n\nexport default function App() {\n  return (\n    <SafeAreaProvider>\n      <StatusBar style=\"dark\" />\n      <NavigationContainer>\n        <Tab.Navigator\n          screenOptions={({ route }) => ({\n            tabBarIcon: ({ focused, color, size }) => {\n              let iconText;\n\n              if (route.name === 'Journal') {\n                iconText = '';\n              } else if (route.name === 'ActionItems') {\n                iconText = '';\n              } else if (route.name === 'Expenses') {\n                iconText = '';\n              } else if (route.name === 'Analytics') {\n                iconText = '';\n              } else {\n                iconText = '';\n              }\n\n              return <Text style={{ fontSize: size, color }}>{iconText}</Text>;\n            },\n            tabBarActiveTintColor: '#007AFF',\n            tabBarInactiveTintColor: 'gray',\n            tabBarStyle: {\n              backgroundColor: '#fff',\n              borderTopWidth: 1,\n              borderTopColor: '#e0e0e0',\n              paddingBottom: 5,\n              paddingTop: 5,\n              height: 60\n            },\n            headerShown: false\n          })}\n        >\n          <Tab.Screen\n            name=\"Journal\"\n            component={JournalScreen}\n            options={{\n              tabBarLabel: 'Journal'\n            }}\n          />\n          <Tab.Screen\n            name=\"ActionItems\"\n            component={ActionItemsScreen}\n            options={{\n              tabBarLabel: 'Tasks'\n            }}\n          />\n          <Tab.Screen\n            name=\"Expenses\"\n            component={ExpensesScreen}\n            options={{\n              tabBarLabel: 'Expenses'\n            }}\n          />\n          <Tab.Screen\n            name=\"Analytics\"\n            component={AnalyticsScreen}\n            options={{\n              tabBarLabel: 'Analytics'\n            }}\n          />\n        </Tab.Navigator>\n      </NavigationContainer>\n    </SafeAreaProvider>\n  );\n}\n","import { registerRootComponent } from 'expo';\nimport App from './App';\n\nregisterRootComponent(App);\n\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\n// It also ensures that whether you load the app in Expo Go or in a native build,\n// the environment is set up appropriately\nregisterRootComponent(App);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/DailyTracker/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [7], () => (__webpack_require__(7217)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["ENTRIES_KEY","ACTION_ITEMS_KEY","EXPENSES_KEY","SETTINGS_KEY","StorageService","getEntries","jsonValue","AsyncStorage","getItem","restoredEntries","JSON","parse","map","entry","Object","assign","timestamp","Date","type","isMarkdown","sort","a","b","Math","abs","getTime","e","console","error","saveEntries","entries","stringify","setItem","addEntry","this","push","getActionItems","item","createdAt","dueDate","undefined","saveActionItems","actionItems","addActionItem","actionItem","updateActionItem","id","updates","index","findIndex","deleteActionItem","filteredItems","filter","getExpenses","expenses","expense","saveExpenses","addExpense","updateExpense","deleteExpense","filteredExpenses","getSettings","saveSettings","settings","uuid","v4","replace","c","r","random","toString","TextAnalyzer","detectActionItem","text","test","detectExpense","lowerText","toLowerCase","EXPENSE_KEYWORDS","some","keyword","includes","hasNumericValue","hasExpenseContext","context","getSystemCurrency","locale","Intl","NumberFormat","resolvedOptions","timezone","DateTimeFormat","timeZone","localeCurrencyMap","endsWith","testFormatter","style","currency","format","extractActionItem","entryId","cleanTitle","trim","startsWith","substring","title","completed","extractExpenseInfo","amount","extractAmount","categoryInfo","extractCategoryFromText","value","description","category","originalText","forMatch","match","mapToStandardCategory","simpleForMatch","onMatch","expenseContexts","transportTicketMatch","entertainmentTicketMatch","extractedCategory","lowerCategory","word","transport","charAt","toUpperCase","slice","numberMatches","length","detectedCurrency","largestAmount","amounts","numericPart","parseFloat","isNaN","NaN","num","max","formatCurrency","currencyCode","formatted","minimumFractionDigits","maximumFractionDigits","toFixed","isExpenseRelated","CURRENCY_PATTERNS","ACTION_KEYWORDS","MessageBubble","onLongPress","markdownStyles","getIcon","_jsx","Text","fontSize","color","children","getCategoryLabel","webStyles","cursor","WebkitTouchCallout","WebkitUserSelect","MozUserSelect","msUserSelect","userSelect","View","styles","systemMessageContainer","messageContainer","getBubbleStyle","baseStyles","messageBubble","alignmentStyle","systemMessage","userMessage","expenseBubble","actionBubble","systemBubble","defaultBubble","onTouchEnd","selection","window","getSelection","MessageContent","_jsxs","messageHeader","Markdown","messageText","systemMessageText","userMessageText","nonUserMessageText","selectable","categoryLabel","StyleSheet","create","userMessageContainer","marginVertical","alignSelf","maxWidth","paddingHorizontal","paddingVertical","minWidth","borderRadius","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","backgroundColor","borderColor","borderWidth","marginLeft","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","marginRight","flexDirection","justifyContent","alignItems","marginBottom","lineHeight","textAlign","fontWeight","fontStyle","marginTop","defaultSettings","isMarkdownEnabled","enterToSend","systemCurrency","layoutStyle","CURRENCIES","code","name","symbol","SettingsScreen","onClose","setSettings","useState","showCurrencyModal","setShowCurrencyModal","showLayoutModal","setShowLayoutModal","useEffect","loadSettings","async","savedSettings","updateSetting","key","newSettings","Alert","alert","LAYOUT_OPTIONS","icon","SafeAreaView","container","header","headerTitle","TouchableOpacity","onPress","closeButton","closeButtonText","ScrollView","content","section","sectionTitle","settingItem","settingInfo","settingLabel","settingDescription","Switch","onValueChange","showCurrencyPicker","log","settingValue","getCurrentCurrencyName","current","find","arrow","showLayoutPicker","getCurrentLayoutName","l","Modal","visible","animationType","transparent","onRequestClose","modalStyles","overlay","subtitle","optionsList","showsVerticalScrollIndicator","option","selectedOption","optionText","selectedOptionText","checkmark","cancelButton","cancelButtonText","layout","flex","borderBottomWidth","borderBottomColor","padding","minHeight","maxHeight","flexGrow","marginHorizontal","JournalScreen","setEntries","inputText","setInputText","setIsMarkdown","testIndex","setTestIndex","flatListRef","useRef","textInputRef","setEnterToSend","showSettings","setShowSettings","setLayoutStyle","searchQuery","setSearchQuery","showSearch","setShowSearch","filteredEntries","setFilteredEntries","setExpenses","setActionItems","testEntries","loadEntries","useCallback","sortedEntries","createEntriesWithDateSeparators","entriesList","result","currentDate","forEach","entryDate","date","query","filtered","entryDateLong","entryDateShort","loadExpensesAndActions","savedExpenses","savedActionItems","Promise","all","showToast","message","convertDotToCheckbox","handleSendMessage","trimmedInput","displayText","expenseInfo","updateEntryType","setTimeout","scrollToEnd","animated","focus","handleLongPress","markAsExpense","markAsActionItem","newType","updatedEntries","settingsButton","settingsButtonText","testMessage","prev","searchContainer","TextInput","searchInput","placeholder","onChangeText","autoCapitalize","clearButtonMode","clearButton","clearButtonText","FlatList","ref","data","renderItem","dateString","today","yesterday","displayDate","dateSeparator","dateSeparatorLine","dateSeparatorText","renderDateSeparator","renderCardEntry","layoutStyles","cardContainer","cardHeader","cardDate","cardTime","cardContent","cardText","expenseTag","expenseText","actionTag","actionText","renderListEntry","listContainer","listLeft","listTime","listIndicator","listContent","listText","listMeta","listExpense","listAction","renderTimelineEntry","timelineContainer","timelineLeft","timelineDot","timelineLine","timelineContent","timelineDate","timelineText","timelineTags","timelineExpense","timelineAction","renderMagazineEntry","magazineContainer","magazineHeader","magazineDate","magazineBody","magazineText","magazineFooter","magazineExpenseBlock","magazineExpenseLabel","magazineExpenseAmount","magazineActionBlock","magazineActionLabel","magazineActionText","renderMinimalEntry","minimalContainer","minimalContent","minimalText","minimalMeta","minimalTime","minimalExpense","minimalAction","renderChatEntry","keyExtractor","messagesList","getListStyle","onLayout","onContentSizeChange","ListEmptyComponent","KeyboardAvoidingView","behavior","inputContainer","textInput","multiline","maxLength","onSubmitEditing","blurOnSubmit","returnKeyType","sendButton","sendButtonDisabled","disabled","presentationStyle","borderTopWidth","borderTopColor","overflow","gap","zIndex","textTransform","letterSpacing","fontFamily","paddingBottom","body","heading1","heading2","strong","em","code_inline","ActionItemCard","onToggleComplete","onEdit","onDelete","itemCard","completedCard","itemHeader","activeOpacity","Ionicons","size","itemTitle","completedText","itemDescription","itemFooter","itemDate","itemActions","actionButton","hitSlop","top","bottom","left","right","deleteButton","EditModal","onSave","onCancel","setTitle","setDescription","modalContainer","modalContent","modalTitle","modalInput","modalInputLarge","modalButtons","modalButton","modalButtonText","modalButtonPrimary","handleSave","updatedItem","modalButtonTextPrimary","ActionItemsScreen","setFilter","editingItem","setEditingItem","modalVisible","setModalVisible","loadActionItems","items","handleToggleComplete","handleEdit","handleDelete","confirm","getFilterButtonStyle","filterType","filterButton","filterButtonActive","getFilterTextStyle","filterButtonText","filterButtonTextActive","pendingCount","completedCount","stats","statsText","filterContainer","emptyContainer","emptyText","emptySubtext","renderActionItem","list","opacity","textDecorationLine","textAlignVertical","ExpenseCard","expenseCard","expenseHeader","expenseAmount","amountText","categoryText","expenseActions","expenseDescription","numberOfLines","expenseDate","EditExpenseModal","setAmount","setCurrency","setCategory","keyboardType","currencyContainer","inputLabel","currencyOptions","curr","currencyButton","currencyButtonActive","currencyButtonText","currencyButtonTextActive","categoryContainer","categoryOptions","cat","categoryButton","categoryButtonActive","categoryButtonText","categoryButtonTextActive","numericAmount","updatedExpense","ExpensesScreen","editingExpense","setEditingExpense","viewMode","setViewMode","loadExpenses","expenseList","useFocusEffect","now","monthStart","startOfMonth","monthEnd","endOfMonth","isWithinInterval","start","end","getCategoryBreakdown","categoryTotals","count","totalsContainer","totalContainer","totalLabel","totalAmount","totals","keys","getTotalAmount","total","viewToggleContainer","viewToggleButton","viewToggleButtonActive","viewToggleText","viewToggleTextActive","renderExpense","analyticsContainer","analyticsSection","analyticsSectionTitle","categoryAnalyticsItem","categoryAnalyticsInfo","categoryAnalyticsName","categoryAnalyticsCount","categoryAnalyticsAmount","getMonthlyTrend","monthlyData","monthKey","month","trend","trendItem","trendMonth","trendAmount","reduce","sum","exp","paddingTop","flexWrap","AnalyticsScreen","analytics","setAnalytics","selectedPeriod","setSelectedPeriod","loading","setLoading","calculateAnalytics","weekAgo","subWeeks","monthAgo","subMonths","totalEntries","period","cutoffDate","getFilteredData","entriesThisWeek","entriesThisMonth","totalExpenses","expensesThisMonth","totalActionItems","completedActionItems","pendingActionItems","completionRate","dayActivity","day","mostActiveDay","averageEntriesPerDay","ceil","topExpenseCategories","recentActivity","i","subDays","dayStart","startOfDay","dayEnd","endOfDay","dayEntries","dayExpenses","dayActions","actions","loadingText","periodSelector","periodButton","periodButtonActive","periodButtonText","periodButtonTextActive","summaryGrid","summaryCard","summaryNumber","summaryLabel","expenseItem","expenseLabel","categoryList","categoryItem","categoryName","categoryAmount","categoryBar","patternCard","patternLabel","patternValue","chartContainer","maxEntries","d","maxExpenses","maxActions","maxValue","entriesHeight","expensesHeight","actionsHeight","chartDay","chartBars","chartBar","entriesBar","expensesBar","actionsBar","chartDate","legend","legendItem","legendColor","legendText","insightsList","insightCard","insightText","Dimensions","get","position","borderLeftWidth","borderLeftColor","optionCard","selectedCard","optionHeader","optionTitleRow","optionPreview","optionTitleContainer","optionName","currentBadge","optionDescription","featuresContainer","featureRow","featureBullet","featureText","radioButton","radioButtonSelected","radioButtonInner","footer","selectButton","selectButtonDisabled","selectButtonText","selectButtonTextDisabled","Tab","createBottomTabNavigator","App","SafeAreaProvider","StatusBar","NavigationContainer","Navigator","screenOptions","route","tabBarIcon","focused","iconText","tabBarActiveTintColor","tabBarInactiveTintColor","tabBarStyle","headerShown","Screen","component","options","tabBarLabel","registerRootComponent","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","n","getter","__esModule","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}