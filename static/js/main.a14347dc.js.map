{"version":3,"file":"static/js/main.a14347dc.js","mappings":"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AAe3O,EAAAA,EAAAA,UAAoB,KAC7CpH,EAAagW,IAAkB5O,EAAAA,EAAAA,UAAuB,KAGtD6O,EAAcC,IAAmB9O,EAAAA,EAAAA,WAAS,IAC1C+O,EAAaC,IAAkBhP,EAAAA,EAAAA,WAAS,IAGxCiP,EAAcC,IAAmBlP,EAAAA,EAAAA,UAAuB,OACxDmP,EAAUC,KAAepP,EAAAA,EAAAA,UAAS,KAClCqP,GAAYC,KAAiBtP,EAAAA,EAAAA,UAAS,KACtCuP,GAAcC,KAAmBxP,EAAAA,EAAAA,UAAS,IAG3CyP,GAAc,CAElB,yBACA,8BACA,uCACA,oBACA,wBACA,kBACA,qBACA,iBACA,4BACA,8BACA,oBAGA,4BACA,oCACA,sCACA,sCACA,6BACA,yBACA,iCACA,gCACA,yBACA,oCAGA,4BACA,oBACA,kCACA,2CACA,0BACA,4BACA,gCACA,uBACA,0BACA,qCACA,gCACA,yBACA,2BACA,8BACA,kCACA,6BACA,iCACA,sCACA,sBACA,+BACA,gCACA,iCACA,oCACA,kCACA,wBACA,qBACA,4BACA,sBACA,yBACA,4BACA,8BACA,0BACA,6BACA,oBACA,+BACA,4BACA,uBACA,yBACA,qBACA,uBACA,qBACA,uBACA,kCACA,oBACA,uBACA,sBACA,qBACA,mBACA,uBACA,oBACA,uBACA,qBACA,yBACA,2BACA,qBACA,sBACA,qBACA,wBACA,4BACA,6BACA,4BACA,oBACA,mBACA,2BACA,wBACA,uBACA,yBACA,gCACA,wBACA,sBACA,qBACA,uBACA,uBACA,kBACA,6BACA,4BACA,qBACA,gCACA,yBACA,yBACA,oBACA,yBACA,0BACA,gBACA,oBACA,qBACA,2BACA,2BACA,yBACA,0BACA,yBACA,oBACA,sBACA,wBACA,qBACA,6BACA,kBACA,wBACA,0BACA,yBACA,oBACA,6BACA,sBACA,yBACA,wBACA,sBACA,mBACA,2BACA,sBACA,mBAGIC,IAAcC,EAAAA,EAAAA,aAAYpG,UAC9B,MAEMqG,SAFqBtZ,EAAeC,cAEPe,KAAK,CAACC,EAAGC,KAG1C,GADiBC,KAAKC,I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","sources":["src/utils/storage.ts","src/utils/textAnalysis.ts","src/components/MessageBubble.tsx","src/utils/platform.ts","src/screens/SettingsScreen.tsx","src/screens/JournalScreen.tsx","src/screens/ActionItemsScreen.tsx","src/screens/ExpensesScreen.tsx","src/screens/AnalyticsScreen.tsx","src/screens/LayoutSelectionScreen.tsx","App.tsx","index.ts","webpack/bootstrap","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Entry, ActionItem, Expense, SettingsData } from '../types';\n\nconst ENTRIES_KEY = '@daily_tracker_entries';\nconst ACTION_ITEMS_KEY = '@daily_tracker_action_items';\nconst EXPENSES_KEY = '@daily_tracker_expenses';\nconst SETTINGS_KEY = '@daily_tracker_settings';\n\nexport class StorageService {\n  // Entries\n  static async getEntries(): Promise<Entry[]> {\n    try {\n      const jsonValue = await AsyncStorage.getItem(ENTRIES_KEY);\n      if (jsonValue != null) {\n        const entries = JSON.parse(jsonValue);\n        // Convert timestamp strings back to Date objects and ensure type preservation\n        const restoredEntries = entries.map((entry: any) => ({\n          ...entry,\n          timestamp: new Date(entry.timestamp),\n          // Ensure type is preserved as literal type\n          type: entry.type as 'log' | 'action' | 'expense' | 'system',\n          // Preserve markdown flag if it exists\n          isMarkdown: entry.isMarkdown || false\n        }));\n        \n        // Sort entries to maintain conversation flow\n        const sortedEntries = restoredEntries.sort((a: Entry, b: Entry) => {\n          // If timestamps are within 2 seconds of each other, maintain user-system alternation\n          const timeDiff = Math.abs(a.timestamp.getTime() - b.timestamp.getTime());\n          if (timeDiff < 2000) {\n            // If one is a system message and the other isn't, maintain the conversation flow\n            if (a.type === 'system' && b.type !== 'system') return 1;\n            if (a.type !== 'system' && b.type === 'system') return -1;\n          }\n          return a.timestamp.getTime() - b.timestamp.getTime();\n        });\n        return sortedEntries;\n      }\n      return [];\n    } catch (e) {\n      console.error('Error getting entries:', e);\n      return [];\n    }\n  }\n\n  static async saveEntries(entries: Entry[]): Promise<void> {\n    try {\n      const jsonValue = JSON.stringify(entries);\n      await AsyncStorage.setItem(ENTRIES_KEY, jsonValue);\n    } catch (e) {\n      console.error('Error saving entries:', e);\n    }\n  }\n\n  static async addEntry(entry: Entry): Promise<void> {\n    try {\n      const entries = await this.getEntries();\n      entries.push(entry);\n      await this.saveEntries(entries);\n    } catch (e) {\n      console.error('Error adding entry:', e);\n    }\n  }\n\n  // Action Items\n  static async getActionItems(): Promise<ActionItem[]> {\n    try {\n      const jsonValue = await AsyncStorage.getItem(ACTION_ITEMS_KEY);\n      if (jsonValue != null) {\n        const actionItems = JSON.parse(jsonValue);\n        return actionItems.map((item: any) => ({\n          ...item,\n          createdAt: new Date(item.createdAt),\n          dueDate: item.dueDate ? new Date(item.dueDate) : undefined,\n        }));\n      }\n      return [];\n    } catch (e) {\n      console.error('Error getting action items:', e);\n      return [];\n    }\n  }\n\n  static async saveActionItems(actionItems: ActionItem[]): Promise<void> {\n    try {\n      const jsonValue = JSON.stringify(actionItems);\n      await AsyncStorage.setItem(ACTION_ITEMS_KEY, jsonValue);\n    } catch (e) {\n      console.error('Error saving action items:', e);\n    }\n  }\n\n  static async addActionItem(actionItem: ActionItem): Promise<void> {\n    try {\n      const actionItems = await this.getActionItems();\n      actionItems.push(actionItem);\n      await this.saveActionItems(actionItems);\n    } catch (e) {\n      console.error('Error adding action item:', e);\n    }\n  }\n\n  static async updateActionItem(id: string, updates: Partial<ActionItem>): Promise<void> {\n    try {\n      const actionItems = await this.getActionItems();\n      const index = actionItems.findIndex(item => item.id === id);\n      if (index !== -1) {\n        actionItems[index] = { ...actionItems[index], ...updates };\n      }\n      await this.saveActionItems(actionItems);\n    } catch (e) {\n      console.error('Error updating action item:', e);\n    }\n  }\n\n  static async deleteActionItem(id: string): Promise<void> {\n    try {\n      const actionItems = await this.getActionItems();\n      const filteredItems = actionItems.filter(item => item.id !== id);\n      await this.saveActionItems(filteredItems);\n    } catch (e) {\n      console.error('Error deleting action item:', e);\n    }\n  }\n\n  // Expenses\n  static async getExpenses(): Promise<Expense[]> {\n    try {\n      const jsonValue = await AsyncStorage.getItem(EXPENSES_KEY);\n      if (jsonValue != null) {\n        const expenses = JSON.parse(jsonValue);\n        const mappedExpenses = expenses.map((expense: any) => ({\n          ...expense,\n          createdAt: new Date(expense.createdAt),\n        }));\n        return mappedExpenses;\n      }\n      return [];\n    } catch (e) {\n      console.error('Error getting expenses:', e);\n      return [];\n    }\n  }\n\n  static async saveExpenses(expenses: Expense[]): Promise<void> {\n    try {\n      const jsonValue = JSON.stringify(expenses);\n      await AsyncStorage.setItem(EXPENSES_KEY, jsonValue);\n    } catch (e) {\n      console.error('Error saving expenses:', e);\n    }\n  }\n\n  static async addExpense(expense: Expense): Promise<void> {\n    try {\n      const expenses = await this.getExpenses();\n      expenses.push(expense);\n      await this.saveExpenses(expenses);\n    } catch (e) {\n      console.error('Error adding expense:', e);\n    }\n  }\n\n  static async updateExpense(id: string, updates: Partial<Expense>): Promise<void> {\n    try {\n      const expenses = await this.getExpenses();\n      const index = expenses.findIndex(expense => expense.id === id);\n      if (index !== -1) {\n        expenses[index] = { ...expenses[index], ...updates };\n        await this.saveExpenses(expenses);\n      }\n    } catch (e) {\n      console.error('Error updating expense:', e);\n    }\n  }\n\n  static async deleteExpense(id: string): Promise<void> {\n    try {\n      const expenses = await this.getExpenses();\n      const filteredExpenses = expenses.filter(expense => expense.id !== id);\n      await this.saveExpenses(filteredExpenses);\n    } catch (e) {\n      console.error('Error deleting expense:', e);\n    }\n  }\n\n  // Settings\n  static async getSettings(): Promise<SettingsData | null> {\n    try {\n      const jsonValue = await AsyncStorage.getItem(SETTINGS_KEY);\n      return jsonValue != null ? JSON.parse(jsonValue) : null;\n    } catch (e) {\n      console.error('Error getting settings:', e);\n      return null;\n    }\n  }\n\n  static async saveSettings(settings: SettingsData): Promise<void> {\n    try {\n      const jsonValue = JSON.stringify(settings);\n      await AsyncStorage.setItem(SETTINGS_KEY, jsonValue);\n    } catch (e) {\n      console.error('Error saving settings:', e);\n    }\n  }\n}\n","import { Entry, Expense, ActionItem } from '../types';\n\n// Custom UUID function since react-native-uuid causes crashes\nconst uuid = {\n  v4: () => {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n};\n\nexport class TextAnalyzer {\n  // Currency patterns - simplified to detect any numeric amount\n  private static readonly CURRENCY_PATTERNS = [\n    // Any number with optional decimal places\n    /\\b\\d+(\\.\\d{1,2})?\\b/g,\n    // Currency symbols with numbers (but we'll extract just the number)\n    /[$]\\s*\\d+(\\.\\d{1,2})?|\\d+(\\.\\d{1,2})?\\s*[$]/g,\n    // Text-based currency mentions (extract number only)\n    /(?:Rs\\.?|rs\\.?|RS\\.?)\\s*\\d+(\\.\\d{1,2})?/g,\n    /\\d+(\\.\\d{1,2})?\\s*(rupees?|dollars?|euros?|pounds?)/g\n  ];\n\n  // Keywords for expenses\n  private static readonly EXPENSE_KEYWORDS: string[] = [\n    \"spent\", \"bought\", \"purchased\", \"paid\", \"cost\",\n    \"expense\", \"payment\", \"buy\", \"pay\", \"shopping\",\n    \"store\", \"bill\", \"receipt\", \"charged\", \"withdrew\",\n    \"withdrawal\", \"transaction\", \"fee\", \"subscription\"\n  ];\n\n  // Keywords for action items (kept for reference, but only dot-prefix is used)\n  private static readonly ACTION_KEYWORDS: string[] = [\n    \"todo\", \"to-do\", \"task\", \"need to\", \"should\",\n    \"must\", \"have to\", \"action\", \"plan\", \"schedule\",\n    \"remind\", \"remember\", \"don't forget\", \"important\",\n    \"deadline\", \"due\", \"appointment\", \"meeting\", \"call\",\n    \"email\", \"follow up\", \"buy\", \"get\", \"pick up\", \"pack\",\n    \"finish\", \"complete\", \"start\", \"contact\", \"reach out\",\n    \"check\", \"review\", \"submit\", \"apply\", \"book\", \"reserve\"\n  ];\n\n  // Only dot-prefix detection is used for action items\n  // Format: \". task description\" becomes an action item\n\n  static detectActionItem(text: string): boolean {\n    // Only detect action items that start with a dot (simple and explicit)\n    const startsWithDot = /^\\s*\\.\\s*\\S/.test(text);\n    return startsWithDot;\n  }\n\n  static detectExpense(text: string): boolean {\n    const lowerText = text.toLowerCase();\n    \n    // First check for explicit expense keywords\n    const hasExpenseKeywords = this.EXPENSE_KEYWORDS.some(keyword => lowerText.includes(keyword));\n    if (hasExpenseKeywords) {\n      return true;\n    }\n    \n    // Only consider numeric values as expenses if they have strong expense context\n    // AND the text is not just a plain number\n    if (this.hasNumericValue(text) && this.hasExpenseContext(text)) {\n      // Additional check: reject plain numbers without context\n      // If the text is ONLY a number (like \"150\"), it's probably not an expense\n      const isPlainNumber = /^\\s*\\d+(\\.\\d{1,2})?\\s*$/.test(text);\n      if (isPlainNumber) {\n        return false; // Don't treat plain numbers as expenses\n      }\n      \n      // Also reject if it's just currency symbol + number without context\n      const isCurrencyOnly = /^\\s*(?:Rs\\.?|rs\\.?|RS\\.?||[$])\\s*\\d+(?:\\.\\d{1,2})?\\s*$/.test(text);\n      if (isCurrencyOnly) {\n        return false; // Don't treat \"Rs150\" alone as expense without context\n      }\n      \n      return true;\n    }\n    \n    return false;\n  }\n\n  // Helper method to check if text contains numeric values\n  private static hasNumericValue(text: string): boolean {\n    // Check for numbers with or without currency symbols\n    return /(?:Rs\\.?|rs\\.?|RS\\.?||[$])\\s*\\d+(?:\\.\\d{1,2})?|\\b\\d+(?:\\.\\d{1,2})?\\b/.test(text);\n  }\n\n  // Helper method to check if text has expense-related context\n  private static hasExpenseContext(text: string): boolean {\n    const lowerText = text.toLowerCase();\n    const expenseContexts = [\n      'spent', 'bought', 'purchased', 'paid', 'cost', 'price', 'bill', 'receipt',\n      'shopping', 'store', 'market', 'restaurant', 'cafe', 'food', 'lunch', 'dinner',\n      'gas', 'fuel', 'electricity', 'rent', 'groceries', 'medicine', 'doctor',\n      'haircut', 'salon', 'barber', 'transportation', 'taxi', 'uber', 'lyft',\n      'coffee', 'tea', 'snack', 'movie', 'ticket', 'parking', 'toll'\n    ];\n    \n    // Check for explicit expense contexts\n    const hasDirectContext = expenseContexts.some(context => lowerText.includes(context));\n    if (hasDirectContext) {\n      return true;\n    }\n    \n    // Check for \"number + for + item\" pattern (e.g., \"500 for haircut\", \"20 for lunch\")\n    const forPattern = /\\d+(?:\\.\\d{1,2})?\\s+for\\s+\\w+/i.test(text);\n    if (forPattern) {\n      return true;\n    }\n    \n    // Check for \"number + currency + for + item\" pattern\n    const currencyForPattern = /(?:Rs\\.?|rs\\.?|RS\\.?||[$])\\s*\\d+(?:\\.\\d{1,2})?\\s+for\\s+\\w+/i.test(text);\n    if (currencyForPattern) {\n      return true;\n    }\n    \n    return false;\n  }\n\n  // Get system default currency\n  private static getSystemCurrency(): string {\n    try {\n      // Try to get system locale and extract currency\n      const locale = Intl.NumberFormat().resolvedOptions().locale;\n      const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n      \n      // Map common locales to their expected currencies (both underscore and hyphen formats)\n      const localeCurrencyMap: { [key: string]: string } = {\n        'en-IN': 'INR',\n        'en_IN': 'INR',\n        'hi-IN': 'INR',\n        'hi_IN': 'INR',\n        'en-CA': 'CAD',\n        'en_CA': 'CAD',\n        'en-AU': 'AUD',\n        'en_AU': 'AUD',\n        'de-DE': 'EUR',\n        'de_DE': 'EUR',\n        'fr-FR': 'EUR',\n        'fr_FR': 'EUR',\n        'es-ES': 'EUR',\n        'es_ES': 'EUR',\n        'it-IT': 'EUR',\n        'it_IT': 'EUR',\n        'ja-JP': 'JPY',\n        'ja_JP': 'JPY',\n        'ko-KR': 'KRW',\n        'ko_KR': 'KRW',\n        'zh-CN': 'CNY',\n        'zh_CN': 'CNY',\n        'pt-BR': 'BRL',\n        'pt_BR': 'BRL',\n        'ru-RU': 'RUB',\n        'ru_RU': 'RUB'\n        // Note: en-US and en-GB removed to force India detection\n      };\n      \n      // First check if we have a direct mapping for JavaScript's resolved locale\n      if (localeCurrencyMap[locale]) {\n        return localeCurrencyMap[locale];\n      }\n      \n      // Check for region-based mapping (e.g., any locale ending with -IN should use INR)\n      if (locale.endsWith('-IN') || locale.endsWith('_IN')) {\n        return 'INR';\n      }\n      \n      // Use timezone as an additional hint for currency detection\n      if (timezone && (timezone.includes('Asia/Calcutta') || timezone.includes('Asia/Kolkata'))) {\n        return 'INR';\n      }\n      \n      // For common English locales, test INR formatting to determine if user is likely in India\n      if (locale.includes('en')) {\n        try {\n          const testFormatter = new Intl.NumberFormat(locale, { \n            style: 'currency', \n            currency: 'INR' \n          });\n          const formatted = testFormatter.format(100);\n          \n          // If INR formats with  symbol, it indicates the system likely supports Indian localization\n          if (formatted.includes('')) {\n            return 'INR';\n          }\n        } catch (error) {\n          // INR formatting failed, continue to other checks\n        }\n      }\n      \n      // Specific handling for different locales\n      if (locale.endsWith('-US') || locale.endsWith('_US')) {\n        return 'USD';\n      }\n      if (locale.endsWith('-GB') || locale.endsWith('_GB')) {\n        return 'GBP';\n      }\n      if (locale.endsWith('-DE') || locale.endsWith('_DE') || \n          locale.endsWith('-FR') || locale.endsWith('_FR') ||\n          locale.endsWith('-ES') || locale.endsWith('_ES') || \n          locale.endsWith('-IT') || locale.endsWith('_IT')) {\n        return 'EUR';\n      }\n      \n      // Try to get currency from Intl as fallback\n      const currency = Intl.NumberFormat(locale).resolvedOptions().currency;\n      return currency || 'USD'; // Final fallback to USD\n    } catch (error) {\n      // Fallback for environments where Intl is not fully supported\n      return 'USD';\n    }\n  }\n\n  static extractActionItem(text: string, entryId: string): ActionItem | null {\n    if (this.detectActionItem(text)) {\n      // Clean up the title - remove leading dot if present\n      let cleanTitle = text.trim();\n      if (cleanTitle.startsWith('.')) {\n        cleanTitle = cleanTitle.substring(1).trim();\n      }\n      \n      return {\n        id: uuid.v4(),\n        entryId,\n        title: cleanTitle,\n        completed: false,\n        createdAt: new Date()\n      };\n    }\n    return null;\n  }\n\n  static extractExpenseInfo(text: string, entryId: string): Expense | null {\n    const amount = this.extractAmount(text);\n    if (!amount) return null;\n\n    // Extract category and clean description from the text\n    const categoryInfo = this.extractCategoryFromText(text);\n\n    return {\n      id: uuid.v4(),\n      entryId,\n      amount: amount.value,\n      currency: amount.currency,\n      description: categoryInfo.description,\n      category: categoryInfo.category,\n      createdAt: new Date()\n    };\n  }\n\n  // Extract category and keep full description from expense text\n  private static extractCategoryFromText(text: string): { category?: string; description: string } {\n    const lowerText = text.toLowerCase().trim();\n    const originalText = text.trim();\n    \n    // Pattern 1: \"spent/paid/bought X for Y\" -> category: Y, description: original text\n    const forPattern = /(?:spent|paid|bought|purchased|cost|charged)\\s+(?:Rs\\.?|rs\\.?|RS\\.?||[$])?\\s*\\d+(?:\\.\\d{1,2})?\\s+for\\s+(.+)/i;\n    const forMatch = text.match(forPattern);\n    if (forMatch) {\n      const category = forMatch[1].trim();\n      return {\n        category: this.mapToStandardCategory(category),\n        description: originalText\n      };\n    }\n\n    // Pattern 2: \"X for Y\" -> category: Y, description: original text\n    const simpleForPattern = /(?:Rs\\.?|rs\\.?|RS\\.?||[$])?\\s*\\d+(?:\\.\\d{1,2})?\\s+for\\s+(.+)/i;\n    const simpleForMatch = text.match(simpleForPattern);\n    if (simpleForMatch) {\n      const category = simpleForMatch[1].trim();\n      return {\n        category: this.mapToStandardCategory(category),\n        description: originalText\n      };\n    }\n\n    // Pattern 3: \"spent/paid/bought X on Y\" -> category: Y, description: original text\n    const onPattern = /(?:spent|paid|bought|purchased)\\s+(?:Rs\\.?|rs\\.?|RS\\.?||[$])?\\s*\\d+(?:\\.\\d{1,2})?\\s+on\\s+(.+)/i;\n    const onMatch = text.match(onPattern);\n    if (onMatch) {\n      const category = onMatch[1].trim();\n      return {\n        category: this.mapToStandardCategory(category),\n        description: originalText\n      };\n    }\n\n    // Pattern 4: Look for expense context words and extract category\n    const expenseContexts = [\n      'haircut', 'salon', 'barber', 'taxi', 'uber', 'lyft', 'parking', 'toll',\n      'coffee', 'tea', 'lunch', 'dinner', 'breakfast', 'snack', 'food',\n      'groceries', 'shopping', 'movie', 'ticket', 'gas', 'fuel',\n      'electricity', 'rent', 'medicine', 'doctor', 'train', 'bus', 'flight',\n      'metro', 'subway', 'cab', 'auto'\n    ];\n    \n    for (const context of expenseContexts) {\n      if (lowerText.includes(context)) {\n        // For compound terms like \"train ticket\", extract the full relevant phrase\n        if (context === 'ticket') {\n          // Look for transportation + ticket combinations first\n          const transportTicketMatch = lowerText.match(/\\b(train|bus|flight|metro|subway)\\s+ticket\\b/);\n          if (transportTicketMatch) {\n            return {\n              category: this.mapToStandardCategory(transportTicketMatch[0]),\n              description: originalText\n            };\n          }\n          // Look for movie/entertainment + ticket combinations\n          const entertainmentTicketMatch = lowerText.match(/\\b(movie|cinema|concert|show)\\s+ticket\\b/);\n          if (entertainmentTicketMatch) {\n            return {\n              category: this.mapToStandardCategory(entertainmentTicketMatch[0]),\n              description: originalText\n            };\n          }\n          // Generic ticket\n          return {\n            category: this.mapToStandardCategory('ticket'),\n            description: originalText\n          };\n        }\n        \n        return {\n          category: this.mapToStandardCategory(context),\n          description: originalText\n        };\n      }\n    }\n\n    // Fallback: return original text as description without category\n    return {\n      description: originalText\n    };\n  }\n\n  // Map extracted categories to standard category names\n  private static mapToStandardCategory(extractedCategory: string): string {\n    const lowerCategory = extractedCategory.toLowerCase().trim();\n    \n    // Transportation (check first for specific transport + ticket combinations)\n    if (['train ticket', 'bus ticket', 'flight ticket', 'metro ticket', 'subway ticket'].some(word => lowerCategory.includes(word))) {\n      return 'Transportation';\n    }\n    \n    // Transportation (general)\n    if (['taxi', 'uber', 'lyft', 'parking', 'toll', 'gas', 'fuel', 'transportation', 'train', 'bus', 'flight', 'metro', 'subway', 'cab', 'auto'].some(word => lowerCategory.includes(word))) {\n      return 'Transportation';\n    }\n    \n    // Food & Dining\n    if (['coffee', 'tea', 'lunch', 'dinner', 'breakfast', 'snack', 'food', 'groceries', 'restaurant', 'cafe'].some(word => lowerCategory.includes(word))) {\n      return 'Food';\n    }\n    \n    // Personal Care\n    if (['haircut', 'salon', 'barber', 'medicine', 'doctor', 'hospital', 'pharmacy'].some(word => lowerCategory.includes(word))) {\n      return 'Health & Personal Care';\n    }\n    \n    // Entertainment (check after transportation to avoid conflicts)\n    if (['movie ticket', 'concert ticket', 'show ticket', 'movie', 'cinema', 'theater', 'entertainment'].some(word => lowerCategory.includes(word))) {\n      return 'Entertainment';\n    }\n    \n    // Generic ticket (fallback for other tickets)\n    if (lowerCategory.includes('ticket') && !['train', 'bus', 'flight', 'metro', 'subway'].some(transport => lowerCategory.includes(transport))) {\n      return 'Entertainment';\n    }\n    \n    // Utilities\n    if (['electricity', 'rent', 'bill', 'utilities', 'water', 'internet'].some(word => lowerCategory.includes(word))) {\n      return 'Utilities';\n    }\n    \n    // Shopping\n    if (['shopping', 'clothes', 'clothing', 'shoes', 'accessories'].some(word => lowerCategory.includes(word))) {\n      return 'Shopping';\n    }\n    \n    // Default: capitalize first letter of extracted category\n    return extractedCategory.charAt(0).toUpperCase() + extractedCategory.slice(1);\n  }\n\n  private static extractAmount(text: string): { value: number; currency: string } | null {\n    // Find all numbers in the text, including those attached to currency symbols\n    const numberMatches = text.match(/(?:Rs\\.?|rs\\.?|RS\\.?||[$])\\s*(\\d+(?:\\.\\d{1,2})?)|(\\d+(?:\\.\\d{1,2})?)/g);\n    if (!numberMatches || numberMatches.length === 0) return null;\n\n    let detectedCurrency = null;\n    let largestAmount = 0;\n\n    // Extract numeric parts and detect explicit currency symbols\n    const amounts = numberMatches.map(match => {\n      // Extract number from patterns like \"Rs150\", \"100\", \"$50\" or plain \"100\"\n      const numericPart = match.replace(/^(Rs\\.?|rs\\.?|RS\\.?||[$])\\s*/i, '');\n      const amount = parseFloat(numericPart);\n      \n      if (!isNaN(amount) && amount > 0) {\n        // If this is the largest amount so far, check if it has an explicit currency\n        if (amount >= largestAmount) {\n          largestAmount = amount;\n          \n          // Check for explicit currency symbols in the original match\n          if (match.includes('$')) {\n            detectedCurrency = 'USD';\n          } else if (match.includes('')) {\n            detectedCurrency = 'EUR';\n          } else if (match.includes('')) {\n            detectedCurrency = 'GBP';\n          } else if (match.includes('')) {\n            detectedCurrency = 'INR';\n          } else if (/Rs\\.?|rs\\.?|RS\\.?/i.test(match)) {\n            detectedCurrency = 'INR';\n          }\n        }\n        \n        return amount;\n      }\n      return NaN;\n    }).filter(num => !isNaN(num) && num > 0);\n\n    if (amounts.length === 0) return null;\n\n    // Use the largest number as the expense amount\n    const value = Math.max(...amounts);\n    \n    // Use explicitly detected currency if found, otherwise fall back to system default\n    const currency = detectedCurrency || this.getSystemCurrency();\n\n    return { value, currency };\n  }\n\n  static formatCurrency(amount: number, currency?: string): string {\n    // Use provided currency or fall back to system default\n    const currencyCode = currency || this.getSystemCurrency();\n    \n    try {\n      // Use specific locales to avoid unwanted prefixes\n      let locale = 'en-US'; // Default to US English\n      \n      // Choose locale based on currency for cleaner formatting\n      switch (currencyCode) {\n        case 'USD':\n          locale = 'en-US'; // Produces clean $12.99\n          break;\n        case 'EUR':\n          locale = 'en-GB'; // Produces clean 12.99\n          break;\n        case 'GBP':\n          locale = 'en-GB'; // Produces clean 12.99\n          break;\n        case 'INR':\n          locale = 'en-IN'; // Produces clean 12.99\n          break;\n        case 'CAD':\n          locale = 'en-CA'; // Should produce C$12.99 or CA$12.99\n          break;\n        case 'AUD':\n          locale = 'en-AU'; // Should produce A$12.99\n          break;\n      }\n      \n      const formatter = new Intl.NumberFormat(locale, {\n        style: 'currency',\n        currency: currencyCode,\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      });\n      \n      const formatted = formatter.format(amount);\n      \n      // Clean up any remaining unwanted prefixes for better display\n      // Remove \"US\" prefix from USD formatting (US$12.99  $12.99)\n      if (currencyCode === 'USD' && formatted.startsWith('US$')) {\n        return formatted.replace('US$', '$');\n      }\n      \n      // Remove \"CA\" prefix from CAD formatting if present\n      if (currencyCode === 'CAD' && formatted.startsWith('CA$')) {\n        return formatted.replace('CA$', 'C$');\n      }\n      \n      return formatted;\n    } catch (error) {\n      // Fallback formatting if currency is not supported\n      const symbols: { [key: string]: string } = {\n        'USD': '$',\n        'EUR': '',\n        'GBP': '',\n        'INR': '',\n        'CAD': 'C$',\n        'AUD': 'A$',\n        'JPY': '',\n        'CNY': ''\n      };\n      \n      const symbol = symbols[currencyCode] || currencyCode;\n      return `${symbol}${amount.toFixed(2)}`;\n    }\n  }\n\n  static isExpenseRelated(text: string): boolean {\n    const lowerText = text.toLowerCase();\n    return this.EXPENSE_KEYWORDS.some((keyword: string) => lowerText.includes(keyword));\n  }\n}\n","import React, { useState } from 'react';\nimport { View, Text, TouchableOpacity, Platform, Alert, StyleSheet, Animated, PanResponder } from 'react-native';\n// import { Ionicons } from \"@expo/vector-icons\";\nimport { format } from \"date-fns\";\nimport Markdown from \"react-native-markdown-display\";\nimport { Entry, Expense, ActionItem } from '../types';\nimport { TextAnalyzer } from '../utils/textAnalysis';\nimport { isDesktop } from '../utils/platform';\n\ninterface MessageBubbleProps {\n  entry: Entry;\n  onLongPress: (entry: Entry) => void;\n  onEdit?: (entry: Entry) => void;\n  onDelete?: (entry: Entry) => void;\n  markdownStyles: any;\n  expense?: Expense;\n  actionItem?: ActionItem;\n}\n\nexport const MessageBubble: React.FC<MessageBubbleProps> = ({\n  entry,\n  onLongPress,\n  onEdit,\n  onDelete,\n  markdownStyles,\n  expense,\n  actionItem,\n}) => {\n  const [isHovered, setIsHovered] = useState(false);\n  const [translateX] = useState(new Animated.Value(0));\n  const desktop = isDesktop();\n\n  // Swipe gesture for delete (mobile only)\n  const panResponder = PanResponder.create({\n    onStartShouldSetPanResponder: () => !desktop && entry.type !== 'system',\n    onMoveShouldSetPanResponder: (_, gestureState) => {\n      return !desktop && entry.type !== 'system' && Math.abs(gestureState.dx) > 5;\n    },\n    onPanResponderMove: (_, gestureState) => {\n      // Only allow left swipe\n      if (gestureState.dx < 0) {\n        translateX.setValue(gestureState.dx);\n      }\n    },\n    onPanResponderRelease: (_, gestureState) => {\n      if (gestureState.dx < -80) {\n        // Swipe threshold reached - show delete confirmation\n        Alert.alert(\n          'Delete Entry',\n          'Are you sure you want to delete this entry?',\n          [\n            { text: 'Cancel', style: 'cancel', onPress: () => {\n              Animated.spring(translateX, {\n                toValue: 0,\n                useNativeDriver: true,\n              }).start();\n            }},\n            { text: 'Delete', style: 'destructive', onPress: () => {\n              if (onDelete) onDelete(entry);\n              Animated.spring(translateX, {\n                toValue: 0,\n                useNativeDriver: true,\n              }).start();\n            }},\n          ]\n        );\n      } else {\n        // Snap back\n        Animated.spring(translateX, {\n          toValue: 0,\n          useNativeDriver: true,\n        }).start();\n      }\n    },\n  });\n\n  const getBubbleStyle = () => {\n    const baseStyles = [styles.messageBubble];\n    const alignmentStyle = entry.type === 'system' ? styles.systemMessage : styles.userMessage;\n    \n    switch (entry.type) {\n      case \"expense\":\n        return [...baseStyles, styles.expenseBubble, alignmentStyle];\n      case \"action\":\n        return [...baseStyles, styles.actionBubble, alignmentStyle];\n      case \"system\":\n        return [...baseStyles, styles.systemBubble, alignmentStyle];\n      default:\n        return [...baseStyles, styles.defaultBubble, alignmentStyle];\n    }\n  };\n\n  const getIcon = () => {\n    switch (entry.type) {\n      case \"expense\":\n        return <Text style={{ fontSize: 16, color: \"#2e7d32\" }}></Text>;\n      case \"action\":\n        return <Text style={{ fontSize: 16, color: \"#1565c0\" }}></Text>;\n      default:\n        return null;\n    }\n  };\n\n  const getCategoryLabel = () => {\n    switch (entry.type) {\n      case \"expense\":\n        if (expense) {\n          const prefix = expense.autoDetected ? ' Auto-categorized as Expense' : ' Manually categorized as Expense';\n          return `${prefix}: ${TextAnalyzer.formatCurrency(expense.amount, expense.currency)}`;\n        }\n        return \" Expense\";\n      case \"action\":\n        if (actionItem) {\n          const prefix = actionItem.autoDetected ? ' Auto-categorized as Task' : ' Manually categorized as Task';\n          return `${prefix}: ${actionItem.title}`;\n        }\n        return \" Task\";\n      default:\n        return null;\n    }\n  };\n\n  const handleNativeLongPress = () => {\n    if (entry.type !== 'system') {\n      Alert.alert(\n        \"Message Options\",\n        \"Choose an action\",\n        [\n          {\n            text: \"Copy\",\n            onPress: () => Alert.alert(\"Copy\", \"Text copied: \" + entry.text.substring(0, 50) + \"...\"),\n            style: \"default\"\n          },\n          {\n            text: \"Categorize\",\n            onPress: () => onLongPress(entry),\n          },\n          {\n            text: \"Cancel\",\n            style: \"cancel\"\n          }\n        ]\n      );\n    }\n  };\n\n  const MessageContent = () => (\n    <View style={{ flex: 1 }}>\n      <View style={styles.messageHeader}>\n        {getIcon()}\n        <Text style={styles.timestamp}>\n          {format(entry.timestamp, \"HH:mm\")}\n        </Text>\n        {entry.type !== 'system' && desktop && isHovered && (\n          <View style={styles.actionButtons}>\n            {onEdit && (\n              <TouchableOpacity \n                style={styles.actionButton}\n                onPress={() => onEdit(entry)}\n                hitSlop={{ top: 10, bottom: 10, left: 10, right: 10 }}\n              >\n                <Text style={styles.actionButtonText}> Edit</Text>\n              </TouchableOpacity>\n            )}\n            {onDelete && (\n              <TouchableOpacity \n                style={[styles.actionButton, styles.deleteButton]}\n                onPress={(e) => {\n                  e.stopPropagation();\n                  if (Platform.OS === 'web') {\n                    if (window.confirm('Are you sure you want to delete this entry?')) {\n                      onDelete(entry);\n                    }\n                  } else {\n                    Alert.alert(\n                      'Delete Entry',\n                      'Are you sure you want to delete this entry?',\n                      [\n                        { text: 'Cancel', style: 'cancel' },\n                        { text: 'Delete', style: 'destructive', onPress: () => onDelete(entry) },\n                      ]\n                    );\n                  }\n                }}\n                hitSlop={{ top: 10, bottom: 10, left: 10, right: 10 }}\n              >\n                <Text style={styles.actionButtonText}> Delete</Text>\n              </TouchableOpacity>\n            )}\n          </View>\n        )}\n      </View>\n      {entry.type !== 'system' && !desktop && (\n        <Text style={styles.gestureHint}>Long press to edit  Swipe left to delete</Text>\n      )}\n      {entry.isMarkdown ? (\n        <Markdown style={markdownStyles}>{entry.text}</Markdown>\n      ) : (\n        <Text \n          style={[\n            styles.messageText,\n            entry.type === 'system' \n              ? styles.systemMessageText \n              : entry.type === 'log'\n                ? styles.userMessageText\n                : styles.nonUserMessageText\n          ]}\n          selectable={Platform.OS === 'web'}\n        >\n          {entry.text}\n        </Text>\n      )}\n      {entry.type !== \"log\" && entry.type !== \"system\" && (\n        <Text style={styles.categoryLabel}>{getCategoryLabel()}</Text>\n      )}\n    </View>\n  );\n\n  const webStyles = Platform.OS === 'web' ? {\n    style: {\n      cursor: 'text',\n      WebkitTouchCallout: 'none',\n      WebkitUserSelect: 'text',\n      MozUserSelect: 'text',\n      msUserSelect: 'text',\n      userSelect: 'text',\n    } as any\n  } : {};\n\n  return (\n    <View style={entry.type === 'system' ? styles.systemMessageContainer : styles.userMessageContainer}>\n      <View style={styles.bubbleWrapper}>\n        {/* Delete indicator (shown behind bubble when swiping) */}\n        {!desktop && entry.type !== 'system' && (\n          <View style={styles.deleteIndicator}>\n            <Text style={{ fontSize: 24, color: '#fff' }}></Text>\n          </View>\n        )}\n        \n        <Animated.View\n          {...panResponder.panHandlers}\n          style={[\n            getBubbleStyle(),\n            {\n              transform: [{ translateX }],\n            },\n          ]}\n          {...(desktop && entry.type !== 'system' ? {\n            onMouseEnter: () => setIsHovered(true),\n            onMouseLeave: () => setIsHovered(false),\n          } : {})}\n        >\n          <TouchableOpacity\n            activeOpacity={1}\n            onLongPress={entry.type !== 'system' ? () => {\n              if (onEdit) onEdit(entry);\n            } : undefined}\n            delayLongPress={500}\n            disabled={desktop && entry.type !== 'system'}\n          >\n            <MessageContent />\n          </TouchableOpacity>\n        </Animated.View>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  userMessageContainer: {\n    marginVertical: 4,\n    alignSelf: 'flex-start',\n    maxWidth: '90%',\n    flexShrink: 0,\n  },\n  systemMessageContainer: {\n    marginVertical: 4,\n    alignSelf: 'flex-end',\n    maxWidth: '90%',\n    flexShrink: 0,\n  },\n  bubbleWrapper: {\n    position: 'relative',\n  },\n  deleteIndicator: {\n    position: 'absolute',\n    right: 0,\n    top: 0,\n    bottom: 0,\n    width: 80,\n    backgroundColor: '#f44336',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 12,\n  },\n  messageContainer: {\n    marginVertical: 1,\n    alignSelf: \"flex-start\",\n    maxWidth: \"95%\",\n  },\n  messageBubble: {\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    minWidth: 200,\n    maxWidth: '100%',\n    alignSelf: 'flex-start',\n    borderRadius: 12,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 1,\n    },\n    shadowOpacity: 0.18,\n    shadowRadius: 1.0,\n    elevation: 1,\n  },\n  defaultBubble: {\n    backgroundColor: \"#f0f0f0\", // Light gray for user messages\n  },\n  expenseBubble: {\n    backgroundColor: \"#e8f5e8\",\n    borderColor: \"#4caf50\",\n    borderWidth: 1,\n  },\n  actionBubble: {\n    backgroundColor: \"#e3f2fd\",\n    borderColor: \"#2196f3\",\n    borderWidth: 1,\n  },\n  systemBubble: {\n    backgroundColor: \"#e3f2fd\", // Light blue for system messages\n    borderColor: \"#2196f3\",\n    borderWidth: 1,\n    borderRadius: 12,\n  },\n  systemMessage: {\n    backgroundColor: '#e3f2fd',\n    marginLeft: '15%',\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 5,\n    borderBottomLeftRadius: 20,\n    borderBottomRightRadius: 5,\n  },\n  userMessage: {\n    backgroundColor: '#f0f0f0',\n    marginRight: '15%',\n    borderTopLeftRadius: 5,\n    borderTopRightRadius: 20,\n    borderBottomLeftRadius: 5,\n    borderBottomRightRadius: 20,\n  },\n  messageHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginBottom: 4,\n    flexWrap: 'wrap',\n    minWidth: 200,\n  },\n  actionButtons: {\n    flexDirection: \"row\",\n    gap: 4,\n    alignItems: 'center',\n  },\n  actionButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 4,\n    paddingHorizontal: 6,\n    borderRadius: 4,\n    backgroundColor: \"rgba(0, 0, 0, 0.05)\",\n  },\n  deleteButton: {\n    backgroundColor: 'rgba(244, 67, 54, 0.1)',\n  },\n  actionButtonText: {\n    fontSize: 12,\n  },\n  gestureHint: {\n    fontSize: 9,\n    color: '#999',\n    fontStyle: 'italic',\n    marginBottom: 4,\n  },\n  timestamp: {\n    fontSize: 10,\n    color: \"#666\",\n    marginLeft: 4,\n  },\n  messageText: {\n    fontSize: 15,\n    lineHeight: 20,\n    ...(Platform.OS === 'web' ? {\n      userSelect: 'text',\n      WebkitUserSelect: 'text',\n      display: 'inline-block',\n      minWidth: 'fit-content',\n    } as any : {}),\n  },\n  userMessageText: {\n    color: \"#333\", // Dark text for user messages on light background\n  },\n  systemMessageText: {\n    color: \"#1565c0\", // Darker blue for contrast on light background\n    fontSize: 14,\n    textAlign: \"left\",\n    fontWeight: \"500\", // Slightly bolder for better readability\n  },\n  nonUserMessageText: {\n    color: \"#333\",  // Dark text for action/expense messages\n  },\n  categoryLabel: {\n    fontSize: 11,\n    color: \"#666\",\n    fontStyle: \"italic\",\n    marginTop: 2,\n    flexShrink: 1,\n    flexWrap: 'wrap',\n  },\n});\n","import { Platform, Dimensions } from 'react-native';\n\n/**\n * Detect if the app is running on a desktop/laptop device\n */\nexport const isDesktop = (): boolean => {\n  if (Platform.OS === 'web') {\n    // Check window width and user agent\n    const width = Dimensions.get('window').width;\n    const userAgent = typeof navigator !== 'undefined' ? navigator.userAgent : '';\n    \n    // Desktop if width is large and not a mobile user agent\n    const isLargeScreen = width > 768;\n    const isMobileUA = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);\n    \n    return isLargeScreen && !isMobileUA;\n  }\n  \n  // Native iOS and Android are not desktop\n  return false;\n};\n\n/**\n * Detect if the device has touch capability\n */\nexport const isTouchDevice = (): boolean => {\n  if (Platform.OS === 'web') {\n    return (\n      'ontouchstart' in window ||\n      navigator.maxTouchPoints > 0\n    );\n  }\n  \n  // Native platforms are always touch devices\n  return true;\n};\n","import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  Switch,\n  TouchableOpacity,\n  ScrollView,\n  Alert,\n  Modal,\n  Platform,\n} from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { StorageService } from '../utils/storage';\nimport { SettingsData } from '../types';\n\nconst defaultSettings: SettingsData = {\n  isMarkdownEnabled: true,\n  enterToSend: true,\n  systemCurrency: 'AUTO', // AUTO means use system default\n  layoutStyle: 'chat', // Default to current chat style\n  theme: 'system', // light, dark, or system\n};\n\nconst CURRENCIES = [\n  { code: 'AUTO', name: 'Auto-detect', symbol: '' },\n  { code: 'USD', name: 'US Dollar', symbol: '$' },\n  { code: 'EUR', name: 'Euro', symbol: '' },\n  { code: 'GBP', name: 'British Pound', symbol: '' },\n  { code: 'INR', name: 'Indian Rupee', symbol: '' },\n  { code: 'CAD', name: 'Canadian Dollar', symbol: 'C$' },\n  { code: 'AUD', name: 'Australian Dollar', symbol: 'A$' },\n  { code: 'JPY', name: 'Japanese Yen', symbol: '' },\n];\n\nconst THEME_OPTIONS = [\n  { id: 'light', name: 'Light Mode', icon: '' },\n  { id: 'dark', name: 'Dark Mode', icon: '' },\n  { id: 'system', name: 'System Default', icon: '' },\n];\n\nexport const SettingsScreen: React.FC<{ onClose: () => void }> = ({ onClose }) => {\n  const [settings, setSettings] = useState<SettingsData>(defaultSettings);\n  const [showCurrencyModal, setShowCurrencyModal] = useState(false);\n  const [showLayoutModal, setShowLayoutModal] = useState(false);\n  const [showThemeModal, setShowThemeModal] = useState(false);\n\n  useEffect(() => {\n    loadSettings();\n  }, []);\n\n  const loadSettings = async () => {\n    try {\n      const savedSettings = await StorageService.getSettings();\n      if (savedSettings) {\n        setSettings({ ...defaultSettings, ...savedSettings });\n      }\n    } catch (error) {\n      console.error('Error loading settings:', error);\n    }\n  };\n\n  const saveSettings = async (newSettings: SettingsData) => {\n    try {\n      console.log('Saving settings:', newSettings);\n      await StorageService.saveSettings(newSettings);\n      setSettings(newSettings);\n      console.log('Settings saved successfully');\n    } catch (error) {\n      console.error('Error saving settings:', error);\n      Alert.alert('Error', 'Failed to save settings');\n    }\n  };\n\n  const updateSetting = <K extends keyof SettingsData>(\n    key: K,\n    value: SettingsData[K]\n  ) => {\n    console.log(`Updating setting ${String(key)} to ${value}`);\n    const newSettings = { ...settings, [key]: value };\n    saveSettings(newSettings);\n  };\n\n  const showCurrencyPicker = () => {\n    console.log('Currency picker tapped'); // Debug log\n    console.log('Setting showCurrencyModal to true');\n    setShowCurrencyModal(true);\n  };\n\n  const LAYOUT_OPTIONS = [\n    { id: 'chat', name: 'Chat Style', icon: '' },\n    { id: 'cards', name: 'Card Layout', icon: '' },\n    { id: 'timeline', name: 'Timeline Style', icon: '' },\n    { id: 'minimal', name: 'Minimal Design', icon: '' },\n  ];\n\n  const showLayoutPicker = () => {\n    console.log('Layout picker tapped'); // Debug log\n    console.log('Setting showLayoutModal to true');\n    setShowLayoutModal(true);\n  };\n\n  const getCurrentLayoutName = () => {\n    const current = LAYOUT_OPTIONS.find(l => l.id === settings.layoutStyle);\n    return current ? `${current.icon} ${current.name}` : ' Chat Style';\n  };\n\n  const getCurrentCurrencyName = () => {\n    const current = CURRENCIES.find(c => c.code === settings.systemCurrency);\n    return current ? `${current.symbol} ${current.name}` : 'Auto-detect';\n  };\n\n  const showThemePicker = () => {\n    console.log('Theme picker tapped');\n    setShowThemeModal(true);\n  };\n\n  const getCurrentThemeName = () => {\n    const currentTheme = settings.theme || 'system';\n    const current = THEME_OPTIONS.find(t => t.id === currentTheme);\n    return current ? `${current.icon} ${current.name}` : ' System Default';\n  };\n\n  const handleClearJournal = async () => {\n    console.log('handleClearJournal called');\n    \n    // Use window.confirm for web, Alert for native\n    const confirmClear = Platform.OS === 'web' \n      ? window.confirm('This will delete all journal entries but keep your expenses and tasks. Continue?')\n      : await new Promise((resolve) => {\n          Alert.alert(\n            'Clear Journal Entries',\n            'This will delete all journal entries but keep your expenses and tasks. Continue?',\n            [\n              { text: 'Cancel', style: 'cancel', onPress: () => resolve(false) },\n              {\n                text: 'Clear',\n                style: 'destructive',\n                onPress: () => resolve(true),\n              },\n            ]\n          );\n        });\n\n    if (confirmClear) {\n      try {\n        console.log('Clearing journal entries...');\n        // Get all entries\n        const allEntries = await StorageService.getEntries();\n        console.log(`Found ${allEntries.length} entries to clear`);\n        \n        // Filter to keep only system messages (if any) or clear all\n        // Since expenses and tasks are stored separately, we can safely clear all entries\n        await StorageService.saveEntries([]);\n        console.log('Journal entries cleared successfully');\n        \n        if (Platform.OS === 'web') {\n          window.alert('Journal entries cleared. Your expenses and tasks are safe. Please refresh the journal tab.');\n        } else {\n          Alert.alert('Success', 'Journal entries cleared. Your expenses and tasks are safe. Please refresh the journal tab.');\n        }\n      } catch (error) {\n        console.error('Error clearing journal:', error);\n        if (Platform.OS === 'web') {\n          window.alert('Failed to clear journal entries');\n        } else {\n          Alert.alert('Error', 'Failed to clear journal entries');\n        }\n      }\n    }\n  };\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Settings</Text>\n        <TouchableOpacity onPress={onClose} style={styles.closeButton}>\n          <Text style={styles.closeButtonText}></Text>\n        </TouchableOpacity>\n      </View>\n\n      <ScrollView style={styles.content}>\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Text Input</Text>\n          \n          <View style={styles.settingItem}>\n            <View style={styles.settingInfo}>\n              <Text style={styles.settingLabel}>Enable Markdown</Text>\n              <Text style={styles.settingDescription}>\n                Format text with **bold**, *italic*, and other markdown syntax\n              </Text>\n            </View>\n            <Switch\n              value={settings.isMarkdownEnabled}\n              onValueChange={(value) => updateSetting('isMarkdownEnabled', value)}\n            />\n          </View>\n\n          <View style={styles.settingItem}>\n            <View style={styles.settingInfo}>\n              <Text style={styles.settingLabel}>Enter to Send</Text>\n              <Text style={styles.settingDescription}>\n                Press Enter to send message (off = Enter adds new line)\n              </Text>\n            </View>\n            <Switch\n              value={settings.enterToSend}\n              onValueChange={(value) => updateSetting('enterToSend', value)}\n            />\n          </View>\n        </View>\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Currency</Text>\n          \n          <TouchableOpacity style={styles.settingItem} onPress={showCurrencyPicker}>\n            <View style={styles.settingInfo}>\n              <Text style={styles.settingLabel}>Default Currency</Text>\n              <Text style={styles.settingDescription}>\n                Currency for expenses (when not explicitly specified)\n              </Text>\n              <Text style={styles.settingValue}>{getCurrentCurrencyName()}</Text>\n            </View>\n            <Text style={styles.arrow}></Text>\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Appearance</Text>\n          \n          <TouchableOpacity style={styles.settingItem} onPress={showThemePicker}>\n            <View style={styles.settingInfo}>\n              <Text style={styles.settingLabel}>Theme</Text>\n              <Text style={styles.settingDescription}>\n                Choose your color theme preference\n              </Text>\n              <Text style={styles.settingValue}>{getCurrentThemeName()}</Text>\n            </View>\n            <Text style={styles.arrow}></Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity style={styles.settingItem} onPress={showLayoutPicker}>\n            <View style={styles.settingInfo}>\n              <Text style={styles.settingLabel}>Journal Layout</Text>\n              <Text style={styles.settingDescription}>\n                Choose how your journal entries are displayed\n              </Text>\n              <Text style={styles.settingValue}>{getCurrentLayoutName()}</Text>\n            </View>\n            <Text style={styles.arrow}></Text>\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Data Management</Text>\n          \n          <TouchableOpacity \n            style={[styles.settingItem, styles.dangerSettingItem]} \n            onPress={handleClearJournal}\n          >\n            <View style={styles.settingInfo}>\n              <Text style={[styles.settingLabel, styles.dangerText]}>Clear Journal Entries</Text>\n              <Text style={styles.settingDescription}>\n                Delete all journal entries while keeping expenses and tasks\n              </Text>\n            </View>\n            <Text style={[styles.arrow, styles.dangerText]}></Text>\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>About</Text>\n          <View style={styles.settingItem}>\n            <Text style={styles.settingLabel}>Daily Tracker</Text>\n            <Text style={styles.settingDescription}>\n              Smart journal with automatic expense and task detection\n            </Text>\n          </View>\n        </View>\n      </ScrollView>\n\n      {/* Currency Selection Modal */}\n      <Modal\n        visible={showCurrencyModal}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={() => setShowCurrencyModal(false)}\n      >\n        <View style={modalStyles.overlay}>\n          <View style={modalStyles.container}>\n            <Text style={modalStyles.title}>Select Currency</Text>\n            <Text style={modalStyles.subtitle}>Choose your preferred currency:</Text>\n            \n            <ScrollView style={modalStyles.optionsList} showsVerticalScrollIndicator={true}>\n              {CURRENCIES.map((currency) => {\n                console.log(`Rendering currency option: ${currency.name}`);\n                return (\n                  <TouchableOpacity\n                    key={currency.code}\n                    style={[\n                      modalStyles.option,\n                      settings.systemCurrency === currency.code && modalStyles.selectedOption\n                    ]}\n                    onPress={() => {\n                      console.log(`Selected currency: ${currency.name}`);\n                      updateSetting('systemCurrency', currency.code);\n                      setShowCurrencyModal(false);\n                    }}\n                  >\n                    <Text style={[\n                      modalStyles.optionText,\n                      settings.systemCurrency === currency.code && modalStyles.selectedOptionText\n                    ]}>\n                      {currency.symbol} {currency.name}\n                    </Text>\n                    {settings.systemCurrency === currency.code && (\n                      <Text style={modalStyles.checkmark}></Text>\n                    )}\n                  </TouchableOpacity>\n                );\n              })}\n            </ScrollView>\n            \n            <TouchableOpacity\n              style={modalStyles.cancelButton}\n              onPress={() => setShowCurrencyModal(false)}\n            >\n              <Text style={modalStyles.cancelButtonText}>Cancel</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Layout Selection Modal */}\n      <Modal\n        visible={showLayoutModal}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={() => setShowLayoutModal(false)}\n      >\n        <View style={modalStyles.overlay}>\n          <View style={modalStyles.container}>\n            <Text style={modalStyles.title}>Select Layout Style</Text>\n            <Text style={modalStyles.subtitle}>Choose how your journal entries are displayed:</Text>\n            \n            <ScrollView style={modalStyles.optionsList} showsVerticalScrollIndicator={true}>\n              {LAYOUT_OPTIONS.map((layout) => {\n                console.log(`Rendering layout option: ${layout.name}`);\n                return (\n                  <TouchableOpacity\n                    key={layout.id}\n                    style={[\n                      modalStyles.option,\n                      settings.layoutStyle === layout.id && modalStyles.selectedOption\n                    ]}\n                    onPress={() => {\n                      console.log(`Selected layout: ${layout.name}`);\n                      updateSetting('layoutStyle', layout.id);\n                      setShowLayoutModal(false);\n                    }}\n                  >\n                    <Text style={[\n                      modalStyles.optionText,\n                      settings.layoutStyle === layout.id && modalStyles.selectedOptionText\n                    ]}>\n                      {layout.icon} {layout.name}\n                    </Text>\n                    {settings.layoutStyle === layout.id && (\n                      <Text style={modalStyles.checkmark}></Text>\n                    )}\n                  </TouchableOpacity>\n                );\n              })}\n            </ScrollView>\n            \n            <TouchableOpacity\n              style={modalStyles.cancelButton}\n              onPress={() => setShowLayoutModal(false)}\n            >\n              <Text style={modalStyles.cancelButtonText}>Cancel</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Theme Selection Modal */}\n      <Modal\n        visible={showThemeModal}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={() => setShowThemeModal(false)}\n      >\n        <View style={modalStyles.overlay}>\n          <View style={modalStyles.container}>\n            <Text style={modalStyles.title}>Select Theme</Text>\n            <Text style={modalStyles.subtitle}>Choose your preferred color theme:</Text>\n            \n            <ScrollView style={modalStyles.optionsList} showsVerticalScrollIndicator={true}>\n              {THEME_OPTIONS.map((theme) => {\n                const currentTheme = settings.theme || 'system';\n                return (\n                  <TouchableOpacity\n                    key={theme.id}\n                    style={[\n                      modalStyles.option,\n                      currentTheme === theme.id && modalStyles.selectedOption\n                    ]}\n                    onPress={() => {\n                      console.log(`Selected theme: ${theme.name}`);\n                      updateSetting('theme', theme.id);\n                      setShowThemeModal(false);\n                    }}\n                  >\n                    <Text style={[\n                      modalStyles.optionText,\n                      currentTheme === theme.id && modalStyles.selectedOptionText\n                    ]}>\n                      {theme.icon} {theme.name}\n                    </Text>\n                    {currentTheme === theme.id && (\n                      <Text style={modalStyles.checkmark}></Text>\n                    )}\n                  </TouchableOpacity>\n                );\n              })}\n            </ScrollView>\n            \n            <TouchableOpacity\n              style={modalStyles.cancelButton}\n              onPress={() => setShowThemeModal(false)}\n            >\n              <Text style={modalStyles.cancelButtonText}>Cancel</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </Modal>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n  },\n  closeButton: {\n    padding: 8,\n    borderRadius: 20,\n    backgroundColor: '#f0f0f0',\n  },\n  closeButtonText: {\n    fontSize: 16,\n    color: '#666',\n    fontWeight: 'bold',\n  },\n  content: {\n    flex: 1,\n  },\n  section: {\n    backgroundColor: '#fff',\n    marginVertical: 8,\n    paddingVertical: 8,\n  },\n  sectionTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#333',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    backgroundColor: '#f8f8f8',\n  },\n  settingItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: '#f0f0f0',\n  },\n  settingInfo: {\n    flex: 1,\n    marginRight: 12,\n  },\n  settingLabel: {\n    fontSize: 16,\n    color: '#333',\n    marginBottom: 4,\n  },\n  settingDescription: {\n    fontSize: 14,\n    color: '#666',\n    lineHeight: 18,\n  },\n  settingValue: {\n    fontSize: 14,\n    color: '#007AFF',\n    marginTop: 4,\n    fontWeight: '500',\n  },\n  arrow: {\n    fontSize: 20,\n    color: '#ccc',\n  },\n  dangerSettingItem: {\n    backgroundColor: '#fff0f0',\n  },\n  dangerText: {\n    color: '#d32f2f',\n  },\n});\n\nconst modalStyles = StyleSheet.create({\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n  },\n  container: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    width: '100%',\n    maxWidth: 400,\n    minHeight: 300,\n    maxHeight: '80%',\n    paddingVertical: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n    textAlign: 'center',\n    marginBottom: 8,\n  },\n  subtitle: {\n    fontSize: 16,\n    color: '#666',\n    textAlign: 'center',\n    marginBottom: 20,\n    paddingHorizontal: 20,\n  },\n  optionsList: {\n    flexGrow: 1,\n    minHeight: 200,\n  },\n  option: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 20,\n    paddingVertical: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#f0f0f0',\n    minHeight: 50,\n  },\n  selectedOption: {\n    backgroundColor: '#e3f2fd',\n  },\n  optionText: {\n    fontSize: 16,\n    color: '#333',\n    flex: 1,\n  },\n  selectedOptionText: {\n    color: '#1976d2',\n    fontWeight: '500',\n  },\n  checkmark: {\n    fontSize: 18,\n    color: '#1976d2',\n    fontWeight: 'bold',\n  },\n  cancelButton: {\n    marginTop: 20,\n    marginHorizontal: 20,\n    paddingVertical: 12,\n    backgroundColor: '#f5f5f5',\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  cancelButtonText: {\n    fontSize: 16,\n    color: '#333',\n    fontWeight: '500',\n  },\n});","import React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport {\n  View,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  FlatList,\n  StyleSheet,\n  Alert,\n  KeyboardAvoidingView,\n  Platform,\n  Modal,\n} from \"react-native\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\n// import { Ionicons } from \"@expo/vector-icons\";\nimport Markdown from \"react-native-markdown-display\";\nimport { format } from \"date-fns\";\n\nimport { Entry, Expense, ActionItem } from \"../types\";\nimport { StorageService } from \"../utils/storage\";\nimport { TextAnalyzer } from \"../utils/textAnalysis\";\nimport { MessageBubble } from \"../components/MessageBubble\";\nimport { SettingsScreen } from \"./SettingsScreen\";\nimport { isDesktop } from \"../utils/platform\";\n\n// Custom UUID function since react-native-uuid causes crashes\nconst uuid = {\n  v4: () => {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n};\nexport const JournalScreen: React.FC<{}> = () => {\n  const [entries, setEntries] = useState<Entry[]>([]);\n  const [inputText, setInputText] = useState(\"\");\n  const [isMarkdown, setIsMarkdown] = useState(true);\n  const [testIndex, setTestIndex] = useState(0);\n  const flatListRef = useRef<FlatList>(null);\n  const textInputRef = useRef<TextInput>(null);\n  const shouldAutoScrollRef = useRef(false);\n  \n  // Settings state (will be loaded from storage)\n  const [enterToSend, setEnterToSend] = useState(true);\n  const [showSettings, setShowSettings] = useState(false);\n  const [layoutStyle, setLayoutStyle] = useState('chat');\n  \n  // Search functionality\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showSearch, setShowSearch] = useState(false);\n  const [filteredEntries, setFilteredEntries] = useState<Entry[]>([]);\n  \n  // Debug: Log state values to check for issues\n  useEffect(() => {\n    console.log(' Debug - Modal states:', { showSettings, showSearch });\n  }, [showSettings, showSearch]);\n\n  // Data for enhanced messages\n  const [expenses, setExpenses] = useState<Expense[]>([]);\n  const [actionItems, setActionItems] = useState<ActionItem[]>([]);\n  \n  // Quick-action tags for explicit categorization\n  const [forceExpense, setForceExpense] = useState(false);\n  const [forceAction, setForceAction] = useState(false);\n  \n  // Edit modal state\n  const [editingEntry, setEditingEntry] = useState<Entry | null>(null);\n  const [editText, setEditText] = useState(\"\");\n  const [editAmount, setEditAmount] = useState(\"\");\n  const [editCategory, setEditCategory] = useState(\"\");\n\n  // Test entries for different scenarios\n  const testEntries = [\n    // Expense entries first\n    \"spent Rs150 for coffee\",\n    \"bought groceries for $45.50\",\n    \"paid 2500 for electricity bill\",\n    \"lunch cost $12.99\",\n    \"purchased fuel Rs3200\",\n    \"500 for haircut\",\n    \"300 for taxi\",\n    \"50 for parking\",\n    \"spent 200 on movie ticket\",\n    \"paid $25 for gym membership\",\n    \"dinner cost Rs850\",\n    \n    // Action item entries\n    \"need to call mom tomorrow\",\n    \"todo: finish the quarterly report\",\n    \"must submit tax documents by Friday\",\n    \"reminder: doctor appointment at 3pm\",\n    \"should book flight tickets\",\n    \". pick up dry cleaning\",\n    \". schedule dentist appointment\",\n    \". buy birthday gift for Sarah\",\n    \". pay credit card bill\",\n    \"todo: prepare presentation slides\",\n    \n    // Regular log entries\n    \"had a great meeting today\",\n    \"weather is lovely\",\n    \"feeling productive this morning\",\n    \"learned something new about React Native\",\n    \"grateful for a good day\",\n    \"enjoyed my morning coffee\",\n    \"finished reading a great book\",\n    \"went for a long walk\",\n    \"cooked a delicious meal\",\n    \"watched an interesting documentary\",\n    \"had a video call with friends\",\n    \"organized my workspace\",\n    \"tried a new recipe today\",\n    \"listened to a great podcast\",\n    \"feeling motivated and energized\",\n    \"completed my daily workout\",\n    \"spent quality time with family\",\n    \"practiced meditation for 20 minutes\",\n    \"wrote in my journal\",\n    \"started learning a new skill\",\n    \"cleaned and organized my room\",\n    \"discovered a new favorite song\",\n    \"made progress on personal project\",\n    \"helped a friend with their work\",\n    \"reflected on my goals\",\n    \"enjoyed the sunset\",\n    \"read an inspiring article\",\n    \"practiced gratitude\",\n    \"had a relaxing evening\",\n    \"played games with friends\",\n    \"explored a new neighborhood\",\n    \"tried a new coffee shop\",\n    \"attended an online webinar\",\n    \"updated my resume\",\n    \"planned next week's schedule\",\n    \"sorted through old photos\",\n    \"donated unused items\",\n    \"fixed a bug in my code\",\n    \"reviewed my budget\",\n    \"called an old friend\",\n    \"planted some herbs\",\n    \"rearranged furniture\",\n    \"learned a new keyboard shortcut\",\n    \"backed up my data\",\n    \"cleaned out my inbox\",\n    \"updated my software\",\n    \"read documentation\",\n    \"wrote unit tests\",\n    \"refactored some code\",\n    \"debugged an issue\",\n    \"improved performance\",\n    \"added new features\",\n    \"reviewed pull requests\",\n    \"attended standup meeting\",\n    \"brainstormed ideas\",\n    \"sketched UI designs\",\n    \"created wireframes\",\n    \"wrote technical specs\",\n    \"researched best practices\",\n    \"optimized database queries\",\n    \"configured CI/CD pipeline\",\n    \"set up monitoring\",\n    \"analyzed metrics\",\n    \"documented API endpoints\",\n    \"reviewed architecture\",\n    \"planned sprint tasks\",\n    \"estimated story points\",\n    \"pair programmed with teammate\",\n    \"conducted code review\",\n    \"deployed to staging\",\n    \"tested new feature\",\n    \"fixed production bug\",\n    \"updated dependencies\",\n    \"wrote blog post\",\n    \"shared knowledge with team\",\n    \"mentored junior developer\",\n    \"attended tech talk\",\n    \"experimented with new library\",\n    \"built proof of concept\",\n    \"improved accessibility\",\n    \"enhanced security\",\n    \"reduced technical debt\",\n    \"improved error handling\",\n    \"added logging\",\n    \"created dashboard\",\n    \"automated workflow\",\n    \"simplified complex logic\",\n    \"improved user experience\",\n    \"gathered user feedback\",\n    \"analyzed usage patterns\",\n    \"identified bottlenecks\",\n    \"proposed solution\",\n    \"implemented caching\",\n    \"optimized bundle size\",\n    \"improved load time\",\n    \"enhanced mobile experience\",\n    \"added dark mode\",\n    \"created design system\",\n    \"standardized components\",\n    \"improved code coverage\",\n    \"fixed flaky tests\",\n    \"upgraded framework version\",\n    \"migrated to new API\",\n    \"cleaned up legacy code\",\n    \"consolidated services\",\n    \"improved modularity\",\n    \"reduced coupling\",\n    \"enhanced maintainability\",\n    \"documented codebase\",\n    \"created runbook\"\n  ];\n\n  const loadEntries = useCallback(async () => {\n    const savedEntries = await StorageService.getEntries();\n    // Sort entries by timestamp to maintain chronological order\n    const sortedEntries = savedEntries.sort((a, b) => {\n      // If timestamps are within 2 seconds of each other, maintain user-system alternation\n      const timeDiff = Math.abs(a.timestamp.getTime() - b.timestamp.getTime());\n      if (timeDiff < 2000) {\n        // If one is a system message and the other isn't, maintain the conversation flow\n        if (a.type === 'system' && b.type !== 'system') return 1;\n        if (a.type !== 'system' && b.type === 'system') return -1;\n      }\n      // Otherwise, sort by timestamp\n      return a.timestamp.getTime() - b.timestamp.getTime();\n    });\n    \n    setEntries(sortedEntries);\n    setFilteredEntries(sortedEntries); // Initialize filtered entries\n  }, []);\n\n  // Create a flattened list with date separators (for inverted FlatList)\n  const createEntriesWithDateSeparators = useCallback((entriesList: Entry[]) => {\n    if (entriesList.length === 0) return [];\n\n    // Sort entries chronologically (oldest first)\n    const sortedEntries = [...entriesList].sort((a, b) => a.timestamp.getTime() - b.timestamp.getTime());\n    \n    const result: (Entry | { type: 'dateSeparator'; date: string; id: string })[] = [];\n    let currentDate = '';\n\n    sortedEntries.forEach((entry) => {\n      const entryDate = format(entry.timestamp, 'yyyy-MM-dd');\n      \n      // Add date separator if this is a new date\n      if (entryDate !== currentDate) {\n        result.push({\n          type: 'dateSeparator',\n          date: entryDate,\n          id: `date-${entryDate}`,\n        });\n        currentDate = entryDate;\n      }\n      \n      result.push(entry);\n    });\n\n    // The FlatList inverted prop will handle showing this in reverse order\n    return result;\n  }, []);\n\n  // Filter entries based on search query\n  useEffect(() => {\n    if (!searchQuery.trim()) {\n      setFilteredEntries(entries);\n      return;\n    }\n\n    const query = searchQuery.toLowerCase().trim();\n    const filtered = entries.filter(entry => {\n      // Search in entry text\n      if (entry.text.toLowerCase().includes(query)) {\n        return true;\n      }\n      \n      // Search in date (various formats)\n      const entryDate = format(entry.timestamp, 'yyyy-MM-dd');\n      const entryDateLong = format(entry.timestamp, 'MMMM dd, yyyy');\n      const entryDateShort = format(entry.timestamp, 'MMM dd');\n      \n      if (entryDate.includes(query) || \n          entryDateLong.toLowerCase().includes(query) || \n          entryDateShort.toLowerCase().includes(query)) {\n        return true;\n      }\n      \n      // Search by entry type\n      if (entry.type.toLowerCase().includes(query)) {\n        return true;\n      }\n      \n      return false;\n    });\n    \n    setFilteredEntries(filtered);\n  }, [searchQuery, entries]);\n\n  const getListStyle = (layout: string) => {\n    switch (layout) {\n      case 'cards':\n        return { paddingHorizontal: 8 };\n      case 'list':\n        return { paddingHorizontal: 0, backgroundColor: '#fff' };\n      case 'timeline':\n        return { paddingHorizontal: 0, backgroundColor: '#f8f9fa' };\n      case 'magazine':\n        return { paddingHorizontal: 0, backgroundColor: '#f5f5f5' };\n      case 'minimal':\n        return { paddingHorizontal: 0, backgroundColor: '#fff' };\n      case 'chat':\n      default:\n        return { paddingHorizontal: 16 };\n    }\n  };\n\n  const loadSettings = useCallback(async () => {\n    try {\n      const savedSettings = await StorageService.getSettings();\n      if (savedSettings) {\n        setIsMarkdown(savedSettings.isMarkdownEnabled);\n        setEnterToSend(savedSettings.enterToSend);\n        setLayoutStyle(savedSettings.layoutStyle || 'chat');\n      }\n    } catch (error) {\n      console.error('Error loading settings:', error);\n    }\n  }, []);\n\n  const loadExpensesAndActions = useCallback(async () => {\n    try {\n      const [savedExpenses, savedActionItems] = await Promise.all([\n        StorageService.getExpenses(),\n        StorageService.getActionItems()\n      ]);\n      setExpenses(savedExpenses);\n      setActionItems(savedActionItems);\n    } catch (error) {\n      console.error('Error loading expenses and action items:', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadEntries();\n    loadSettings();\n    loadExpensesAndActions();\n  }, [loadEntries, loadSettings, loadExpensesAndActions]);\n\n  // Entries will auto-scroll via FlatList onLayout and onContentSizeChange\n  useEffect(() => {\n    // This useEffect is kept for potential future scroll enhancements\n  }, [entries.length]);\n\n  const showToast = (message: string) => {\n    alert(message);\n  };\n\n  // Helper function to convert dot-prefix to checkmark format\n  const convertDotToCheckbox = (text: string): string => {\n    // Convert \". task\" to \" task\" (checkmark)\n    return text.replace(/^\\s*\\.\\s*/, ' ');\n  };\n\n    const handleSendMessage = async () => {\n    const trimmedInput = inputText.trim();\n    if (!trimmedInput) return;\n\n    try {\n      // Convert dot-prefix to checkbox format for display\n      let displayText = trimmedInput;\n      const autoDetectedAction = TextAnalyzer.detectActionItem(trimmedInput);\n      if (autoDetectedAction || forceAction) {\n        displayText = convertDotToCheckbox(trimmedInput);\n      }\n\n      const entry: Entry = {\n        id: uuid.v4(),\n        text: displayText, // Use the converted text with checkbox\n        timestamp: new Date(),\n        type: 'log',\n        isMarkdown,\n      };\n\n      // Save the entry first\n      await StorageService.addEntry(entry);\n      \n      // Check for expense (auto-detect OR user explicitly marked it)\n      const autoDetectedExpense = TextAnalyzer.detectExpense(trimmedInput);\n      if (autoDetectedExpense || forceExpense) {\n        const expenseInfo = TextAnalyzer.extractExpenseInfo(trimmedInput, entry.id);\n        if (expenseInfo) {\n          // Add autoDetected flag\n          expenseInfo.autoDetected = autoDetectedExpense && !forceExpense;\n          await StorageService.addExpense(expenseInfo);\n          await updateEntryType(entry.id, 'expense');\n        } else if (forceExpense) {\n          // User forced expense but no amount found - show alert\n          Alert.alert(\n            \"No Amount Found\",\n            \"Please include a numeric amount in your entry (e.g., 150, Rs200, $50)\"\n          );\n        }\n      }\n\n      // Check for action item (auto-detect OR user explicitly marked it)\n      if (autoDetectedAction || forceAction) {\n        // If forceAction is true but no auto-detection, create action item from text\n        let actionItem;\n        if (forceAction && !autoDetectedAction) {\n          // Manually create action item from the text\n          actionItem = {\n            id: uuid.v4(),\n            entryId: entry.id,\n            title: trimmedInput,\n            completed: false,\n            createdAt: new Date(),\n            autoDetected: false\n          };\n        } else {\n          actionItem = TextAnalyzer.extractActionItem(trimmedInput, entry.id);\n          if (actionItem) {\n            actionItem.autoDetected = autoDetectedAction && !forceAction;\n          }\n        }\n        \n        if (actionItem) {\n          await StorageService.addActionItem(actionItem);\n          await updateEntryType(entry.id, 'action');\n        }\n      }\n\n      // Reload all data to show updated entries with categorization\n      await loadEntries();\n      await loadExpensesAndActions();\n\n      // Add system feedback message in chat view only\n      if (layoutStyle === 'chat') {\n        let systemMessage = '';\n        let wasExpense = false;\n        let wasAction = false;\n        \n        // Check if it was categorized as expense\n        const expense = await StorageService.getExpenses().then(exps => exps.find(e => e.entryId === entry.id));\n        if (expense) {\n          wasExpense = true;\n          const prefix = expense.autoDetected ? 'Auto-categorized' : 'Manually categorized';\n          systemMessage = ` ${prefix} as Expense: ${TextAnalyzer.formatCurrency(expense.amount, expense.currency)}`;\n          if (expense.category) systemMessage += ` (${expense.category})`;\n        }\n        \n        // Check if it was categorized as action (only if not expense)\n        if (!wasExpense) {\n          const actionItem = await StorageService.getActionItems().then(items => items.find(a => a.entryId === entry.id));\n          if (actionItem) {\n            wasAction = true;\n            const prefix = actionItem.autoDetected ? 'Auto-categorized' : 'Manually categorized';\n            systemMessage = ` ${prefix} as Task: ${actionItem.title}`;\n          }\n        }\n        \n        // Default message if not categorized\n        if (!wasExpense && !wasAction) {\n          systemMessage = ' Got it!';\n        }\n\n        if (systemMessage) {\n          const systemEntry: Entry = {\n            id: uuid.v4(),\n            text: systemMessage,\n            timestamp: new Date(Date.now() + 100),\n            type: 'system',\n            isMarkdown: false,\n          };\n          await StorageService.addEntry(systemEntry);\n          await loadEntries();\n        }\n      }\n\n      // Clear input and force flags after successful processing\n      setInputText(\"\");\n      setForceExpense(false);\n      setForceAction(false);\n      \n      // Scroll to bottom (newest message) after sending - increase delay to ensure content is rendered\n      setTimeout(() => {\n        flatListRef.current?.scrollToEnd({ animated: true });\n      }, 300);\n      \n      // Refocus the text input for better UX - use setTimeout to ensure state update completes\n      setTimeout(() => {\n        if (textInputRef.current) {\n          textInputRef.current.focus();\n        }\n      }, 400);\n    } catch (error) {\n      console.error('Error processing message:', error);\n      showToast('Failed to process message');\n    }\n  };\n\n  const addSingleTestEntry = () => {\n    if (testIndex >= testEntries.length) {\n      setTestIndex(0);\n    }\n    setInputText(testEntries[testIndex]);\n    setTestIndex(testIndex + 1);\n  };\n\n  const handleLongPress = (entry: Entry) => {\n    const options: any[] = [\n      {\n        text: \"Edit Entry\",\n        onPress: () => handleEditEntry(entry),\n      },\n    ];\n    \n    // Add type conversion options\n    if (entry.type !== \"expense\") {\n      options.push({\n        text: \"Mark as Expense\",\n        onPress: () => markAsExpense(entry),\n      });\n    }\n    \n    if (entry.type !== \"action\") {\n      options.push({\n        text: \"Mark as Action Item\",\n        onPress: () => markAsActionItem(entry),\n      });\n    }\n    \n    if (entry.type !== \"log\") {\n      options.push({\n        text: \"Remove Category\",\n        onPress: () => removeCategory(entry),\n      });\n    }\n    \n    options.push(\n      {\n        text: \"Delete Entry\",\n        onPress: () => handleDeleteEntry(entry),\n        style: \"destructive\",\n      },\n      {\n        text: \"Cancel\",\n        style: \"cancel\",\n      }\n    );\n    \n    Alert.alert(\"Entry Options\", \"What would you like to do with this entry?\", options);\n  };\n\n  const markAsExpense = async (entry: Entry) => {\n    if (entry.type === \"expense\") return;\n\n    const expenseInfo = TextAnalyzer.extractExpenseInfo(entry.text, entry.id);\n    if (expenseInfo) {\n      expenseInfo.autoDetected = false; // Manually categorized\n      await StorageService.addExpense(expenseInfo);\n      await updateEntryType(entry.id, \"expense\");\n      // Reload expenses to show updated categorization\n      await loadExpensesAndActions();\n    } else {\n      Alert.alert(\n        \"Cannot Extract Expense\",\n        \"Could not find amount information in this entry. Please ensure it contains a monetary value.\"\n      );\n    }\n  };\n\n  const markAsActionItem = async (entry: Entry) => {\n    if (entry.type === \"action\") return;\n\n    // Try to extract using TextAnalyzer, but if that fails, create manually\n    let actionItem = TextAnalyzer.extractActionItem(entry.text, entry.id);\n    \n    if (!actionItem) {\n      // Create action item manually from the text\n      actionItem = {\n        id: uuid.v4(),\n        entryId: entry.id,\n        title: entry.text.replace(/^\\s*/, ''), // Remove checkmark if present\n        completed: false,\n        createdAt: new Date(),\n        autoDetected: false\n      };\n    } else {\n      actionItem.autoDetected = false; // Manually categorized\n    }\n    \n    await StorageService.addActionItem(actionItem);\n    await updateEntryType(entry.id, \"action\");\n    // Reload action items to show updated categorization\n    await loadExpensesAndActions();\n  };\n\n  const removeCategory = async (entry: Entry) => {\n    try {\n      // Remove associated expense or action item\n      if (entry.type === \"expense\") {\n        const expense = expenses.find(e => e.entryId === entry.id);\n        if (expense) {\n          await StorageService.deleteExpense(expense.id);\n        }\n      } else if (entry.type === \"action\") {\n        const actionItem = actionItems.find(a => a.entryId === entry.id);\n        if (actionItem) {\n          await StorageService.deleteActionItem(actionItem.id);\n        }\n      }\n      \n      // Update entry type to log\n      await updateEntryType(entry.id, \"log\");\n      await loadExpensesAndActions();\n      showToast(\"Category removed\");\n    } catch (error) {\n      console.error('Error removing category:', error);\n      showToast('Failed to remove category');\n    }\n  };\n\n  const handleDeleteEntry = async (entry: Entry) => {\n    const confirmDelete = async () => {\n      try {\n        // Delete associated expense or action item first\n        if (entry.type === \"expense\") {\n          const expense = expenses.find(e => e.entryId === entry.id);\n          if (expense) {\n            await StorageService.deleteExpense(expense.id);\n          }\n        } else if (entry.type === \"action\") {\n          const actionItem = actionItems.find(a => a.entryId === entry.id);\n          if (actionItem) {\n            await StorageService.deleteActionItem(actionItem.id);\n          }\n        }\n        \n        // Delete the entry\n        const currentEntries = await StorageService.getEntries();\n        const updatedEntries = currentEntries.filter(e => e.id !== entry.id);\n        await StorageService.saveEntries(updatedEntries);\n        \n        // Reload data\n        await loadEntries();\n        await loadExpensesAndActions();\n      } catch (error) {\n        console.error('Error deleting entry:', error);\n      }\n    };\n    \n    if (Platform.OS === 'web') {\n      if (confirm(\"Are you sure you want to delete this entry?\")) {\n        await confirmDelete();\n      }\n    } else {\n      Alert.alert(\n        \"Delete Entry\",\n        \"Are you sure you want to delete this entry?\",\n        [\n          {\n            text: \"Cancel\",\n            style: \"cancel\",\n          },\n          {\n            text: \"Delete\",\n            style: \"destructive\",\n            onPress: confirmDelete,\n          },\n        ]\n      );\n    }\n  };\n\n  const handleEditEntry = (entry: Entry) => {\n    setEditingEntry(entry);\n    setEditText(entry.text.replace(/^\\s*/, '')); // Remove checkmark if present\n    \n    // Pre-fill expense details if it's an expense\n    if (entry.type === \"expense\") {\n      const expense = expenses.find(e => e.entryId === entry.id);\n      if (expense) {\n        setEditAmount(expense.amount.toString());\n        setEditCategory(expense.category || \"\");\n      }\n    }\n  };\n\n  const handleSaveEdit = async () => {\n    if (!editingEntry || !editText.trim()) return;\n    \n    // Validate amount for expense entries\n    if (editingEntry.type === \"expense\") {\n      if (!editAmount || !editAmount.trim()) {\n        Alert.alert('Amount Required', 'Please enter an amount for the expense');\n        return;\n      }\n      const amount = parseFloat(editAmount);\n      if (isNaN(amount) || amount <= 0) {\n        Alert.alert('Invalid Amount', 'Please enter a valid amount greater than 0');\n        return;\n      }\n    }\n    \n    try {\n      // Update entry text, type, and preserve markdown flag\n      const currentEntries = await StorageService.getEntries();\n      const updatedEntries = currentEntries.map(e => \n        e.id === editingEntry.id ? { ...e, text: editText.trim(), type: editingEntry.type, isMarkdown: editingEntry.isMarkdown } : e\n      );\n      await StorageService.saveEntries(updatedEntries);\n      \n      // Update expense details if it's an expense\n      if (editingEntry.type === \"expense\") {\n        const expense = expenses.find(e => e.entryId === editingEntry.id);\n        if (expense && editAmount) {\n          const amount = parseFloat(editAmount);\n          if (!isNaN(amount) && amount > 0) {\n            await StorageService.updateExpense(expense.id, {\n              amount,\n              category: editCategory || expense.category,\n              description: editText.trim(),\n            });\n          }\n        }\n      }\n      \n      // Update or create action item if it's an action\n      if (editingEntry.type === \"action\") {\n        let actionItem = actionItems.find(a => a.entryId === editingEntry.id);\n        if (actionItem) {\n          // Update existing action item\n          await StorageService.updateActionItem(actionItem.id, {\n            title: editText.trim(),\n          });\n        } else {\n          // Create new action item if it doesn't exist\n          const newActionItem = {\n            id: uuid.v4(),\n            entryId: editingEntry.id,\n            title: editText.trim(),\n            completed: false,\n            createdAt: new Date(),\n            autoDetected: false\n          };\n          await StorageService.addActionItem(newActionItem);\n        }\n      }\n      \n      // Reload data and close modal\n      await loadEntries();\n      await loadExpensesAndActions();\n      setEditingEntry(null);\n      setEditText(\"\");\n      setEditAmount(\"\");\n      setEditCategory(\"\");\n    } catch (error) {\n      console.error('Error updating entry:', error);\n    }\n  };\n\n  const updateEntryType = async (entryId: string, newType: Entry[\"type\"]) => {\n    try {\n      // Get the latest entries from storage instead of using state\n      const currentEntries = await StorageService.getEntries();\n      \n      const updatedEntries = currentEntries.map((entry: Entry) =>\n        entry.id === entryId ? { ...entry, type: newType } : entry\n      );\n      \n      await StorageService.saveEntries(updatedEntries);\n      \n      // Reload entries to refresh the UI\n      await loadEntries();\n    } catch (error) {\n      console.error('Error updating entry type:', error);\n      showToast('Failed to update entry type');\n    }\n  };\n\n  const renderChatEntry = (item: Entry, expense?: Expense, actionItem?: ActionItem) => (\n    <MessageBubble \n      entry={item} \n      onLongPress={handleLongPress}\n      onEdit={handleEditEntry}\n      onDelete={handleDeleteEntry}\n      markdownStyles={markdownStyles}\n      expense={expense}\n      actionItem={actionItem}\n    />\n  );\n\n  const renderCardEntry = (item: Entry, expense?: Expense, actionItem?: ActionItem) => (\n    <View style={layoutStyles.cardContainer}>\n      <View style={layoutStyles.cardHeader}>\n        <Text style={layoutStyles.cardDate}>{format(item.timestamp, 'MMM dd, yyyy')}</Text>\n        <View style={{ flexDirection: 'row', alignItems: 'center', gap: 4 }}>\n          <Text style={layoutStyles.cardTime}>{format(item.timestamp, 'h:mm a')}</Text>\n          {item.type !== 'system' && (\n            <>\n              <TouchableOpacity \n                style={{ padding: 4, backgroundColor: 'rgba(0,0,0,0.05)', borderRadius: 4 }}\n                onPress={() => handleEditEntry(item)}\n              >\n                <Text style={{ fontSize: 12 }}></Text>\n              </TouchableOpacity>\n              <TouchableOpacity \n                style={{ padding: 4, backgroundColor: 'rgba(0,0,0,0.05)', borderRadius: 4 }}\n                onPress={() => handleDeleteEntry(item)}\n              >\n                <Text style={{ fontSize: 12 }}></Text>\n              </TouchableOpacity>\n            </>\n          )}\n        </View>\n      </View>\n      <View style={layoutStyles.cardContent}>\n        {item.isMarkdown ? (\n          <Markdown style={markdownStyles}>{item.text}</Markdown>\n        ) : (\n          <Text style={layoutStyles.cardText}>{item.text}</Text>\n        )}\n        {expense && (\n          <View style={layoutStyles.expenseTag}>\n            <Text style={layoutStyles.expenseText}>\n               {TextAnalyzer.formatCurrency(expense.amount, expense.currency)}\n            </Text>\n          </View>\n        )}\n        {actionItem && (\n          <View style={layoutStyles.actionTag}>\n            <Text style={layoutStyles.actionText}> Task</Text>\n          </View>\n        )}\n      </View>\n    </View>\n  );\n\n  const renderListEntry = (item: Entry, expense?: Expense, actionItem?: ActionItem) => (\n    <View style={layoutStyles.listContainer}>\n      <View style={layoutStyles.listLeft}>\n        <Text style={layoutStyles.listTime}>{format(item.timestamp, 'h:mm a')}</Text>\n        <View style={layoutStyles.listIndicator} />\n      </View>\n      <View style={layoutStyles.listContent}>\n        <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', marginBottom: 4 }}>\n          <View style={{ flex: 1 }} />\n          {item.type !== 'system' && (\n            <View style={{ flexDirection: 'row', gap: 4 }}>\n              <TouchableOpacity \n                style={{ padding: 4, backgroundColor: 'rgba(0,0,0,0.05)', borderRadius: 4 }}\n                onPress={() => handleEditEntry(item)}\n              >\n                <Text style={{ fontSize: 12 }}></Text>\n              </TouchableOpacity>\n              <TouchableOpacity \n                style={{ padding: 4, backgroundColor: 'rgba(0,0,0,0.05)', borderRadius: 4 }}\n                onPress={() => handleDeleteEntry(item)}\n              >\n                <Text style={{ fontSize: 12 }}></Text>\n              </TouchableOpacity>\n            </View>\n          )}\n        </View>\n        {item.isMarkdown ? (\n          <Markdown style={markdownStyles}>{item.text}</Markdown>\n        ) : (\n          <Text style={layoutStyles.listText}>{item.text}</Text>\n        )}\n        <View style={layoutStyles.listMeta}>\n          {expense && (\n            <Text style={layoutStyles.listExpense}>\n               {TextAnalyzer.formatCurrency(expense.amount, expense.currency)}\n            </Text>\n          )}\n          {actionItem && <Text style={layoutStyles.listAction}> Task</Text>}\n        </View>\n      </View>\n    </View>\n  );\n\n  const renderTimelineEntry = (item: Entry, expense?: Expense, actionItem?: ActionItem) => (\n    <View style={layoutStyles.timelineContainer}>\n      <View style={layoutStyles.timelineLeft}>\n        <View style={layoutStyles.timelineDot} />\n        <View style={layoutStyles.timelineLine} />\n      </View>\n      <View style={layoutStyles.timelineContent}>\n        <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', marginBottom: 4 }}>\n          <Text style={layoutStyles.timelineDate}>{format(item.timestamp, 'MMM dd, h:mm a')}</Text>\n          {item.type !== 'system' && (\n            <View style={{ flexDirection: 'row', gap: 4 }}>\n              <TouchableOpacity \n                style={{ padding: 4, backgroundColor: 'rgba(0,0,0,0.05)', borderRadius: 4 }}\n                onPress={() => handleEditEntry(item)}\n              >\n                <Text style={{ fontSize: 12 }}></Text>\n              </TouchableOpacity>\n              <TouchableOpacity \n                style={{ padding: 4, backgroundColor: 'rgba(0,0,0,0.05)', borderRadius: 4 }}\n                onPress={() => handleDeleteEntry(item)}\n              >\n                <Text style={{ fontSize: 12 }}></Text>\n              </TouchableOpacity>\n            </View>\n          )}\n        </View>\n        {item.isMarkdown ? (\n          <Markdown style={markdownStyles}>{item.text}</Markdown>\n        ) : (\n          <Text style={layoutStyles.timelineText}>{item.text}</Text>\n        )}\n        {(expense || actionItem) && (\n          <View style={layoutStyles.timelineTags}>\n            {expense && (\n              <Text style={layoutStyles.timelineExpense}>\n                 {TextAnalyzer.formatCurrency(expense.amount, expense.currency)}\n              </Text>\n            )}\n            {actionItem && <Text style={layoutStyles.timelineAction}> Task</Text>}\n          </View>\n        )}\n      </View>\n    </View>\n  );\n\n  const renderMagazineEntry = (item: Entry, expense?: Expense, actionItem?: ActionItem) => (\n    <View style={layoutStyles.magazineContainer}>\n      <View style={layoutStyles.magazineHeader}>\n        <Text style={layoutStyles.magazineDate}>{format(item.timestamp, 'EEEE, MMMM dd')}</Text>\n        {item.type !== 'system' && (\n          <View style={{ flexDirection: 'row', gap: 4 }}>\n            <TouchableOpacity \n              style={{ padding: 4, backgroundColor: 'rgba(0,0,0,0.05)', borderRadius: 4 }}\n              onPress={() => handleEditEntry(item)}\n            >\n              <Text style={{ fontSize: 12 }}></Text>\n            </TouchableOpacity>\n            <TouchableOpacity \n              style={{ padding: 4, backgroundColor: 'rgba(0,0,0,0.05)', borderRadius: 4 }}\n              onPress={() => handleDeleteEntry(item)}\n            >\n              <Text style={{ fontSize: 12 }}></Text>\n            </TouchableOpacity>\n          </View>\n        )}\n      </View>\n      <View style={layoutStyles.magazineBody}>\n        {item.isMarkdown ? (\n          <Markdown style={markdownStyles}>{item.text}</Markdown>\n        ) : (\n          <Text style={layoutStyles.magazineText}>{item.text}</Text>\n        )}\n      </View>\n      {(expense || actionItem) && (\n        <View style={layoutStyles.magazineFooter}>\n          {expense && (\n            <View style={layoutStyles.magazineExpenseBlock}>\n              <Text style={layoutStyles.magazineExpenseLabel}>Expense</Text>\n              <Text style={layoutStyles.magazineExpenseAmount}>\n                {TextAnalyzer.formatCurrency(expense.amount, expense.currency)}\n              </Text>\n            </View>\n          )}\n          {actionItem && (\n            <View style={layoutStyles.magazineActionBlock}>\n              <Text style={layoutStyles.magazineActionLabel}>Action Item</Text>\n              <Text style={layoutStyles.magazineActionText}>Task</Text>\n            </View>\n          )}\n        </View>\n      )}\n    </View>\n  );\n\n  const renderMinimalEntry = (item: Entry, expense?: Expense, actionItem?: ActionItem) => (\n    <View style={layoutStyles.minimalContainer}>\n      <View style={layoutStyles.minimalContent}>\n        {item.isMarkdown ? (\n          <Markdown style={markdownStyles}>{item.text}</Markdown>\n        ) : (\n          <Text style={layoutStyles.minimalText}>{item.text}</Text>\n        )}\n      </View>\n      <View style={layoutStyles.minimalMeta}>\n        <Text style={layoutStyles.minimalTime}>{format(item.timestamp, 'h:mm a')}</Text>\n        {expense && <Text style={layoutStyles.minimalExpense}>{TextAnalyzer.formatCurrency(expense.amount, expense.currency)}</Text>}\n        {actionItem && <Text style={layoutStyles.minimalAction}></Text>}\n        {item.type !== 'system' && (\n          <>\n            <TouchableOpacity \n              style={{ padding: 2, backgroundColor: 'rgba(0,0,0,0.05)', borderRadius: 4, marginLeft: 4 }}\n              onPress={() => handleEditEntry(item)}\n            >\n              <Text style={{ fontSize: 10 }}></Text>\n            </TouchableOpacity>\n            <TouchableOpacity \n              style={{ padding: 2, backgroundColor: 'rgba(0,0,0,0.05)', borderRadius: 4, marginLeft: 2 }}\n              onPress={() => handleDeleteEntry(item)}\n            >\n              <Text style={{ fontSize: 10 }}></Text>\n            </TouchableOpacity>\n          </>\n        )}\n      </View>\n    </View>\n  );\n\n  // Render date separator component\n  const renderDateSeparator = (dateString: string) => {\n    const date = new Date(dateString);\n    const today = new Date();\n    const yesterday = new Date(today.getTime() - 24 * 60 * 60 * 1000);\n    \n    let displayDate;\n    if (format(date, 'yyyy-MM-dd') === format(today, 'yyyy-MM-dd')) {\n      displayDate = 'Today';\n    } else if (format(date, 'yyyy-MM-dd') === format(yesterday, 'yyyy-MM-dd')) {\n      displayDate = 'Yesterday';\n    } else {\n      displayDate = format(date, 'EEEE, MMMM d, yyyy');\n    }\n\n    return (\n      <View style={styles.dateSeparator}>\n        <View style={styles.dateSeparatorLine} />\n        <Text style={styles.dateSeparatorText}>{displayDate}</Text>\n        <View style={styles.dateSeparatorLine} />\n      </View>\n    );\n  };\n\n  const renderItem = ({ item }: { item: Entry | { type: 'dateSeparator'; date: string; id: string } }) => {\n    // Handle date separator\n    if ('type' in item && item.type === 'dateSeparator') {\n      return renderDateSeparator(item.date);\n    }\n\n    // Handle regular entry\n    const entry = item as Entry;\n    // Find associated expense or action item for this entry\n    const expense = entry.type === 'expense' ? expenses.find(e => e.entryId === entry.id) : undefined;\n    const actionItem = entry.type === 'action' ? actionItems.find(a => a.entryId === entry.id) : undefined;\n    \n    switch (layoutStyle) {\n      case 'cards':\n        return renderCardEntry(entry, expense, actionItem);\n      case 'list':\n        return renderListEntry(entry, expense, actionItem);\n      case 'timeline':\n        return renderTimelineEntry(entry, expense, actionItem);\n      case 'magazine':\n        return renderMagazineEntry(entry, expense, actionItem);\n      case 'minimal':\n        return renderMinimalEntry(entry, expense, actionItem);\n      case 'chat':\n      default:\n        return renderChatEntry(entry, expense, actionItem);\n    }\n  };\n\n  // Get data with date separators\n  const getDataWithSeparators = () => {\n    const baseEntries = showSearch ? filteredEntries : entries;\n    return createEntriesWithDateSeparators(baseEntries);\n  };\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={[styles.header, { zIndex: 10000 }]}>\n        <Text style={styles.headerTitle}>Daily Journal</Text>\n        <View style={{ flexDirection: 'row', alignItems: 'center', zIndex: 10001 }}>\n          <TouchableOpacity\n            style={[styles.settingsButton, { marginRight: 8, zIndex: 10004 }]}\n            onPress={addSingleTestEntry}\n          >\n            <Text style={styles.settingsButtonText}></Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={[styles.settingsButton, { marginRight: 8, zIndex: 10002 }]}\n            onPress={() => {\n              console.log(' Search button pressed');\n              setShowSearch(!showSearch);\n            }}\n          >\n            <Text style={styles.settingsButtonText}></Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={[styles.settingsButton, { zIndex: 10003 }]}\n            onPress={() => {\n              console.log(' Settings button pressed');\n              setShowSettings(true);\n            }}\n          >\n            <Text style={styles.settingsButtonText}></Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      {showSearch && (\n        <View style={styles.searchContainer}>\n          <TextInput\n            style={styles.searchInput}\n            placeholder=\"Search entries by text, date, or type...\"\n            value={searchQuery}\n            onChangeText={setSearchQuery}\n            autoCapitalize=\"none\"\n            clearButtonMode=\"while-editing\"\n          />\n          {searchQuery.length > 0 && (\n            <TouchableOpacity\n              style={styles.clearButton}\n              onPress={() => setSearchQuery(\"\")}\n            >\n              <Text style={styles.clearButtonText}></Text>\n            </TouchableOpacity>\n          )}\n        </View>\n      )}\n\n      <FlatList\n        ref={flatListRef}\n        data={getDataWithSeparators()}\n        renderItem={renderItem}\n        keyExtractor={(item) => {\n          if ('type' in item && item.type === 'dateSeparator') {\n            return item.id;\n          }\n          return (item as Entry).id;\n        }}\n        style={[styles.messagesList, getListStyle(layoutStyle)]}\n        showsVerticalScrollIndicator={false}\n        onLayout={() => {\n          // Scroll to bottom only on initial load\n          if (flatListRef.current && entries.length > 0) {\n            setTimeout(() => {\n              flatListRef.current?.scrollToEnd({ animated: false });\n            }, 100);\n          }\n        }}\n        onContentSizeChange={() => {\n          // Only auto-scroll on initial load, not when new messages are sent\n          // (new messages use manual scrollToEnd in handleSendMessage)\n        }}\n        ListEmptyComponent={() => {\n          const isEmpty = showSearch ? filteredEntries.length === 0 : entries.length === 0;\n          const message = showSearch && searchQuery.trim() \n            ? `No entries found matching \"${searchQuery}\"` \n            : \"No messages yet. Type a message below to get started!\";\n          \n          return (\n            <View style={{ padding: 20, alignItems: 'center' }}>\n              <Text style={{ color: '#666', fontSize: 16 }}>\n                {message}\n              </Text>\n            </View>\n          );\n        }}\n      />\n\n      <KeyboardAvoidingView\n        behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n        style={[styles.inputContainer, { zIndex: 10000 }]}\n      >\n        <View style={styles.quickActionsRow}>\n          <TouchableOpacity\n            style={[\n              styles.quickActionButton,\n              forceExpense && styles.quickActionButtonActive,\n            ]}\n            onPress={() => setForceExpense(!forceExpense)}\n          >\n            <Text style={[styles.quickActionText, forceExpense && styles.quickActionTextActive]}></Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[\n              styles.quickActionButton,\n              forceAction && styles.quickActionButtonActive,\n            ]}\n            onPress={() => setForceAction(!forceAction)}\n          >\n            <Text style={[styles.quickActionText, forceAction && styles.quickActionTextActive]}></Text>\n          </TouchableOpacity>\n        </View>\n        <View style={styles.inputRow}>\n          <TextInput\n            ref={textInputRef}\n            style={styles.textInput}\n            value={inputText}\n            onChangeText={setInputText}\n            placeholder={\n              forceExpense\n                ? \"Type expense (e.g., 150 for coffee)...\"\n                : forceAction\n                ? \"Type task description...\"\n                : isMarkdown\n                ? \"Type a message (Markdown supported)...\"\n                : \"Type a message...\"\n            }\n            multiline\n            maxLength={1000}\n            onSubmitEditing={enterToSend ? handleSendMessage : undefined}\n            blurOnSubmit={enterToSend}\n            returnKeyType={enterToSend ? \"send\" : \"default\"}\n          />\n          <TouchableOpacity\n            style={[\n              styles.sendButton,\n              !inputText.trim() && styles.sendButtonDisabled,\n            ]}\n            onPress={handleSendMessage}\n            disabled={!inputText.trim()}\n          >\n            <Text style={{ color: '#fff', fontSize: 16 }}></Text>\n          </TouchableOpacity>\n        </View>\n      </KeyboardAvoidingView>\n      \n      {showSettings && (\n        <Modal\n          visible={showSettings}\n          animationType=\"slide\"\n          presentationStyle=\"formSheet\"\n        >\n          <SettingsScreen \n            onClose={() => {\n              setShowSettings(false);\n              // Reload settings after closing\n              loadSettings();\n            }} \n          />\n        </Modal>\n      )}\n      \n      {editingEntry && (\n        <Modal\n          visible={!!editingEntry}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setEditingEntry(null)}\n        >\n          <View style={styles.editModalOverlay}>\n            <View style={styles.editModalContent}>\n              <Text style={styles.editModalTitle}>Edit Entry</Text>\n              \n              <Text style={styles.editLabel}>Text:</Text>\n              <View style={{ flexDirection: 'row', alignItems: 'center', marginBottom: 8 }}>\n                <TouchableOpacity\n                  style={[\n                    styles.markdownToggle,\n                    editingEntry.isMarkdown && styles.markdownToggleActive\n                  ]}\n                  onPress={() => setEditingEntry({ ...editingEntry, isMarkdown: !editingEntry.isMarkdown })}\n                >\n                  <Text style={styles.markdownToggleText}>\n                    {editingEntry.isMarkdown ? ' Markdown' : ' Plain Text'}\n                  </Text>\n                </TouchableOpacity>\n              </View>\n              <TextInput\n                style={styles.editTextInput}\n                value={editText}\n                onChangeText={setEditText}\n                placeholder=\"Entry text\"\n                multiline\n                maxLength={1000}\n              />\n              \n              <Text style={styles.editLabel}>Category:</Text>\n              <View style={styles.categoryButtons}>\n                <TouchableOpacity\n                  style={[\n                    styles.categoryButton,\n                    editingEntry.type === 'log' && styles.categoryButtonActive\n                  ]}\n                  onPress={async () => {\n                    if (editingEntry.type !== 'log') {\n                      await removeCategory(editingEntry);\n                      setEditingEntry({ ...editingEntry, type: 'log' });\n                    }\n                  }}\n                >\n                  <Text style={styles.categoryButtonText}> Log</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={[\n                    styles.categoryButton,\n                    editingEntry.type === 'expense' && styles.categoryButtonActive\n                  ]}\n                  onPress={async () => {\n                    if (editingEntry.type !== 'expense') {\n                      // Remove existing categorization\n                      if (editingEntry.type === 'action') {\n                        await removeCategory(editingEntry);\n                      }\n                      // Try to extract amount from text first\n                      const expenseInfo = TextAnalyzer.extractExpenseInfo(editText, editingEntry.id);\n                      if (expenseInfo) {\n                        setEditAmount(expenseInfo.amount.toString());\n                        setEditCategory(expenseInfo.category || \"\");\n                      } else {\n                        // No amount found in text, leave empty for manual entry\n                        setEditAmount(\"\");\n                        setEditCategory(\"\");\n                      }\n                      setEditingEntry({ ...editingEntry, type: 'expense' });\n                    }\n                  }}\n                >\n                  <Text style={styles.categoryButtonText}> Expense</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={[\n                    styles.categoryButton,\n                    editingEntry.type === 'action' && styles.categoryButtonActive\n                  ]}\n                  onPress={async () => {\n                    if (editingEntry.type !== 'action') {\n                      // Remove existing categorization\n                      if (editingEntry.type === 'expense') {\n                        await removeCategory(editingEntry);\n                        setEditAmount(\"\");\n                        setEditCategory(\"\");\n                      }\n                      setEditingEntry({ ...editingEntry, type: 'action' });\n                    }\n                  }}\n                >\n                  <Text style={styles.categoryButtonText}> Task</Text>\n                </TouchableOpacity>\n              </View>\n              \n              {editingEntry.type === \"expense\" && (\n                <>\n                  <Text style={styles.editLabel}>Amount:</Text>\n                  <TextInput\n                    style={styles.editInput}\n                    value={editAmount}\n                    onChangeText={setEditAmount}\n                    placeholder=\"Enter amount\"\n                    keyboardType=\"decimal-pad\"\n                  />\n                  \n                  <Text style={styles.editLabel}>Category (optional):</Text>\n                  <TextInput\n                    style={styles.editInput}\n                    value={editCategory}\n                    onChangeText={setEditCategory}\n                    placeholder=\"Food, Transportation, etc.\"\n                  />\n                </>\n              )}\n              \n              <View style={styles.editModalButtons}>\n                <TouchableOpacity\n                  style={[styles.editModalButton, styles.editModalButtonCancel]}\n                  onPress={() => {\n                    setEditingEntry(null);\n                    setEditText(\"\");\n                    setEditAmount(\"\");\n                    setEditCategory(\"\");\n                  }}\n                >\n                  <Text style={styles.editModalButtonText}>Cancel</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={[styles.editModalButton, styles.editModalButtonSave]}\n                  onPress={handleSaveEdit}\n                >\n                  <Text style={[styles.editModalButtonText, { color: '#fff' }]}>Save</Text>\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </Modal>\n      )}\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#f5f5f5\",\n  },\n  header: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    backgroundColor: \"#fff\",\n    borderBottomWidth: 1,\n    borderBottomColor: \"#e0e0e0\",\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n    color: \"#333\",\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  searchInput: {\n    flex: 1,\n    height: 36,\n    paddingHorizontal: 12,\n    backgroundColor: '#f8f8f8',\n    borderRadius: 18,\n    fontSize: 16,\n    color: '#333',\n  },\n  clearButton: {\n    marginLeft: 8,\n    width: 24,\n    height: 24,\n    borderRadius: 12,\n    backgroundColor: '#ccc',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  clearButtonText: {\n    fontSize: 12,\n    color: '#666',\n    fontWeight: 'bold',\n  },\n  settingsButton: {\n    paddingHorizontal: 8,\n    paddingVertical: 6,\n    borderRadius: 16,\n    backgroundColor: \"#f0f0f0\",\n    marginLeft: 8,\n  },\n  settingsButtonText: {\n    fontSize: 16,\n  },\n  messagesList: {\n    flex: 1,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n  },\n  inputContainer: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    paddingBottom: Platform.OS === \"ios\" ? 6 : 4,\n    backgroundColor: \"#fff\",\n    borderTopWidth: 1,\n    borderTopColor: \"#e0e0e0\",\n  },\n  quickActionsRow: {\n    flexDirection: \"row\",\n    marginBottom: 4,\n    gap: 4,\n  },\n  quickActionButton: {\n    paddingHorizontal: 10,\n    paddingVertical: 4,\n    borderRadius: 16,\n    backgroundColor: \"#f0f0f0\",\n    borderWidth: 2,\n    borderColor: \"#e0e0e0\",\n  },\n  quickActionButtonActive: {\n    backgroundColor: \"#007AFF\",\n    borderColor: \"#0056b3\",\n  },\n  quickActionText: {\n    fontSize: 18,\n  },\n  quickActionTextActive: {\n    transform: [{ scale: 1.1 }],\n  },\n  inputRow: {\n    flexDirection: \"row\",\n    alignItems: \"flex-end\",\n  },\n  textInput: {\n    flex: 1,\n    borderWidth: 1,\n    borderColor: \"#e0e0e0\",\n    borderRadius: 20,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    marginRight: 12,\n    maxHeight: 100,\n    fontSize: 16,\n    backgroundColor: \"#f8f8f8\",\n  },\n  sendButton: {\n    backgroundColor: \"#007AFF\",\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  sendButtonDisabled: {\n    backgroundColor: \"#ccc\",\n  },\n  editModalOverlay: {\n    flex: 1,\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 20,\n  },\n  editModalContent: {\n    backgroundColor: \"#fff\",\n    borderRadius: 12,\n    padding: 20,\n    width: \"100%\",\n    maxWidth: 500,\n  },\n  editModalTitle: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n    marginBottom: 16,\n    color: \"#333\",\n  },\n  editLabel: {\n    fontSize: 14,\n    fontWeight: \"600\",\n    color: \"#666\",\n    marginTop: 12,\n    marginBottom: 6,\n  },\n  editInput: {\n    borderWidth: 1,\n    borderColor: \"#ddd\",\n    borderRadius: 8,\n    padding: 12,\n    fontSize: 16,\n    backgroundColor: \"#f9f9f9\",\n  },\n  editTextInput: {\n    borderWidth: 1,\n    borderColor: \"#ddd\",\n    borderRadius: 8,\n    padding: 12,\n    fontSize: 16,\n    backgroundColor: \"#f9f9f9\",\n    minHeight: 80,\n    maxHeight: 200,\n    textAlignVertical: \"top\",\n  },\n  editModalButtons: {\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    marginTop: 20,\n    gap: 12,\n  },\n  editModalButton: {\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    borderRadius: 8,\n    minWidth: 80,\n    alignItems: \"center\",\n  },\n  editModalButtonCancel: {\n    backgroundColor: \"#f0f0f0\",\n  },\n  editModalButtonSave: {\n    backgroundColor: \"#007AFF\",\n  },\n  editModalButtonText: {\n    fontSize: 16,\n    fontWeight: \"600\",\n    color: \"#333\",\n  },\n  categoryButtons: {\n    flexDirection: \"row\",\n    gap: 8,\n    marginBottom: 12,\n  },\n  categoryButton: {\n    flex: 1,\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    borderRadius: 8,\n    backgroundColor: \"#f0f0f0\",\n    borderWidth: 2,\n    borderColor: \"#e0e0e0\",\n    alignItems: \"center\",\n  },\n  categoryButtonActive: {\n    backgroundColor: \"#007AFF\",\n    borderColor: \"#0056b3\",\n  },\n  categoryButtonText: {\n    fontSize: 14,\n    fontWeight: \"600\",\n    color: \"#333\",\n  },\n  markdownToggle: {\n    paddingVertical: 6,\n    paddingHorizontal: 12,\n    borderRadius: 6,\n    backgroundColor: \"#f0f0f0\",\n    borderWidth: 1,\n    borderColor: \"#e0e0e0\",\n  },\n  markdownToggleActive: {\n    backgroundColor: \"#e8f5e8\",\n    borderColor: \"#4caf50\",\n  },\n  markdownToggleText: {\n    fontSize: 12,\n    fontWeight: \"600\",\n    color: \"#333\",\n  },\n  dateSeparator: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginVertical: 16,\n    paddingHorizontal: 8,\n  },\n  dateSeparatorLine: {\n    flex: 1,\n    height: 1,\n    backgroundColor: '#e0e0e0',\n  },\n  dateSeparatorText: {\n    marginHorizontal: 12,\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#666',\n    backgroundColor: '#f5f5f5',\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n});\n\nconst layoutStyles = StyleSheet.create({\n  // Card Layout Styles\n  cardContainer: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    marginVertical: 6,\n    marginHorizontal: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    overflow: 'hidden',\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    backgroundColor: '#f8f9fa',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e9ecef',\n  },\n  cardDate: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#495057',\n  },\n  cardTime: {\n    fontSize: 12,\n    color: '#6c757d',\n  },\n  cardContent: {\n    padding: 16,\n  },\n  cardText: {\n    fontSize: 16,\n    lineHeight: 22,\n    color: '#212529',\n    marginBottom: 8,\n  },\n  expenseTag: {\n    backgroundColor: '#d4edda',\n    borderRadius: 12,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    alignSelf: 'flex-start',\n    marginTop: 8,\n  },\n  expenseText: {\n    fontSize: 12,\n    color: '#155724',\n    fontWeight: '500',\n  },\n  actionTag: {\n    backgroundColor: '#cce5ff',\n    borderRadius: 12,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    alignSelf: 'flex-start',\n    marginTop: 8,\n  },\n  actionText: {\n    fontSize: 12,\n    color: '#004085',\n    fontWeight: '500',\n  },\n  \n  // List Layout Styles\n  listContainer: {\n    flexDirection: 'row',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e9ecef',\n  },\n  listLeft: {\n    alignItems: 'center',\n    marginRight: 16,\n    width: 60,\n  },\n  listTime: {\n    fontSize: 12,\n    color: '#6c757d',\n    fontWeight: '500',\n    marginBottom: 4,\n  },\n  listIndicator: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#007bff',\n  },\n  listContent: {\n    flex: 1,\n  },\n  listText: {\n    fontSize: 16,\n    lineHeight: 22,\n    color: '#212529',\n    marginBottom: 6,\n  },\n  listMeta: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  listExpense: {\n    fontSize: 12,\n    color: '#28a745',\n    fontWeight: '500',\n  },\n  listAction: {\n    fontSize: 12,\n    color: '#007bff',\n    fontWeight: '500',\n  },\n  \n  // Timeline Layout Styles\n  timelineContainer: {\n    flexDirection: 'row',\n    paddingVertical: 16,\n    paddingHorizontal: 16,\n  },\n  timelineLeft: {\n    alignItems: 'center',\n    marginRight: 16,\n    width: 20,\n  },\n  timelineDot: {\n    width: 12,\n    height: 12,\n    borderRadius: 6,\n    backgroundColor: '#007bff',\n    zIndex: 1,\n  },\n  timelineLine: {\n    width: 2,\n    flex: 1,\n    backgroundColor: '#dee2e6',\n    marginTop: 4,\n  },\n  timelineContent: {\n    flex: 1,\n    backgroundColor: '#fff',\n    borderRadius: 8,\n    padding: 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.05,\n    shadowRadius: 2,\n    elevation: 1,\n  },\n  timelineDate: {\n    fontSize: 12,\n    color: '#6c757d',\n    fontWeight: '500',\n    marginBottom: 8,\n  },\n  timelineText: {\n    fontSize: 16,\n    lineHeight: 22,\n    color: '#212529',\n  },\n  timelineTags: {\n    flexDirection: 'row',\n    marginTop: 12,\n    gap: 8,\n  },\n  timelineExpense: {\n    fontSize: 12,\n    color: '#28a745',\n    backgroundColor: '#d4edda',\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 8,\n  },\n  timelineAction: {\n    fontSize: 12,\n    color: '#007bff',\n    backgroundColor: '#cce5ff',\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 8,\n  },\n  \n  // Magazine Layout Styles\n  magazineContainer: {\n    backgroundColor: '#fff',\n    marginVertical: 8,\n    marginHorizontal: 16,\n    borderRadius: 8,\n    overflow: 'hidden',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  magazineHeader: {\n    backgroundColor: '#343a40',\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n  },\n  magazineDate: {\n    fontSize: 14,\n    color: '#fff',\n    fontWeight: '600',\n    textTransform: 'uppercase',\n    letterSpacing: 0.5,\n  },\n  magazineBody: {\n    paddingHorizontal: 20,\n    paddingVertical: 16,\n  },\n  magazineText: {\n    fontSize: 17,\n    lineHeight: 26,\n    color: '#212529',\n    fontFamily: Platform.OS === 'ios' ? 'Georgia' : 'serif',\n  },\n  magazineFooter: {\n    flexDirection: 'row',\n    paddingHorizontal: 20,\n    paddingBottom: 16,\n    gap: 16,\n  },\n  magazineExpenseBlock: {\n    flex: 1,\n  },\n  magazineExpenseLabel: {\n    fontSize: 10,\n    color: '#6c757d',\n    fontWeight: '600',\n    textTransform: 'uppercase',\n    marginBottom: 2,\n  },\n  magazineExpenseAmount: {\n    fontSize: 16,\n    color: '#28a745',\n    fontWeight: '600',\n  },\n  magazineActionBlock: {\n    flex: 1,\n  },\n  magazineActionLabel: {\n    fontSize: 10,\n    color: '#6c757d',\n    fontWeight: '600',\n    textTransform: 'uppercase',\n    marginBottom: 2,\n  },\n  magazineActionText: {\n    fontSize: 16,\n    color: '#007bff',\n    fontWeight: '600',\n  },\n  \n  // Minimal Layout Styles\n  minimalContainer: {\n    flexDirection: 'row',\n    paddingVertical: 0, // Eliminated all vertical padding for maximum density\n    paddingHorizontal: 20,\n    alignItems: 'flex-start',\n  },\n  minimalContent: {\n    flex: 1,\n    marginRight: 16,\n  },\n  minimalText: {\n    fontSize: 16,\n    lineHeight: 22,\n    color: '#212529',\n  },\n  minimalMeta: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  minimalTime: {\n    fontSize: 12,\n    color: '#9ca3af',\n  },\n  minimalExpense: {\n    fontSize: 12,\n    color: '#28a745',\n  },\n  minimalAction: {\n    fontSize: 12,\n    color: '#007bff',\n  },\n});\n\nconst markdownStyles = StyleSheet.create({\n  body: {\n    fontSize: 16,\n    color: \"#333\",\n    lineHeight: 20,\n  },\n  heading1: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n    marginBottom: 8,\n  },\n  heading2: {\n    fontSize: 18,\n    fontWeight: \"bold\",\n    marginBottom: 6,\n  },\n  strong: {\n    fontWeight: \"bold\",\n  },\n  em: {\n    fontStyle: \"italic\",\n  },\n  code_inline: {\n    backgroundColor: \"#f0f0f0\",\n    paddingHorizontal: 4,\n    paddingVertical: 2,\n    borderRadius: 3,\n    fontFamily: \"monospace\",\n  },\n});\n","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  FlatList,\n  TouchableOpacity,\n  StyleSheet,\n  Alert,\n  Modal,\n  TextInput,\n} from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { format } from 'date-fns';\nimport Markdown from 'react-native-markdown-display';\n\nimport { ActionItem } from '../types';\nimport { StorageService } from '../utils/storage';\n\ninterface ActionItemCardProps {\n  item: ActionItem;\n  onToggleComplete: (id: string) => void;\n  onEdit: (item: ActionItem) => void;\n  onDelete: (id: string) => void;\n}\n\nconst ActionItemCard: React.FC<ActionItemCardProps> = ({\n  item,\n  onToggleComplete,\n  onEdit,\n  onDelete,\n}) => {\n  return (\n    <View style={[styles.itemCard, item.completed && styles.completedCard]}>\n      <TouchableOpacity\n        style={styles.itemHeader}\n        onPress={() => onToggleComplete(item.id)}\n        activeOpacity={0.7}\n      >\n        <Ionicons\n          name={item.completed ? \"checkbox\" : \"checkbox-outline\"}\n          size={24}\n          color={item.completed ? \"#4caf50\" : \"#666\"}\n        />\n        <View style={{ flex: 1, marginLeft: 8 }}>\n          <Markdown style={{\n            body: {\n              fontSize: 16,\n              color: item.completed ? '#999' : '#333',\n              textDecorationLine: item.completed ? 'line-through' : 'none',\n            }\n          }}>\n            {item.title}\n          </Markdown>\n        </View>\n      </TouchableOpacity>\n\n      {item.description && item.description !== item.title && (\n        <Text style={[styles.itemDescription, item.completed && styles.completedText]}>\n          {item.description}\n        </Text>\n      )}\n\n      <View style={styles.itemFooter}>\n        <Text style={styles.itemDate}>\n          Created: {format(item.createdAt, 'MMM d, yyyy HH:mm')}\n        </Text>\n        <View style={styles.itemActions}>\n          <TouchableOpacity\n            style={styles.actionButton}\n            onPress={() => onEdit(item)}\n            activeOpacity={0.7}\n            hitSlop={{ top: 15, bottom: 15, left: 15, right: 15 }}\n          >\n            <Ionicons name=\"pencil\" size={18} color=\"#666\" />\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[styles.actionButton, styles.deleteButton]}\n            onPress={() => onDelete(item.id)}\n            activeOpacity={0.7}\n            hitSlop={{ top: 15, bottom: 15, left: 15, right: 15 }}\n          >\n            <Ionicons name=\"trash\" size={18} color=\"#fff\" />\n          </TouchableOpacity>\n        </View>\n      </View>\n    </View>\n  );\n};\n\ninterface EditModalProps {\n  visible: boolean;\n  item: ActionItem | null;\n  onSave: (item: ActionItem) => void;\n  onCancel: () => void;\n}\n\nconst EditModal: React.FC<EditModalProps> = ({ visible, item, onSave, onCancel }) => {\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n\n  useEffect(() => {\n    if (item) {\n      setTitle(item.title);\n      setDescription(item.description || '');\n    }\n  }, [item]);\n\n  const handleSave = () => {\n    if (!item || !title.trim()) return;\n\n    const updatedItem: ActionItem = {\n      ...item,\n      title: title.trim(),\n      description: description.trim(),\n    };\n\n    onSave(updatedItem);\n  };\n\n  return (\n    <Modal visible={visible} animationType=\"slide\" transparent>\n      <View style={styles.modalContainer}>\n        <View style={styles.modalContent}>\n          <Text style={styles.modalTitle}>Edit Action Item</Text>\n\n          <TextInput\n            style={styles.modalInput}\n            value={title}\n            onChangeText={setTitle}\n            placeholder=\"Title\"\n            multiline\n          />\n\n          <TextInput\n            style={[styles.modalInput, styles.modalInputLarge]}\n            value={description}\n            onChangeText={setDescription}\n            placeholder=\"Description (optional)\"\n            multiline\n          />\n\n          <View style={styles.modalButtons}>\n            <TouchableOpacity style={styles.modalButton} onPress={onCancel}>\n              <Text style={styles.modalButtonText}>Cancel</Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={[styles.modalButton, styles.modalButtonPrimary]}\n              onPress={handleSave}\n            >\n              <Text style={[styles.modalButtonText, styles.modalButtonTextPrimary]}>\n                Save\n              </Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nexport const ActionItemsScreen: React.FC = () => {\n  const [actionItems, setActionItems] = useState<ActionItem[]>([]);\n  const [filter, setFilter] = useState<'all' | 'pending' | 'completed'>('all');\n  const [editingItem, setEditingItem] = useState<ActionItem | null>(null);\n  const [modalVisible, setModalVisible] = useState(false);\n\n  const loadActionItems = useCallback(async () => {\n    const items = await StorageService.getActionItems();\n    setActionItems(items.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime()));\n  }, []);\n\n  // Load action items on initial mount\n  useEffect(() => {\n    loadActionItems();\n  }, [loadActionItems]);\n\n  // Refresh action items when the screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      loadActionItems();\n    }, [loadActionItems])\n  );\n\n  const filteredItems = actionItems.filter(item => {\n    switch (filter) {\n      case 'pending':\n        return !item.completed;\n      case 'completed':\n        return item.completed;\n      default:\n        return true;\n    }\n  });\n\n  const handleToggleComplete = async (id: string) => {\n    const item = actionItems.find(item => item.id === id);\n    if (!item) return;\n\n    const updatedItem = { ...item, completed: !item.completed };\n    await StorageService.updateActionItem(id, { completed: !item.completed });\n    \n    setActionItems(prev =>\n      prev.map(item => (item.id === id ? updatedItem : item))\n    );\n  };\n\n  const handleEdit = (item: ActionItem) => {\n    setEditingItem(item);\n    setModalVisible(true);\n  };\n\n  const handleSaveEdit = async (updatedItem: ActionItem) => {\n    await StorageService.updateActionItem(updatedItem.id, {\n      title: updatedItem.title,\n      description: updatedItem.description,\n    });\n\n    setActionItems(prev =>\n      prev.map(item => (item.id === updatedItem.id ? updatedItem : item))\n    );\n\n    setModalVisible(false);\n    setEditingItem(null);\n  };\n\n  const handleDelete = async (id: string) => {\n    // Use window.confirm for web compatibility instead of Alert.alert\n    const confirmed = typeof window !== 'undefined' \n      ? window.confirm('Are you sure you want to delete this action item?')\n      : true; // On mobile, proceed directly\n    \n    if (confirmed) {\n      try {\n        await StorageService.deleteActionItem(id);\n        setActionItems(prev => prev.filter(item => item.id !== id));\n      } catch (error) {\n        console.error('Error deleting action item:', error);\n      }\n    }\n  };\n\n  const renderActionItem = ({ item }: { item: ActionItem }) => (\n    <ActionItemCard\n      item={item}\n      onToggleComplete={handleToggleComplete}\n      onEdit={handleEdit}\n      onDelete={handleDelete}\n    />\n  );\n\n  const getFilterButtonStyle = (filterType: typeof filter) => [\n    styles.filterButton,\n    filter === filterType && styles.filterButtonActive,\n  ];\n\n  const getFilterTextStyle = (filterType: typeof filter) => [\n    styles.filterButtonText,\n    filter === filterType && styles.filterButtonTextActive,\n  ];\n\n  const pendingCount = actionItems.filter(item => !item.completed).length;\n  const completedCount = actionItems.filter(item => item.completed).length;\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Action Items</Text>\n        <View style={styles.stats}>\n          <Text style={styles.statsText}>\n            {pendingCount} pending  {completedCount} completed\n          </Text>\n        </View>\n      </View>\n\n      <View style={styles.filterContainer}>\n        <TouchableOpacity\n          style={getFilterButtonStyle('all')}\n          onPress={() => setFilter('all')}\n        >\n          <Text style={getFilterTextStyle('all')}>All</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={getFilterButtonStyle('pending')}\n          onPress={() => setFilter('pending')}\n        >\n          <Text style={getFilterTextStyle('pending')}>Pending</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={getFilterButtonStyle('completed')}\n          onPress={() => setFilter('completed')}\n        >\n          <Text style={getFilterTextStyle('completed')}>Completed</Text>\n        </TouchableOpacity>\n      </View>\n\n      {filteredItems.length === 0 ? (\n        <View style={styles.emptyContainer}>\n          <Ionicons name=\"checkbox-outline\" size={64} color=\"#ccc\" />\n          <Text style={styles.emptyText}>\n            {filter === 'all'\n              ? 'No action items yet'\n              : filter === 'pending'\n              ? 'No pending action items'\n              : 'No completed action items'}\n          </Text>\n          <Text style={styles.emptySubtext}>\n            Add entries in your journal to create action items\n          </Text>\n        </View>\n      ) : (\n        <FlatList\n          data={filteredItems}\n          renderItem={renderActionItem}\n          keyExtractor={(item) => item.id}\n          style={styles.list}\n          showsVerticalScrollIndicator={false}\n        />\n      )}\n\n      <EditModal\n        visible={modalVisible}\n        item={editingItem}\n        onSave={handleSaveEdit}\n        onCancel={() => {\n          setModalVisible(false);\n          setEditingItem(null);\n        }}\n      />\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n  },\n  header: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 4,\n  },\n  stats: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  statsText: {\n    fontSize: 14,\n    color: '#666',\n  },\n  filterContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  filterButton: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    marginRight: 8,\n    borderRadius: 20,\n    backgroundColor: '#f0f0f0',\n  },\n  filterButtonActive: {\n    backgroundColor: '#007AFF',\n  },\n  filterButtonText: {\n    fontSize: 14,\n    color: '#666',\n    fontWeight: '500',\n  },\n  filterButtonTextActive: {\n    color: '#fff',\n  },\n  list: {\n    flex: 1,\n    paddingHorizontal: 16,\n  },\n  itemCard: {\n    backgroundColor: '#fff',\n    marginVertical: 6,\n    padding: 16,\n    borderRadius: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  completedCard: {\n    backgroundColor: '#f8f8f8',\n    opacity: 0.8,\n  },\n  itemHeader: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  itemTitle: {\n    flex: 1,\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#333',\n    marginLeft: 12,\n    lineHeight: 20,\n  },\n  completedText: {\n    textDecorationLine: 'line-through',\n    color: '#666',\n  },\n  itemDescription: {\n    fontSize: 14,\n    color: '#666',\n    lineHeight: 18,\n    marginBottom: 12,\n    marginLeft: 36,\n  },\n  itemFooter: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginTop: 8,\n  },\n  itemDate: {\n    fontSize: 12,\n    color: '#999',\n  },\n  itemActions: {\n    flexDirection: 'row',\n  },\n  actionButton: {\n    padding: 10,\n    marginLeft: 8,\n    minWidth: 36,\n    minHeight: 36,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 6,\n    backgroundColor: 'rgba(0,0,0,0.05)',\n    borderWidth: 1,\n    borderColor: 'rgba(0,0,0,0.1)',\n  },\n  deleteButton: {\n    backgroundColor: '#f44336',\n    borderColor: '#d32f2f',\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 40,\n  },\n  emptyText: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#666',\n    marginTop: 16,\n    textAlign: 'center',\n  },\n  emptySubtext: {\n    fontSize: 14,\n    color: '#999',\n    marginTop: 8,\n    textAlign: 'center',\n    lineHeight: 20,\n  },\n  modalContainer: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 20,\n    width: '90%',\n    maxWidth: 400,\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 16,\n    textAlign: 'center',\n  },\n  modalInput: {\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n    borderRadius: 8,\n    padding: 12,\n    marginBottom: 12,\n    fontSize: 16,\n    minHeight: 44,\n  },\n  modalInputLarge: {\n    minHeight: 80,\n    textAlignVertical: 'top',\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 16,\n  },\n  modalButton: {\n    flex: 1,\n    paddingVertical: 12,\n    borderRadius: 8,\n    marginHorizontal: 4,\n    backgroundColor: '#f0f0f0',\n  },\n  modalButtonPrimary: {\n    backgroundColor: '#007AFF',\n  },\n  modalButtonText: {\n    textAlign: 'center',\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#333',\n  },\n  modalButtonTextPrimary: {\n    color: '#fff',\n  },\n});\n","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  FlatList,\n  TouchableOpacity,\n  StyleSheet,\n  Alert,\n  Modal,\n  TextInput,\n  ScrollView,\n} from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { format, startOfMonth, endOfMonth, isWithinInterval } from 'date-fns';\n\nimport { Expense } from '../types';\nimport { StorageService } from '../utils/storage';\nimport { TextAnalyzer } from '../utils/textAnalysis';\n\ninterface ExpenseCardProps {\n  expense: Expense;\n  onEdit: (expense: Expense) => void;\n  onDelete: (id: string) => void;\n}\n\nconst ExpenseCard: React.FC<ExpenseCardProps> = ({ expense, onEdit, onDelete }) => {\n  return (\n    <View style={styles.expenseCard}>\n      <View style={styles.expenseHeader}>\n        <View style={styles.expenseAmount}>\n          <Text style={styles.amountText}>\n            {TextAnalyzer.formatCurrency(expense.amount, expense.currency)}\n          </Text>\n          {expense.category && (\n            <Text style={styles.categoryText}>{expense.category}</Text>\n          )}\n        </View>\n        <View style={styles.expenseActions}>\n          <TouchableOpacity\n            style={styles.actionButton}\n            onPress={() => onEdit(expense)}\n            activeOpacity={0.7}\n            hitSlop={{ top: 15, bottom: 15, left: 15, right: 15 }}\n          >\n            <Ionicons name=\"pencil\" size={18} color=\"#666\" />\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[styles.actionButton, styles.deleteButton]}\n            onPress={() => onDelete(expense.id)}\n            activeOpacity={0.7}\n            hitSlop={{ top: 15, bottom: 15, left: 15, right: 15 }}\n          >\n            <Ionicons name=\"trash\" size={18} color=\"#fff\" />\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      <Text style={styles.expenseDescription} numberOfLines={2}>\n        {expense.description}\n      </Text>\n\n      <Text style={styles.expenseDate}>\n        {format(expense.createdAt, 'MMM d, yyyy HH:mm')}\n      </Text>\n    </View>\n  );\n};\n\ninterface EditExpenseModalProps {\n  visible: boolean;\n  expense: Expense | null;\n  onSave: (expense: Expense) => void;\n  onCancel: () => void;\n}\n\nconst EditExpenseModal: React.FC<EditExpenseModalProps> = ({\n  visible,\n  expense,\n  onSave,\n  onCancel,\n}) => {\n  const [amount, setAmount] = useState('');\n  const [currency, setCurrency] = useState('USD');\n  const [description, setDescription] = useState('');\n  const [category, setCategory] = useState('');\n\n  const currencies = ['USD', 'INR', 'EUR', 'GBP'];\n  const categories = [\n    'Food', 'Transportation', 'Shopping', 'Entertainment', 'Bills',\n    'Healthcare', 'Education', 'Travel', 'Other'\n  ];\n\n  useEffect(() => {\n    if (expense) {\n      setAmount(expense.amount.toString());\n      setCurrency(expense.currency);\n      setDescription(expense.description);\n      setCategory(expense.category || '');\n    }\n  }, [expense]);\n\n  const handleSave = () => {\n    if (!expense || !amount.trim() || !description.trim()) return;\n\n    const numericAmount = parseFloat(amount);\n    if (isNaN(numericAmount) || numericAmount <= 0) {\n      Alert.alert('Invalid Amount', 'Please enter a valid amount greater than 0');\n      return;\n    }\n\n    const updatedExpense: Expense = {\n      ...expense,\n      amount: numericAmount,\n      currency,\n      description: description.trim(),\n      category: category.trim() || undefined,\n    };\n\n    onSave(updatedExpense);\n  };\n\n  return (\n    <Modal visible={visible} animationType=\"slide\" transparent>\n      <View style={styles.modalContainer}>\n        <View style={styles.modalContent}>\n          <Text style={styles.modalTitle}>Edit Expense</Text>\n\n          <TextInput\n            style={styles.modalInput}\n            value={amount}\n            onChangeText={setAmount}\n            placeholder=\"Amount\"\n            keyboardType=\"numeric\"\n          />\n\n          <View style={styles.currencyContainer}>\n            <Text style={styles.inputLabel}>Currency:</Text>\n            <View style={styles.currencyOptions}>\n              {currencies.map((curr) => (\n                <TouchableOpacity\n                  key={curr}\n                  style={[\n                    styles.currencyButton,\n                    currency === curr && styles.currencyButtonActive,\n                  ]}\n                  onPress={() => setCurrency(curr)}\n                >\n                  <Text\n                    style={[\n                      styles.currencyButtonText,\n                      currency === curr && styles.currencyButtonTextActive,\n                    ]}\n                  >\n                    {curr}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n          </View>\n\n          <TextInput\n            style={[styles.modalInput, styles.modalInputLarge]}\n            value={description}\n            onChangeText={setDescription}\n            placeholder=\"Description\"\n            multiline\n          />\n\n          <View style={styles.categoryContainer}>\n            <Text style={styles.inputLabel}>Category (optional):</Text>\n            <View style={styles.categoryOptions}>\n              {categories.map((cat) => (\n                <TouchableOpacity\n                  key={cat}\n                  style={[\n                    styles.categoryButton,\n                    category === cat && styles.categoryButtonActive,\n                  ]}\n                  onPress={() => setCategory(category === cat ? '' : cat)}\n                >\n                  <Text\n                    style={[\n                      styles.categoryButtonText,\n                      category === cat && styles.categoryButtonTextActive,\n                    ]}\n                  >\n                    {cat}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n          </View>\n\n          <View style={styles.modalButtons}>\n            <TouchableOpacity style={styles.modalButton} onPress={onCancel}>\n              <Text style={styles.modalButtonText}>Cancel</Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={[styles.modalButton, styles.modalButtonPrimary]}\n              onPress={handleSave}\n            >\n              <Text style={[styles.modalButtonText, styles.modalButtonTextPrimary]}>\n                Save\n              </Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nexport const ExpensesScreen: React.FC = () => {\n  const [expenses, setExpenses] = useState<Expense[]>([]);\n  const [filter, setFilter] = useState<'all' | 'thisMonth'>('all');\n  const [editingExpense, setEditingExpense] = useState<Expense | null>(null);\n  const [modalVisible, setModalVisible] = useState(false);\n  const [viewMode, setViewMode] = useState<'list' | 'analytics'>('list');\n\n  const loadExpenses = useCallback(async () => {\n    const expenseList = await StorageService.getExpenses();\n    setExpenses(expenseList.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime()));\n  }, []);\n\n  // Load expenses on initial mount\n  useEffect(() => {\n    loadExpenses();\n  }, [loadExpenses]);\n\n  // Refresh expenses when the screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      loadExpenses();\n    }, [loadExpenses])\n  );\n\n  const filteredExpenses = expenses.filter(expense => {\n    if (filter === 'thisMonth') {\n      const now = new Date();\n      const monthStart = startOfMonth(now);\n      const monthEnd = endOfMonth(now);\n      return isWithinInterval(expense.createdAt, { start: monthStart, end: monthEnd });\n    }\n    return true;\n  });\n\n  interface TotalAmount {\n    currency: string;\n    amount: number;\n    formatted: string;\n  }\n\n  const getTotalAmount = (expenseList: Expense[]): TotalAmount[] => {\n    if (expenseList.length === 0) {\n      return [];\n    }\n\n    const totals: Record<string, number> = {};\n    \n    // Group expenses by currency and sum amounts\n    expenseList.forEach(expense => {\n      totals[expense.currency] = (totals[expense.currency] || 0) + expense.amount;\n    });\n\n    // Convert totals to array of TotalAmount objects\n    return Object.keys(totals).map((currency): TotalAmount => ({\n      currency,\n      amount: totals[currency],\n      formatted: TextAnalyzer.formatCurrency(totals[currency], currency)\n    }));\n  };\n\n  // Category analytics\n  const getCategoryBreakdown = (expenseList: Expense[]) => {\n    const categoryTotals: Record<string, { amount: number; count: number; currency: string }> = {};\n    \n    expenseList.forEach(expense => {\n      const category = expense.category || 'Other';\n      if (!categoryTotals[category]) {\n        categoryTotals[category] = { amount: 0, count: 0, currency: expense.currency };\n      }\n      categoryTotals[category].amount += expense.amount;\n      categoryTotals[category].count += 1;\n    });\n\n    return Object.entries(categoryTotals)\n      .map(([category, data]) => ({\n        category,\n        amount: data.amount,\n        count: data.count,\n        currency: data.currency,\n        formatted: TextAnalyzer.formatCurrency(data.amount, data.currency)\n      }))\n      .sort((a, b) => b.amount - a.amount);\n  };\n\n  const getMonthlyTrend = () => {\n    const monthlyData: Record<string, { amount: number; count: number }> = {};\n    \n    expenses.forEach(expense => {\n      const monthKey = format(expense.createdAt, 'MMM yyyy');\n      if (!monthlyData[monthKey]) {\n        monthlyData[monthKey] = { amount: 0, count: 0 };\n      }\n      monthlyData[monthKey].amount += expense.amount;\n      monthlyData[monthKey].count += 1;\n    });\n\n    return Object.entries(monthlyData)\n      .map(([month, data]) => ({\n        month,\n        amount: data.amount,\n        count: data.count\n      }))\n      .sort((a, b) => new Date(a.month).getTime() - new Date(b.month).getTime());\n  };\n\n  const handleEdit = (expense: Expense) => {\n    setEditingExpense(expense);\n    setModalVisible(true);\n  };\n\n  const handleSaveEdit = async (updatedExpense: Expense) => {\n    await StorageService.updateExpense(updatedExpense.id, {\n      amount: updatedExpense.amount,\n      currency: updatedExpense.currency,\n      description: updatedExpense.description,\n      category: updatedExpense.category,\n    });\n\n    setExpenses(prev =>\n      prev.map(expense => (expense.id === updatedExpense.id ? updatedExpense : expense))\n    );\n\n    setModalVisible(false);\n    setEditingExpense(null);\n  };\n\n  const handleDelete = async (id: string) => {\n    // Use window.confirm for web compatibility instead of Alert.alert\n    const confirmed = typeof window !== 'undefined' \n      ? window.confirm('Are you sure you want to delete this expense?')\n      : true; // On mobile, proceed directly\n    \n    if (confirmed) {\n      try {\n        await StorageService.deleteExpense(id);\n        setExpenses(prev => prev.filter(expense => expense.id !== id));\n      } catch (error) {\n        console.error('Error deleting expense:', error);\n      }\n    }\n  };\n\n  const renderExpense = ({ item }: { item: Expense }) => (\n    <ExpenseCard\n      expense={item}\n      onEdit={handleEdit}\n      onDelete={handleDelete}\n    />\n  );\n\n  const getFilterButtonStyle = (filterType: typeof filter) => [\n    styles.filterButton,\n    filter === filterType && styles.filterButtonActive,\n  ];\n\n  const getFilterTextStyle = (filterType: typeof filter) => [\n    styles.filterButtonText,\n    filter === filterType && styles.filterButtonTextActive,\n  ];\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Expenses</Text>\n        <View style={styles.totalsContainer}>\n          {filteredExpenses.length === 0 ? (\n            <View style={styles.totalContainer}>\n              <Text style={styles.totalLabel}>Total:</Text>\n              <Text style={styles.totalAmount}>$0.00</Text>\n            </View>\n          ) : (\n            getTotalAmount(filteredExpenses).map((total) => (\n              <View key={total.currency} style={styles.totalContainer}>\n                <Text style={styles.totalLabel}>{total.currency} Total:</Text>\n                <Text style={styles.totalAmount}>{total.formatted}</Text>\n              </View>\n            ))\n          )}\n        </View>\n      </View>\n\n      <View style={styles.filterContainer}>\n        <TouchableOpacity\n          style={getFilterButtonStyle('all')}\n          onPress={() => setFilter('all')}\n        >\n          <Text style={getFilterTextStyle('all')}>All Time</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={getFilterButtonStyle('thisMonth')}\n          onPress={() => setFilter('thisMonth')}\n        >\n          <Text style={getFilterTextStyle('thisMonth')}>This Month</Text>\n        </TouchableOpacity>\n      </View>\n\n      {/* View Mode Toggle */}\n      <View style={styles.viewToggleContainer}>\n        <TouchableOpacity\n          style={[styles.viewToggleButton, viewMode === 'list' && styles.viewToggleButtonActive]}\n          onPress={() => setViewMode('list')}\n        >\n          <Text style={[styles.viewToggleText, viewMode === 'list' && styles.viewToggleTextActive]}>List</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={[styles.viewToggleButton, viewMode === 'analytics' && styles.viewToggleButtonActive]}\n          onPress={() => setViewMode('analytics')}\n        >\n          <Text style={[styles.viewToggleText, viewMode === 'analytics' && styles.viewToggleTextActive]}>Analytics</Text>\n        </TouchableOpacity>\n      </View>\n\n      {filteredExpenses.length === 0 ? (\n        <View style={styles.emptyContainer}>\n          <Ionicons name=\"receipt-outline\" size={64} color=\"#ccc\" />\n          <Text style={styles.emptyText}>\n            {filter === 'all' ? 'No expenses yet' : 'No expenses this month'}\n          </Text>\n          <Text style={styles.emptySubtext}>\n            Add entries in your journal to track expenses\n          </Text>\n        </View>\n      ) : (\n        viewMode === 'list' ? (\n          <FlatList\n            data={filteredExpenses}\n            renderItem={renderExpense}\n            keyExtractor={(item) => item.id}\n            style={styles.list}\n            showsVerticalScrollIndicator={false}\n          />\n        ) : (\n          <ScrollView style={styles.analyticsContainer} showsVerticalScrollIndicator={false}>\n            {/* Category Breakdown */}\n            <View style={styles.analyticsSection}>\n              <Text style={styles.analyticsSectionTitle}> Category Breakdown</Text>\n              {getCategoryBreakdown(filteredExpenses).map((category, index) => (\n                <View key={category.category} style={styles.categoryAnalyticsItem}>\n                  <View style={styles.categoryAnalyticsInfo}>\n                    <Text style={styles.categoryAnalyticsName}>{category.category}</Text>\n                    <Text style={styles.categoryAnalyticsCount}>\n                      {category.count} {category.count === 1 ? 'expense' : 'expenses'}\n                    </Text>\n                  </View>\n                  <Text style={styles.categoryAnalyticsAmount}>{category.formatted}</Text>\n                </View>\n              ))}\n            </View>\n\n            {/* Monthly Trends */}\n            <View style={styles.analyticsSection}>\n              <Text style={styles.analyticsSectionTitle}> Monthly Trends</Text>\n              {getMonthlyTrend().map((trend, index) => (\n                <View key={trend.month} style={styles.trendItem}>\n                  <Text style={styles.trendMonth}>{trend.month}</Text>\n                  <View style={{ alignItems: 'flex-end' }}>\n                    <Text style={styles.trendAmount}>\n                      {TextAnalyzer.formatCurrency(trend.amount, 'USD')}\n                    </Text>\n                    <Text style={styles.categoryAnalyticsCount}>\n                      {trend.count} {trend.count === 1 ? 'expense' : 'expenses'}\n                    </Text>\n                  </View>\n                </View>\n              ))}\n            </View>\n\n            {/* Quick Stats */}\n            <View style={styles.analyticsSection}>\n              <Text style={styles.analyticsSectionTitle}> Quick Stats</Text>\n              <View style={styles.trendItem}>\n                <Text style={styles.trendMonth}>Average per expense</Text>\n                <Text style={styles.trendAmount}>\n                  {filteredExpenses.length > 0\n                    ? TextAnalyzer.formatCurrency(\n                        filteredExpenses.reduce((sum, exp) => sum + exp.amount, 0) / filteredExpenses.length,\n                        filteredExpenses[0].currency\n                      )\n                    : '$0.00'\n                  }\n                </Text>\n              </View>\n              <View style={styles.trendItem}>\n                <Text style={styles.trendMonth}>Most expensive category</Text>\n                <Text style={styles.trendAmount}>\n                  {getCategoryBreakdown(filteredExpenses)[0]?.category || 'None'}\n                </Text>\n              </View>\n              <View style={styles.trendItem}>\n                <Text style={styles.trendMonth}>Total categories</Text>\n                <Text style={styles.trendAmount}>\n                  {getCategoryBreakdown(filteredExpenses).length}\n                </Text>\n              </View>\n            </View>\n          </ScrollView>\n        )\n      )}\n\n      <EditExpenseModal\n        visible={modalVisible}\n        expense={editingExpense}\n        onSave={handleSaveEdit}\n        onCancel={() => {\n          setModalVisible(false);\n          setEditingExpense(null);\n        }}\n      />\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n  },\n  header: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 8,\n  },\n  totalsContainer: {\n    paddingHorizontal: 16,\n    paddingTop: 8,\n  },\n  totalContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  totalLabel: {\n    fontSize: 14,\n    color: '#666',\n    marginRight: 8,\n  },\n  totalAmount: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#2e7d32',\n  },\n  filterContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  filterButton: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    marginRight: 8,\n    borderRadius: 20,\n    backgroundColor: '#f0f0f0',\n  },\n  filterButtonActive: {\n    backgroundColor: '#007AFF',\n  },\n  filterButtonText: {\n    fontSize: 14,\n    color: '#666',\n    fontWeight: '500',\n  },\n  filterButtonTextActive: {\n    color: '#fff',\n  },\n  list: {\n    flex: 1,\n    paddingHorizontal: 16,\n  },\n  expenseCard: {\n    backgroundColor: '#fff',\n    marginVertical: 6,\n    padding: 16,\n    borderRadius: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  expenseHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  expenseAmount: {\n    flex: 1,\n  },\n  amountText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#2e7d32',\n  },\n  categoryText: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 2,\n    backgroundColor: '#f0f0f0',\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 10,\n    alignSelf: 'flex-start',\n  },\n  expenseActions: {\n    flexDirection: 'row',\n  },\n  actionButton: {\n    padding: 10,\n    marginLeft: 8,\n    minWidth: 36,\n    minHeight: 36,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 6,\n    backgroundColor: 'rgba(0,0,0,0.05)',\n    borderWidth: 1,\n    borderColor: 'rgba(0,0,0,0.1)',\n  },\n  deleteButton: {\n    backgroundColor: '#f44336',\n    borderColor: '#d32f2f',\n  },\n  expenseDescription: {\n    fontSize: 14,\n    color: '#333',\n    lineHeight: 18,\n    marginBottom: 8,\n  },\n  expenseDate: {\n    fontSize: 12,\n    color: '#999',\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 40,\n  },\n  emptyText: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#666',\n    marginTop: 16,\n    textAlign: 'center',\n  },\n  emptySubtext: {\n    fontSize: 14,\n    color: '#999',\n    marginTop: 8,\n    textAlign: 'center',\n    lineHeight: 20,\n  },\n  modalContainer: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 20,\n    width: '90%',\n    maxWidth: 400,\n    maxHeight: '80%',\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 16,\n    textAlign: 'center',\n  },\n  modalInput: {\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n    borderRadius: 8,\n    padding: 12,\n    marginBottom: 12,\n    fontSize: 16,\n    minHeight: 44,\n  },\n  modalInputLarge: {\n    minHeight: 80,\n    textAlignVertical: 'top',\n  },\n  inputLabel: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#333',\n    marginBottom: 8,\n  },\n  currencyContainer: {\n    marginBottom: 12,\n  },\n  currencyOptions: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n  },\n  currencyButton: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    marginRight: 8,\n    marginBottom: 8,\n    borderRadius: 16,\n    backgroundColor: '#f0f0f0',\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  currencyButtonActive: {\n    backgroundColor: '#007AFF',\n    borderColor: '#007AFF',\n  },\n  currencyButtonText: {\n    fontSize: 14,\n    color: '#666',\n    fontWeight: '500',\n  },\n  currencyButtonTextActive: {\n    color: '#fff',\n  },\n  categoryContainer: {\n    marginBottom: 16,\n  },\n  categoryOptions: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n  },\n  categoryButton: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    marginRight: 8,\n    marginBottom: 8,\n    borderRadius: 16,\n    backgroundColor: '#f0f0f0',\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  categoryButtonActive: {\n    backgroundColor: '#4caf50',\n    borderColor: '#4caf50',\n  },\n  categoryButtonText: {\n    fontSize: 12,\n    color: '#666',\n    fontWeight: '500',\n  },\n  categoryButtonTextActive: {\n    color: '#fff',\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 16,\n  },\n  modalButton: {\n    flex: 1,\n    paddingVertical: 12,\n    borderRadius: 8,\n    marginHorizontal: 4,\n    backgroundColor: '#f0f0f0',\n  },\n  modalButtonPrimary: {\n    backgroundColor: '#007AFF',\n  },\n  modalButtonText: {\n    textAlign: 'center',\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#333',\n  },\n  modalButtonTextPrimary: {\n    color: '#fff',\n  },\n  viewToggleContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  viewToggleButton: {\n    flex: 1,\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    marginHorizontal: 4,\n    borderRadius: 16,\n    backgroundColor: '#f0f0f0',\n    alignItems: 'center',\n  },\n  viewToggleButtonActive: {\n    backgroundColor: '#007AFF',\n  },\n  viewToggleText: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#666',\n  },\n  viewToggleTextActive: {\n    color: '#fff',\n  },\n  analyticsContainer: {\n    flex: 1,\n    paddingHorizontal: 16,\n  },\n  analyticsSection: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 16,\n    marginVertical: 8,\n  },\n  analyticsSectionTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 12,\n  },\n  categoryAnalyticsItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: '#f0f0f0',\n  },\n  categoryAnalyticsInfo: {\n    flex: 1,\n  },\n  categoryAnalyticsName: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#333',\n  },\n  categoryAnalyticsCount: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 2,\n  },\n  categoryAnalyticsAmount: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    color: '#2e7d32',\n  },\n  trendItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: '#f0f0f0',\n  },\n  trendMonth: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#333',\n  },\n  trendAmount: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    color: '#2e7d32',\n  },\n});\n","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  ScrollView,\n  StyleSheet,\n  TouchableOpacity,\n  Dimensions,\n} from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { format, subDays, subWeeks, subMonths, isWithinInterval, startOfDay, endOfDay } from 'date-fns';\n\nimport { Entry, Expense, ActionItem } from '../types';\nimport { StorageService } from '../utils/storage';\nimport { TextAnalyzer } from '../utils/textAnalysis';\n\ninterface AnalyticsData {\n  totalEntries: number;\n  entriesThisWeek: number;\n  entriesThisMonth: number;\n  totalExpenses: { currency: string; amount: number }[];\n  expensesThisMonth: { currency: string; amount: number }[];\n  totalActionItems: number;\n  completedActionItems: number;\n  pendingActionItems: number;\n  completionRate: number;\n  averageEntriesPerDay: number;\n  mostActiveDay: string;\n  topExpenseCategories: { category: string; amount: number; currency: string }[];\n  recentActivity: {\n    date: string;\n    entries: number;\n    expenses: number;\n    actions: number;\n  }[];\n}\n\nexport const AnalyticsScreen: React.FC = () => {\n  const [analytics, setAnalytics] = useState<AnalyticsData | null>(null);\n  const [selectedPeriod, setSelectedPeriod] = useState<'week' | 'month' | 'all'>('month');\n  const [loading, setLoading] = useState(true);\n\n  const calculateAnalytics = useCallback(async () => {\n    setLoading(true);\n    try {\n      const [entries, expenses, actionItems] = await Promise.all([\n        StorageService.getEntries(),\n        StorageService.getExpenses(),\n        StorageService.getActionItems()\n      ]);\n\n      const now = new Date();\n      const weekAgo = subWeeks(now, 1);\n      const monthAgo = subMonths(now, 1);\n\n      // Filter data by period\n      const getFilteredData = (period: 'week' | 'month' | 'all') => {\n        const cutoffDate = period === 'week' ? weekAgo : period === 'month' ? monthAgo : null;\n        \n        return {\n          entries: cutoffDate ? entries.filter(e => e.timestamp >= cutoffDate) : entries,\n          expenses: cutoffDate ? expenses.filter(e => e.createdAt >= cutoffDate) : expenses,\n          actionItems: cutoffDate ? actionItems.filter(a => a.createdAt >= cutoffDate) : actionItems\n        };\n      };\n\n      const periodData = getFilteredData(selectedPeriod);\n\n      // Basic counts\n      const totalEntries = entries.length;\n      const entriesThisWeek = entries.filter(e => e.timestamp >= weekAgo).length;\n      const entriesThisMonth = entries.filter(e => e.timestamp >= monthAgo).length;\n\n      // Expense totals by currency\n      const totalExpenses: { [key: string]: number } = {};\n      const expensesThisMonth: { [key: string]: number } = {};\n\n      expenses.forEach(expense => {\n        totalExpenses[expense.currency] = (totalExpenses[expense.currency] || 0) + expense.amount;\n      });\n\n      expenses.filter(e => e.createdAt >= monthAgo).forEach(expense => {\n        expensesThisMonth[expense.currency] = (expensesThisMonth[expense.currency] || 0) + expense.amount;\n      });\n\n      // Action items stats\n      const totalActionItems = actionItems.length;\n      const completedActionItems = actionItems.filter(a => a.completed).length;\n      const pendingActionItems = totalActionItems - completedActionItems;\n      const completionRate = totalActionItems > 0 ? (completedActionItems / totalActionItems) * 100 : 0;\n\n      // Activity patterns\n      const dayActivity: { [key: string]: number } = {};\n      entries.forEach(entry => {\n        const day = format(entry.timestamp, 'EEEE');\n        dayActivity[day] = (dayActivity[day] || 0) + 1;\n      });\n\n      const mostActiveDay = Object.entries(dayActivity).reduce((a, b) => \n        dayActivity[a[0]] > dayActivity[b[0]] ? a : b, ['Monday', 0])[0] || 'No data';\n\n      const averageEntriesPerDay = entries.length > 0 ? \n        entries.length / Math.max(1, Math.ceil((now.getTime() - entries[0].timestamp.getTime()) / (1000 * 60 * 60 * 24))) : 0;\n\n      // Top expense categories\n      const categoryTotals: { [key: string]: { amount: number; currency: string } } = {};\n      expenses.forEach(expense => {\n        const category = expense.category || 'Other';\n        if (!categoryTotals[category]) {\n          categoryTotals[category] = { amount: 0, currency: expense.currency };\n        }\n        categoryTotals[category].amount += expense.amount;\n      });\n\n      const topExpenseCategories = Object.entries(categoryTotals)\n        .map(([category, data]) => ({ category, amount: data.amount, currency: data.currency }))\n        .sort((a, b) => b.amount - a.amount)\n        .slice(0, 5);\n\n      // Recent activity (last 7 days)\n      const recentActivity = [];\n      for (let i = 6; i >= 0; i--) {\n        const date = subDays(now, i);\n        const dayStart = startOfDay(date);\n        const dayEnd = endOfDay(date);\n        \n        const dayEntries = entries.filter(e => \n          isWithinInterval(e.timestamp, { start: dayStart, end: dayEnd })).length;\n        const dayExpenses = expenses.filter(e => \n          isWithinInterval(e.createdAt, { start: dayStart, end: dayEnd })).length;\n        const dayActions = actionItems.filter(a => \n          isWithinInterval(a.createdAt, { start: dayStart, end: dayEnd })).length;\n\n        recentActivity.push({\n          date: format(date, 'MMM dd'),\n          entries: dayEntries,\n          expenses: dayExpenses,\n          actions: dayActions,\n        });\n      }\n\n      setAnalytics({\n        totalEntries,\n        entriesThisWeek,\n        entriesThisMonth,\n        totalExpenses: Object.entries(totalExpenses).map(([currency, amount]) => ({ currency, amount })),\n        expensesThisMonth: Object.entries(expensesThisMonth).map(([currency, amount]) => ({ currency, amount })),\n        totalActionItems,\n        completedActionItems,\n        pendingActionItems,\n        completionRate,\n        averageEntriesPerDay,\n        mostActiveDay,\n        topExpenseCategories,\n        recentActivity,\n      });\n    } catch (error) {\n      console.error('Error calculating analytics:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [selectedPeriod]);\n\n  useFocusEffect(\n    useCallback(() => {\n      calculateAnalytics();\n    }, [calculateAnalytics])\n  );\n\n  if (loading || !analytics) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <Text style={styles.loadingText}>Loading analytics...</Text>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Analytics & Insights</Text>\n      </View>\n\n      <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>\n        {/* Period Selector */}\n        <View style={styles.periodSelector}>\n          {(['week', 'month', 'all'] as const).map((period) => (\n            <TouchableOpacity\n              key={period}\n              style={[\n                styles.periodButton,\n                selectedPeriod === period && styles.periodButtonActive\n              ]}\n              onPress={() => setSelectedPeriod(period)}\n            >\n              <Text style={[\n                styles.periodButtonText,\n                selectedPeriod === period && styles.periodButtonTextActive\n              ]}>\n                {period === 'all' ? 'All Time' : `This ${period.charAt(0).toUpperCase() + period.slice(1)}`}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n\n        {/* Summary Cards */}\n        <View style={styles.summaryGrid}>\n          <View style={styles.summaryCard}>\n            <Text style={styles.summaryNumber}>{analytics.totalEntries}</Text>\n            <Text style={styles.summaryLabel}>Total Entries</Text>\n          </View>\n          <View style={styles.summaryCard}>\n            <Text style={styles.summaryNumber}>{analytics.totalActionItems}</Text>\n            <Text style={styles.summaryLabel}>Action Items</Text>\n          </View>\n          <View style={styles.summaryCard}>\n            <Text style={styles.summaryNumber}>{analytics.completionRate.toFixed(0)}%</Text>\n            <Text style={styles.summaryLabel}>Completion Rate</Text>\n          </View>\n          <View style={styles.summaryCard}>\n            <Text style={styles.summaryNumber}>{analytics.averageEntriesPerDay.toFixed(1)}</Text>\n            <Text style={styles.summaryLabel}>Avg Entries/Day</Text>\n          </View>\n        </View>\n\n        {/* Spending Overview */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}> Spending Overview</Text>\n          {analytics.totalExpenses.length > 0 ? (\n            <View style={styles.expenseList}>\n              {analytics.totalExpenses.map((expense, index) => (\n                <View key={expense.currency} style={styles.expenseItem}>\n                  <Text style={styles.expenseAmount}>\n                    {TextAnalyzer.formatCurrency(expense.amount, expense.currency)}\n                  </Text>\n                  <Text style={styles.expenseLabel}>Total Spent</Text>\n                </View>\n              ))}\n            </View>\n          ) : (\n            <Text style={styles.emptyText}>No expenses recorded yet</Text>\n          )}\n        </View>\n\n        {/* Top Categories */}\n        {analytics.topExpenseCategories.length > 0 && (\n          <View style={styles.section}>\n            <Text style={styles.sectionTitle}> Top Spending Categories</Text>\n            <View style={styles.categoryList}>\n              {analytics.topExpenseCategories.map((category, index) => (\n                <View key={category.category} style={styles.categoryItem}>\n                  <View style={styles.categoryInfo}>\n                    <Text style={styles.categoryName}>{category.category}</Text>\n                    <Text style={styles.categoryAmount}>\n                      {TextAnalyzer.formatCurrency(category.amount, category.currency)}\n                    </Text>\n                  </View>\n                  <View style={[styles.categoryBar, { width: `${(category.amount / analytics.topExpenseCategories[0].amount) * 100}%` }]} />\n                </View>\n              ))}\n            </View>\n          </View>\n        )}\n\n        {/* Activity Patterns */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}> Activity Patterns</Text>\n          <View style={styles.patternCard}>\n            <Text style={styles.patternLabel}>Most Active Day</Text>\n            <Text style={styles.patternValue}>{analytics.mostActiveDay}</Text>\n          </View>\n        </View>\n\n        {/* Recent Activity Chart */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}> Recent Activity (Last 7 Days)</Text>\n          <View style={styles.chartContainer}>\n            {analytics.recentActivity.map((day, index) => {\n              // Calculate max values for proper scaling\n              const maxEntries = Math.max(...analytics.recentActivity.map(d => d.entries));\n              const maxExpenses = Math.max(...analytics.recentActivity.map(d => d.expenses));\n              const maxActions = Math.max(...analytics.recentActivity.map(d => d.actions));\n              const maxValue = Math.max(maxEntries, maxExpenses, maxActions, 1);\n              \n              // Scale bars to fit within the allocated height (50px max)\n              const entriesHeight = Math.max(4, (day.entries / maxValue) * 50);\n              const expensesHeight = Math.max(4, (day.expenses / maxValue) * 50);\n              const actionsHeight = Math.max(4, (day.actions / maxValue) * 50);\n              \n              return (\n                <View key={day.date} style={styles.chartDay}>\n                  <View style={styles.chartBars}>\n                    <View style={[styles.chartBar, styles.entriesBar, { height: entriesHeight }]} />\n                    <View style={[styles.chartBar, styles.expensesBar, { height: expensesHeight }]} />\n                    <View style={[styles.chartBar, styles.actionsBar, { height: actionsHeight }]} />\n                  </View>\n                  <Text style={styles.chartDate}>{day.date}</Text>\n                </View>\n              );\n            })}\n          </View>\n          \n          {/* Legend */}\n          <View style={styles.legend}>\n            <View style={styles.legendItem}>\n              <View style={[styles.legendColor, styles.entriesBar]} />\n              <Text style={styles.legendText}>Entries</Text>\n            </View>\n            <View style={styles.legendItem}>\n              <View style={[styles.legendColor, styles.expensesBar]} />\n              <Text style={styles.legendText}>Expenses</Text>\n            </View>\n            <View style={styles.legendItem}>\n              <View style={[styles.legendColor, styles.actionsBar]} />\n              <Text style={styles.legendText}>Actions</Text>\n            </View>\n          </View>\n        </View>\n\n        {/* Insights */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}> Insights</Text>\n          <View style={styles.insightsList}>\n            {analytics.averageEntriesPerDay > 3 && (\n              <View style={styles.insightCard}>\n                <Text style={styles.insightText}>\n                   You're on fire! Averaging {analytics.averageEntriesPerDay.toFixed(1)} entries per day\n                </Text>\n              </View>\n            )}\n            {analytics.completionRate > 75 && (\n              <View style={styles.insightCard}>\n                <Text style={styles.insightText}>\n                   Great job! You complete {analytics.completionRate.toFixed(0)}% of your action items\n                </Text>\n              </View>\n            )}\n            {analytics.pendingActionItems > 5 && (\n              <View style={styles.insightCard}>\n                <Text style={styles.insightText}>\n                   You have {analytics.pendingActionItems} pending action items. Consider reviewing them!\n                </Text>\n              </View>\n            )}\n            {analytics.totalExpenses.length === 0 && analytics.totalEntries > 10 && (\n              <View style={styles.insightCard}>\n                <Text style={styles.insightText}>\n                   No expenses tracked yet. Try adding some spending entries to track your budget!\n                </Text>\n              </View>\n            )}\n          </View>\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n  },\n  header: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n  },\n  loadingText: {\n    textAlign: 'center',\n    marginTop: 50,\n    fontSize: 16,\n    color: '#666',\n  },\n  content: {\n    flex: 1,\n  },\n  periodSelector: {\n    flexDirection: 'row',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  periodButton: {\n    flex: 1,\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    marginHorizontal: 4,\n    borderRadius: 16,\n    backgroundColor: '#f0f0f0',\n    alignItems: 'center',\n  },\n  periodButtonActive: {\n    backgroundColor: '#007AFF',\n  },\n  periodButtonText: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#666',\n  },\n  periodButtonTextActive: {\n    color: '#fff',\n  },\n  summaryGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    paddingHorizontal: 16,\n    paddingTop: 16,\n    gap: 12,\n  },\n  summaryCard: {\n    width: (Dimensions.get('window').width - 44) / 2,\n    backgroundColor: '#fff',\n    padding: 16,\n    borderRadius: 12,\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  summaryNumber: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 4,\n  },\n  summaryLabel: {\n    fontSize: 12,\n    color: '#666',\n    textAlign: 'center',\n  },\n  section: {\n    marginTop: 16,\n    paddingHorizontal: 16,\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 12,\n  },\n  expenseList: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 16,\n  },\n  expenseItem: {\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  expenseAmount: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#2e7d32',\n  },\n  expenseLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 2,\n  },\n  categoryList: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 16,\n  },\n  categoryItem: {\n    marginBottom: 12,\n    position: 'relative',\n  },\n  categoryInfo: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 4,\n    zIndex: 1,\n  },\n  categoryName: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#333',\n  },\n  categoryAmount: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    color: '#2e7d32',\n  },\n  categoryBar: {\n    height: 4,\n    backgroundColor: '#007AFF',\n    borderRadius: 2,\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    opacity: 0.3,\n  },\n  patternCard: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 16,\n    alignItems: 'center',\n  },\n  patternLabel: {\n    fontSize: 14,\n    color: '#666',\n    marginBottom: 4,\n  },\n  patternValue: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333',\n  },\n  chartContainer: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 16,\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    alignItems: 'flex-end',\n    height: 100,\n    marginBottom: 8,\n  },\n  chartDay: {\n    alignItems: 'center',\n    flex: 1,\n  },\n  chartBars: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    height: 50,\n    marginBottom: 8,\n    gap: 2,\n  },\n  chartBar: {\n    width: 6,\n    borderRadius: 3,\n    minHeight: 4,\n  },\n  entriesBar: {\n    backgroundColor: '#007AFF',\n  },\n  expensesBar: {\n    backgroundColor: '#2e7d32',\n  },\n  actionsBar: {\n    backgroundColor: '#ff9800',\n  },\n  chartDate: {\n    fontSize: 10,\n    color: '#666',\n  },\n  legend: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    marginTop: 12,\n    gap: 16,\n  },\n  legendItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  legendColor: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    marginRight: 6,\n  },\n  legendText: {\n    fontSize: 12,\n    color: '#666',\n  },\n  insightsList: {\n    gap: 8,\n  },\n  insightCard: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 16,\n    borderLeftWidth: 4,\n    borderLeftColor: '#007AFF',\n  },\n  insightText: {\n    fontSize: 14,\n    color: '#333',\n    lineHeight: 20,\n  },\n  emptyText: {\n    textAlign: 'center',\n    color: '#666',\n    fontSize: 14,\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 20,\n  },\n});","import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ScrollView,\n  Image,\n} from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\n\ninterface LayoutOption {\n  id: string;\n  name: string;\n  description: string;\n  preview: string;\n  features: string[];\n}\n\nconst LAYOUT_OPTIONS: LayoutOption[] = [\n  {\n    id: 'chat',\n    name: 'Chat Style (Current)',\n    description: 'WhatsApp-like interface with message bubbles',\n    preview: '',\n    features: [\n      'Message bubbles with timestamps',\n      'Auto-categorization badges on right',\n      'Conversation-like flow',\n      'Familiar messaging interface'\n    ]\n  },\n  {\n    id: 'cards',\n    name: 'Card Layout',\n    description: 'Each entry as a clean card with clear categorization',\n    preview: '',\n    features: [\n      'Clean card design for each entry',\n      'Large category icons and labels',\n      'Amount/task details prominently displayed',\n      'More space for content'\n    ]\n  },\n  {\n    id: 'list',\n    name: 'List View',\n    description: 'Compact list with category indicators on the left',\n    preview: '',\n    features: [\n      'Compact, efficient layout',\n      'Category icons on the left',\n      'Quick scanning of entries',\n      'More entries visible at once'\n    ]\n  },\n  {\n    id: 'timeline',\n    name: 'Timeline Style',\n    description: 'Chronological timeline with connecting lines',\n    preview: '',\n    features: [\n      'Visual timeline with connecting dots',\n      'Clear time progression',\n      'Category colors for visual grouping',\n      'Journal-like appearance'\n    ]\n  },\n  {\n    id: 'magazine',\n    name: 'Magazine Layout',\n    description: 'Rich content blocks with emphasis on categorization',\n    preview: '',\n    features: [\n      'Large typography and spacing',\n      'Category sections with colored headers',\n      'Reading-focused design',\n      'Publication-style layout'\n    ]\n  },\n  {\n    id: 'minimal',\n    name: 'Minimal Design',\n    description: 'Clean, distraction-free text-focused layout',\n    preview: '',\n    features: [\n      'Ultra-clean design',\n      'Focus on content over decoration',\n      'Subtle category indicators',\n      'Maximum readability'\n    ]\n  }\n];\n\nexport const LayoutSelectionScreen: React.FC<{ \n  onClose: () => void;\n  onSelect: (layoutId: string) => void;\n  currentLayout: string;\n}> = ({ onClose, onSelect, currentLayout }) => {\n  const [selectedLayout, setSelectedLayout] = useState(currentLayout);\n\n  const handleSelect = () => {\n    onSelect(selectedLayout);\n    onClose();\n  };\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Choose Journal Layout</Text>\n        <TouchableOpacity onPress={onClose} style={styles.closeButton}>\n          <Text style={styles.closeButtonText}></Text>\n        </TouchableOpacity>\n      </View>\n\n      <ScrollView style={styles.content}>\n        <Text style={styles.subtitle}>\n          Select how you'd like your journal entries to be displayed\n        </Text>\n\n        {LAYOUT_OPTIONS.map((option) => (\n          <TouchableOpacity\n            key={option.id}\n            style={[\n              styles.optionCard,\n              selectedLayout === option.id && styles.selectedCard\n            ]}\n            onPress={() => setSelectedLayout(option.id)}\n          >\n            <View style={styles.optionHeader}>\n              <View style={styles.optionTitleRow}>\n                <Text style={styles.optionPreview}>{option.preview}</Text>\n                <View style={styles.optionTitleContainer}>\n                  <Text style={styles.optionName}>{option.name}</Text>\n                  {selectedLayout === option.id && (\n                    <Text style={styles.currentBadge}>Current</Text>\n                  )}\n                </View>\n              </View>\n              <View style={[\n                styles.radioButton,\n                selectedLayout === option.id && styles.radioButtonSelected\n              ]}>\n                {selectedLayout === option.id && (\n                  <View style={styles.radioButtonInner} />\n                )}\n              </View>\n            </View>\n            \n            <Text style={styles.optionDescription}>{option.description}</Text>\n            \n            <View style={styles.featuresContainer}>\n              {option.features.map((feature, index) => (\n                <View key={index} style={styles.featureRow}>\n                  <Text style={styles.featureBullet}></Text>\n                  <Text style={styles.featureText}>{feature}</Text>\n                </View>\n              ))}\n            </View>\n          </TouchableOpacity>\n        ))}\n      </ScrollView>\n\n      <View style={styles.footer}>\n        <TouchableOpacity\n          style={[styles.selectButton, selectedLayout === currentLayout && styles.selectButtonDisabled]}\n          onPress={handleSelect}\n          disabled={selectedLayout === currentLayout}\n        >\n          <Text style={[styles.selectButtonText, selectedLayout === currentLayout && styles.selectButtonTextDisabled]}>\n            {selectedLayout === currentLayout ? 'Already Selected' : `Apply ${LAYOUT_OPTIONS.find(o => o.id === selectedLayout)?.name}`}\n          </Text>\n        </TouchableOpacity>\n      </View>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n  },\n  closeButton: {\n    padding: 8,\n    borderRadius: 20,\n    backgroundColor: '#f0f0f0',\n  },\n  closeButtonText: {\n    fontSize: 16,\n    color: '#666',\n    fontWeight: 'bold',\n  },\n  content: {\n    flex: 1,\n    paddingHorizontal: 16,\n  },\n  subtitle: {\n    fontSize: 16,\n    color: '#666',\n    textAlign: 'center',\n    marginVertical: 20,\n    lineHeight: 22,\n  },\n  optionCard: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    borderWidth: 2,\n    borderColor: 'transparent',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 1,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  selectedCard: {\n    borderColor: '#007AFF',\n    backgroundColor: '#f8f9ff',\n  },\n  optionHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  optionTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  optionPreview: {\n    fontSize: 28,\n    marginRight: 12,\n  },\n  optionTitleContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  optionName: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333',\n    marginRight: 8,\n  },\n  currentBadge: {\n    backgroundColor: '#007AFF',\n    color: '#fff',\n    fontSize: 10,\n    fontWeight: 'bold',\n    paddingHorizontal: 6,\n    paddingVertical: 2,\n    borderRadius: 10,\n    overflow: 'hidden',\n  },\n  optionDescription: {\n    fontSize: 14,\n    color: '#666',\n    marginBottom: 12,\n    lineHeight: 20,\n  },\n  featuresContainer: {\n    marginTop: 4,\n  },\n  featureRow: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    marginBottom: 4,\n  },\n  featureBullet: {\n    fontSize: 16,\n    color: '#007AFF',\n    marginRight: 8,\n    marginTop: 1,\n  },\n  featureText: {\n    fontSize: 13,\n    color: '#555',\n    flex: 1,\n    lineHeight: 18,\n  },\n  radioButton: {\n    width: 24,\n    height: 24,\n    borderRadius: 12,\n    borderWidth: 2,\n    borderColor: '#ddd',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  radioButtonSelected: {\n    borderColor: '#007AFF',\n  },\n  radioButtonInner: {\n    width: 12,\n    height: 12,\n    borderRadius: 6,\n    backgroundColor: '#007AFF',\n  },\n  footer: {\n    padding: 16,\n    backgroundColor: '#fff',\n    borderTopWidth: 1,\n    borderTopColor: '#e0e0e0',\n  },\n  selectButton: {\n    backgroundColor: '#007AFF',\n    borderRadius: 12,\n    paddingVertical: 16,\n    alignItems: 'center',\n  },\n  selectButtonDisabled: {\n    backgroundColor: '#f0f0f0',\n  },\n  selectButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  selectButtonTextDisabled: {\n    color: '#999',\n  },\n});","import React from 'react';\nimport { View, Text } from 'react-native';\nimport { StatusBar } from 'expo-status-bar';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\n\nimport { JournalScreen, ActionItemsScreen, ExpensesScreen, AnalyticsScreen } from './src/screens';\n\nconst Tab = createBottomTabNavigator();\n\nexport default function App() {\n  return (\n    <SafeAreaProvider>\n      <StatusBar style=\"dark\" />\n      <NavigationContainer>\n        <Tab.Navigator\n          screenOptions={({ route }) => ({\n            tabBarIcon: ({ focused, color, size }) => {\n              let iconText;\n\n              if (route.name === 'Journal') {\n                iconText = '';\n              } else if (route.name === 'ActionItems') {\n                iconText = '';\n              } else if (route.name === 'Expenses') {\n                iconText = '';\n              } else if (route.name === 'Analytics') {\n                iconText = '';\n              } else {\n                iconText = '';\n              }\n\n              return <Text style={{ fontSize: size, color }}>{iconText}</Text>;\n            },\n            tabBarActiveTintColor: '#007AFF',\n            tabBarInactiveTintColor: 'gray',\n            tabBarStyle: {\n              backgroundColor: '#fff',\n              borderTopWidth: 1,\n              borderTopColor: '#e0e0e0',\n              paddingBottom: 5,\n              paddingTop: 5,\n              height: 60\n            },\n            headerShown: false\n          })}\n        >\n          <Tab.Screen\n            name=\"Journal\"\n            component={JournalScreen}\n            options={{\n              tabBarLabel: 'Journal'\n            }}\n          />\n          <Tab.Screen\n            name=\"ActionItems\"\n            component={ActionItemsScreen}\n            options={{\n              tabBarLabel: 'Tasks'\n            }}\n          />\n          <Tab.Screen\n            name=\"Expenses\"\n            component={ExpensesScreen}\n            options={{\n              tabBarLabel: 'Expenses'\n            }}\n          />\n          <Tab.Screen\n            name=\"Analytics\"\n            component={AnalyticsScreen}\n            options={{\n              tabBarLabel: 'Analytics'\n            }}\n          />\n        </Tab.Navigator>\n      </NavigationContainer>\n    </SafeAreaProvider>\n  );\n}\n","import { registerRootComponent } from 'expo';\nimport App from './App';\n\nregisterRootComponent(App);\n\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\n// It also ensures that whether you load the app in Expo Go or in a native build,\n// the environment is set up appropriately\nregisterRootComponent(App);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/DailyTracker/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [7], () => (__webpack_require__(7806)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["ENTRIES_KEY","ACTION_ITEMS_KEY","EXPENSES_KEY","SETTINGS_KEY","StorageService","getEntries","jsonValue","AsyncStorage","getItem","restoredEntries","JSON","parse","map","entry","Object","assign","timestamp","Date","type","isMarkdown","sort","a","b","Math","abs","getTime","e","console","error","saveEntries","entries","stringify","setItem","addEntry","this","push","getActionItems","item","createdAt","dueDate","undefined","saveActionItems","actionItems","addActionItem","actionItem","updateActionItem","id","updates","index","findIndex","deleteActionItem","filteredItems","filter","getExpenses","expenses","expense","saveExpenses","addExpense","updateExpense","deleteExpense","filteredExpenses","getSettings","saveSettings","settings","uuid","v4","replace","c","r","random","toString","TextAnalyzer","detectActionItem","text","test","detectExpense","lowerText","toLowerCase","EXPENSE_KEYWORDS","some","keyword","includes","hasNumericValue","hasExpenseContext","context","getSystemCurrency","locale","Intl","NumberFormat","resolvedOptions","timezone","DateTimeFormat","timeZone","localeCurrencyMap","endsWith","testFormatter","style","currency","format","extractActionItem","entryId","cleanTitle","trim","startsWith","substring","title","completed","extractExpenseInfo","amount","extractAmount","categoryInfo","extractCategoryFromText","value","description","category","originalText","forMatch","match","mapToStandardCategory","simpleForMatch","onMatch","expenseContexts","transportTicketMatch","entertainmentTicketMatch","extractedCategory","lowerCategory","word","transport","charAt","toUpperCase","slice","numberMatches","length","detectedCurrency","largestAmount","amounts","numericPart","parseFloat","isNaN","NaN","num","max","formatCurrency","currencyCode","formatted","minimumFractionDigits","maximumFractionDigits","toFixed","isExpenseRelated","CURRENCY_PATTERNS","ACTION_KEYWORDS","MessageBubble","onLongPress","onEdit","onDelete","markdownStyles","isHovered","setIsHovered","useState","translateX","Animated","Value","desktop","isDesktop","width","Dimensions","get","userAgent","navigator","isLargeScreen","isMobileUA","panResponder","PanResponder","create","onStartShouldSetPanResponder","onMoveShouldSetPanResponder","_","gestureState","dx","onPanResponderMove","setValue","onPanResponderRelease","Alert","alert","onPress","spring","toValue","useNativeDriver","start","getIcon","_jsx","Text","fontSize","color","children","getCategoryLabel","autoDetected","View","styles","systemMessageContainer","userMessageContainer","_jsxs","bubbleWrapper","deleteIndicator","panHandlers","getBubbleStyle","baseStyles","messageBubble","alignmentStyle","systemMessage","userMessage","expenseBubble","actionBubble","systemBubble","defaultBubble","transform","onMouseEnter","onMouseLeave","TouchableOpacity","activeOpacity","delayLongPress","disabled","MessageContent","flex","messageHeader","actionButtons","actionButton","hitSlop","top","bottom","left","right","actionButtonText","deleteButton","stopPropagation","window","confirm","gestureHint","Markdown","messageText","systemMessageText","userMessageText","nonUserMessageText","selectable","categoryLabel","StyleSheet","marginVertical","alignSelf","maxWidth","flexShrink","position","backgroundColor","justifyContent","alignItems","borderRadius","messageContainer","paddingHorizontal","paddingVertical","minWidth","shadowColor","shadowOffset","height","shadowOpacity","shadowRadius","elevation","borderColor","borderWidth","marginLeft","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","marginRight","flexDirection","marginBottom","flexWrap","gap","padding","fontStyle","lineHeight","userSelect","WebkitUserSelect","display","textAlign","fontWeight","marginTop","defaultSettings","isMarkdownEnabled","enterToSend","systemCurrency","layoutStyle","theme","CURRENCIES","code","name","symbol","THEME_OPTIONS","icon","SettingsScreen","onClose","setSettings","showCurrencyModal","setShowCurrencyModal","showLayoutModal","setShowLayoutModal","showThemeModal","setShowThemeModal","useEffect","loadSettings","async","savedSettings","updateSetting","key","log","String","newSettings","LAYOUT_OPTIONS","SafeAreaView","container","header","headerTitle","closeButton","closeButtonText","ScrollView","content","section","sectionTitle","settingItem","settingInfo","settingLabel","settingDescription","Switch","onValueChange","showCurrencyPicker","settingValue","getCurrentCurrencyName","current","find","arrow","showThemePicker","getCurrentThemeName","currentTheme","t","showLayoutPicker","getCurrentLayoutName","l","dangerSettingItem","allEntries","dangerText","Modal","visible","animationType","transparent","onRequestClose","modalStyles","overlay","subtitle","optionsList","showsVerticalScrollIndicator","option","selectedOption","optionText","selectedOptionText","checkmark","cancelButton","cancelButtonText","layout","borderBottomWidth","borderBottomColor","minHeight","maxHeight","flexGrow","marginHorizontal","JournalScreen","setEntries","inputText","setInputText","setIsMarkdown","testIndex","setTestIndex","flatListRef","useRef","textInputRef","setEnterToSend","showSettings","setShowSettings","setLayoutStyle","searchQuery","setSearchQuery","showSearch","setShowSearch","filteredEntries","setFilteredEntries","setExpenses","setActionItems","forceExpense","setForceExpense","forceAction","setForceAction","editingEntry","setEditingEntry","editText","setEditText","editAmount","setEditAmount","editCategory","setEditCategory","testEntries","loadEntries","useCallback","sortedEntries","createEntriesWithDateSeparators","entriesList","result","currentDate","forEach","entryDate","date","query","filtered","entryDateLong","entryDateShort","loadExpensesAndActions","savedExpenses","savedActionItems","Promise","all","showToast","message","handleSendMessage","trimmedInput","displayText","autoDetectedAction","autoDetectedExpense","expenseInfo","updateEntryType","wasExpense","wasAction","then","exps","items","systemEntry","now","setTimeout","scrollToEnd","animated","focus","handleLongPress","options","handleEditEntry","markAsExpense","markAsActionItem","removeCategory","handleDeleteEntry","updatedEntries","confirmDelete","newType","zIndex","settingsButton","addSingleTestEntry","settingsButtonText","searchContainer","TextInput","searchInput","placeholder","onChangeText","autoCapitalize","clearButtonMode","clearButton","clearButtonText","FlatList","ref","data","renderItem","dateString","today","yesterday","displayDate","dateSeparator","dateSeparatorLine","dateSeparatorText","renderDateSeparator","renderCardEntry","layoutStyles","cardContainer","cardHeader","cardDate","cardTime","_Fragment","cardContent","cardText","expenseTag","expenseText","actionTag","actionText","renderListEntry","listContainer","listLeft","listTime","listIndicator","listContent","listText","listMeta","listExpense","listAction","renderTimelineEntry","timelineContainer","timelineLeft","timelineDot","timelineLine","timelineContent","timelineDate","timelineText","timelineTags","timelineExpense","timelineAction","renderMagazineEntry","magazineContainer","magazineHeader","magazineDate","magazineBody","magazineText","magazineFooter","magazineExpenseBlock","magazineExpenseLabel","magazineExpenseAmount","magazineActionBlock","magazineActionLabel","magazineActionText","renderMinimalEntry","minimalContainer","minimalContent","minimalText","minimalMeta","minimalTime","minimalExpense","minimalAction","renderChatEntry","keyExtractor","messagesList","getListStyle","onLayout","onContentSizeChange","ListEmptyComponent","KeyboardAvoidingView","behavior","inputContainer","quickActionsRow","quickActionButton","quickActionButtonActive","quickActionText","quickActionTextActive","inputRow","textInput","multiline","maxLength","onSubmitEditing","blurOnSubmit","returnKeyType","sendButton","sendButtonDisabled","presentationStyle","editModalOverlay","editModalContent","editModalTitle","editLabel","markdownToggle","markdownToggleActive","markdownToggleText","editTextInput","categoryButtons","categoryButton","categoryButtonActive","categoryButtonText","editInput","keyboardType","editModalButtons","editModalButton","editModalButtonCancel","editModalButtonText","editModalButtonSave","newActionItem","paddingBottom","borderTopWidth","borderTopColor","scale","textAlignVertical","overflow","textTransform","letterSpacing","fontFamily","body","heading1","heading2","strong","em","code_inline","ActionItemCard","onToggleComplete","itemCard","completedCard","itemHeader","Ionicons","size","textDecorationLine","itemDescription","completedText","itemFooter","itemDate","itemActions","EditModal","onSave","onCancel","setTitle","setDescription","modalContainer","modalContent","modalTitle","modalInput","modalInputLarge","modalButtons","modalButton","modalButtonText","modalButtonPrimary","handleSave","updatedItem","modalButtonTextPrimary","ActionItemsScreen","setFilter","editingItem","setEditingItem","modalVisible","setModalVisible","loadActionItems","useFocusEffect","handleToggleComplete","prev","handleEdit","handleDelete","getFilterButtonStyle","filterType","filterButton","filterButtonActive","getFilterTextStyle","filterButtonText","filterButtonTextActive","pendingCount","completedCount","stats","statsText","filterContainer","emptyContainer","emptyText","emptySubtext","renderActionItem","list","opacity","itemTitle","ExpenseCard","expenseCard","expenseHeader","expenseAmount","amountText","categoryText","expenseActions","expenseDescription","numberOfLines","expenseDate","EditExpenseModal","setAmount","setCurrency","setCategory","currencyContainer","inputLabel","currencyOptions","curr","currencyButton","currencyButtonActive","currencyButtonText","currencyButtonTextActive","categoryContainer","categoryOptions","cat","categoryButtonTextActive","numericAmount","updatedExpense","ExpensesScreen","editingExpense","setEditingExpense","viewMode","setViewMode","loadExpenses","expenseList","monthStart","startOfMonth","monthEnd","endOfMonth","isWithinInterval","end","getCategoryBreakdown","categoryTotals","count","totalsContainer","totalContainer","totalLabel","totalAmount","totals","keys","getTotalAmount","total","viewToggleContainer","viewToggleButton","viewToggleButtonActive","viewToggleText","viewToggleTextActive","renderExpense","analyticsContainer","analyticsSection","analyticsSectionTitle","categoryAnalyticsItem","categoryAnalyticsInfo","categoryAnalyticsName","categoryAnalyticsCount","categoryAnalyticsAmount","getMonthlyTrend","monthlyData","monthKey","month","trend","trendItem","trendMonth","trendAmount","reduce","sum","exp","paddingTop","AnalyticsScreen","analytics","setAnalytics","selectedPeriod","setSelectedPeriod","loading","setLoading","calculateAnalytics","weekAgo","subWeeks","monthAgo","subMonths","totalEntries","period","cutoffDate","getFilteredData","entriesThisWeek","entriesThisMonth","totalExpenses","expensesThisMonth","totalActionItems","completedActionItems","pendingActionItems","completionRate","dayActivity","day","mostActiveDay","averageEntriesPerDay","ceil","topExpenseCategories","recentActivity","i","subDays","dayStart","startOfDay","dayEnd","endOfDay","dayEntries","dayExpenses","dayActions","actions","loadingText","periodSelector","periodButton","periodButtonActive","periodButtonText","periodButtonTextActive","summaryGrid","summaryCard","summaryNumber","summaryLabel","expenseItem","expenseLabel","categoryList","categoryItem","categoryName","categoryAmount","categoryBar","patternCard","patternLabel","patternValue","chartContainer","maxEntries","d","maxExpenses","maxActions","maxValue","entriesHeight","expensesHeight","actionsHeight","chartDay","chartBars","chartBar","entriesBar","expensesBar","actionsBar","chartDate","legend","legendItem","legendColor","legendText","insightsList","insightCard","insightText","borderLeftWidth","borderLeftColor","optionCard","selectedCard","optionHeader","optionTitleRow","optionPreview","optionTitleContainer","optionName","currentBadge","optionDescription","featuresContainer","featureRow","featureBullet","featureText","radioButton","radioButtonSelected","radioButtonInner","footer","selectButton","selectButtonDisabled","selectButtonText","selectButtonTextDisabled","Tab","createBottomTabNavigator","App","SafeAreaProvider","StatusBar","NavigationContainer","Navigator","screenOptions","route","tabBarIcon","focused","iconText","tabBarActiveTintColor","tabBarInactiveTintColor","tabBarStyle","headerShown","Screen","component","tabBarLabel","registerRootComponent","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","n","getter","__esModule","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}